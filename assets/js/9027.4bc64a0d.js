"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9027],{9027:function(t,i,n){n.r(i),n.d(i,{ColorType:function(){return pn},CrosshairMode:function(){return Q},LastPriceAnimationMode:function(){return fn},LineStyle:function(){return s},LineType:function(){return r},MismatchDirection:function(){return fi},PriceLineSource:function(){return cn},PriceScaleMode:function(){return Pi},TickMarkType:function(){return en},TrackingModeExitMode:function(){return on},createChart:function(){return Fe},isBusinessDay:function(){return yn},isUTCTimestamp:function(){return wn},version:function(){return Be}});var e={allowDownsampling:!0};var r,s,o,h=function(){function t(t,i){var n=this;this._resolutionMediaQueryList=null,this._resolutionListener=function(t){return n._onResolutionChanged()},this._canvasConfiguredListeners=[],this.canvas=t,this._canvasSize={width:this.canvas.clientWidth,height:this.canvas.clientHeight},this._options=i,this._configureCanvas(),this._installResolutionListener()}return t.prototype.destroy=function(){this._canvasConfiguredListeners.length=0,this._uninstallResolutionListener(),this.canvas=null},Object.defineProperty(t.prototype,"canvasSize",{get:function(){return{width:this._canvasSize.width,height:this._canvasSize.height}},enumerable:!0,configurable:!0}),t.prototype.resizeCanvas=function(t){this._canvasSize={width:t.width,height:t.height},this._configureCanvas()},Object.defineProperty(t.prototype,"pixelRatio",{get:function(){var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");return t.devicePixelRatio>1||this._options.allowDownsampling?t.devicePixelRatio:1},enumerable:!0,configurable:!0}),t.prototype.subscribeCanvasConfigured=function(t){this._canvasConfiguredListeners.push(t)},t.prototype.unsubscribeCanvasConfigured=function(t){this._canvasConfiguredListeners=this._canvasConfiguredListeners.filter((function(i){return i!=t}))},t.prototype._configureCanvas=function(){var t=this.pixelRatio;this.canvas.style.width=this._canvasSize.width+"px",this.canvas.style.height=this._canvasSize.height+"px",this.canvas.width=this._canvasSize.width*t,this.canvas.height=this._canvasSize.height*t,this._emitCanvasConfigured()},t.prototype._emitCanvasConfigured=function(){var t=this;this._canvasConfiguredListeners.forEach((function(i){return i.call(t)}))},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");var i=t.devicePixelRatio;this._resolutionMediaQueryList=t.matchMedia("all and (resolution: "+i+"dppx)"),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){this._configureCanvas(),this._reinstallResolutionListener()},t}();function u(t,i){var n,e=((n={})[0]=[],n[1]=[t.lineWidth,t.lineWidth],n[2]=[2*t.lineWidth,2*t.lineWidth],n[3]=[6*t.lineWidth,6*t.lineWidth],n[4]=[t.lineWidth,4*t.lineWidth],n)[i];t.setLineDash(e)}function a(t,i,n,e){t.beginPath();var r=t.lineWidth%2?.5:0;t.moveTo(n,i+r),t.lineTo(e,i+r),t.stroke()}function l(t,i){if(!t)throw new Error("Assertion failed"+(i?": "+i:""))}function f(t){if(void 0===t)throw new Error("Value is undefined");return t}function c(t){if(null===t)throw new Error("Value is null");return t}function p(t){return c(f(t))}(o=r||(r={}))[o.Simple=0]="Simple",o[o.WithSteps=1]="WithSteps",function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(s||(s={}));var v={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function d(t){return t<0?0:t>255?255:Math.round(t)||0}function y(t){return t<=0||t>0?t<0?0:t>1?1:Math.round(1e4*t)/1e4:0}var w=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,g=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,M=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,m=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function _(t){var i;if((t=t.toLowerCase())in v&&(t=v[t]),i=m.exec(t)||M.exec(t))return[d(parseInt(i[1],10)),d(parseInt(i[2],10)),d(parseInt(i[3],10)),y(i.length<5?1:parseFloat(i[4]))];if(i=g.exec(t))return[d(parseInt(i[1],16)),d(parseInt(i[2],16)),d(parseInt(i[3],16)),1];if(i=w.exec(t))return[d(17*parseInt(i[1],16)),d(17*parseInt(i[2],16)),d(17*parseInt(i[3],16)),1];throw new Error("Cannot parse color: ".concat(t))}function b(t){var i,n=_(t);return{t:"rgb(".concat(n[0],", ").concat(n[1],", ").concat(n[2],")"),i:(i=n,.199*i[0]+.687*i[1]+.114*i[2]>160?"black":"white")}}var S=function(t,i){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},S(t,i)};function C(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}S(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}var x=function(){return x=Object.assign||function(t){for(var i,n=1,e=arguments.length;n<e;n++)for(var r in i=arguments[n])Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);return t},x.apply(this,arguments)};function A(t,i,n){if(n||2===arguments.length)for(var e,r=0,s=i.length;r<s;r++)!e&&r in i||(e||(e=Array.prototype.slice.call(i,0,r)),e[r]=i[r]);return t.concat(e||Array.prototype.slice.call(i))}var T=function(){function t(){this.h=[]}return t.prototype.u=function(t,i,n){var e={o:t,l:i,v:!0===n};this.h.push(e)},t.prototype._=function(t){var i=this.h.findIndex((function(i){return t===i.o}));i>-1&&this.h.splice(i,1)},t.prototype.M=function(t){this.h=this.h.filter((function(i){return i.l!==t}))},t.prototype.m=function(t,i){var n=A([],this.h,!0);this.h=this.h.filter((function(t){return!t.v})),n.forEach((function(n){return n.o(t,i)}))},t.prototype.g=function(){return this.h.length>0},t.prototype.p=function(){this.h=[]},t}();function z(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var e=0,r=i;e<r.length;e++){var s=r[e];for(var o in s)void 0!==s[o]&&("object"!=typeof s[o]||void 0===t[o]?t[o]=s[o]:z(t[o],s[o]))}return t}function k(t){return"number"==typeof t&&isFinite(t)}function E(t){return"number"==typeof t&&t%1==0}function L(t){return"string"==typeof t}function O(t){return"boolean"==typeof t}function D(t){var i,n,e,r=t;if(!r||"object"!=typeof r)return r;for(n in i=Array.isArray(r)?[]:{},r)r.hasOwnProperty(n)&&(e=r[n],i[n]=e&&"object"==typeof e?D(e):e);return i}function N(t){return null!==t}function W(t){return null===t?void 0:t}var R="'Trebuchet MS', Roboto, Ubuntu, sans-serif";function j(t,i,n){return n=void 0!==n?"".concat(n," "):"",void 0===i&&(i=R),"".concat(n).concat(t,"px ").concat(i)}var F=function(){function t(t){this.k={N:1,C:4,S:NaN,T:"",D:"",B:"",A:0,L:0,F:0,O:0,V:0},this.R=t}return t.prototype.W=function(){var t=this.k,i=this.P(),n=this.I();return t.S===i&&t.D===n||(t.S=i,t.D=n,t.T=j(i,n),t.O=Math.floor(i/3.5),t.A=t.O,t.L=Math.max(Math.ceil(i/2-t.C/2),0),t.F=Math.ceil(i/2+t.C/2),t.V=Math.round(i/10)),t.B=this.j(),this.k},t.prototype.j=function(){return this.R.W().layout.textColor},t.prototype.P=function(){return this.R.W().layout.fontSize},t.prototype.I=function(){return this.R.W().layout.fontFamily},t}(),B=function(){function t(){this.q=[]}return t.prototype.U=function(t){this.q=t},t.prototype.H=function(t,i,n,e){this.q.forEach((function(r){t.save(),r.H(t,i,n,e),t.restore()}))},t}(),P=function(){function t(){}return t.prototype.H=function(t,i,n,e){t.save(),t.scale(i,i),this.Y(t,n,e),t.restore()},t.prototype.$=function(t,i,n,e){t.save(),t.scale(i,i),this.K(t,n,e),t.restore()},t.prototype.K=function(t,i,n){},t}(),I=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.X=null,i}return C(i,t),i.prototype.Z=function(t){this.X=t},i.prototype.Y=function(t){if(null!==this.X&&null!==this.X.J){var i=this.X.J,n=this.X,e=function(e){t.beginPath();for(var r=i.to-1;r>=i.from;--r){var s=n.G[r];t.moveTo(s.tt,s.it),t.arc(s.tt,s.it,e,0,2*Math.PI)}t.fill()};t.fillStyle=n.nt,e(n.st+2),t.fillStyle=n.ht,e(n.st)}},i}(P);function X(){return{G:[{tt:0,it:0,rt:0,et:0}],ht:"",nt:"",st:0,J:null}}var V={from:0,to:1},G=function(){function t(t,i){this.ut=new B,this.ot=[],this.lt=[],this.ft=!0,this.R=t,this.ct=i,this.ut.U(this.ot)}return t.prototype.vt=function(t){var i=this.R._t();i.length!==this.ot.length&&(this.lt=i.map(X),this.ot=this.lt.map((function(t){var i=new I;return i.Z(t),i})),this.ut.U(this.ot)),this.ft=!0},t.prototype.dt=function(t,i,n){return this.ft&&(this.wt(t),this.ft=!1),this.ut},t.prototype.wt=function(t){var i=this,n=this.R._t(),e=this.ct.Mt(),r=this.R.bt();n.forEach((function(n,s){var o,h=i.lt[s],u=n.gt(e);if(null!==u&&n.yt()){var a=c(n.kt());h.ht=u.Nt,h.st=u.st,h.G[0].et=u.et,h.G[0].it=n.Ct().xt(u.et,a.St),h.nt=null!==(o=u.Tt)&&void 0!==o?o:i.R.Dt(h.G[0].it/t),h.G[0].rt=e,h.G[0].tt=r.Bt(e),h.J=V}else h.J=null}))},t}(),Y=function(){function t(t){this.At=t}return t.prototype.H=function(t,i,n,e){if(null!==this.At){var r=this.At.Lt.yt,s=this.At.Et.yt;if(r||s){t.save();var o=Math.round(this.At.tt*i),h=Math.round(this.At.it*i),l=Math.ceil(this.At.Ft*i),f=Math.ceil(this.At.Ot*i);t.lineCap="butt",r&&o>=0&&(t.lineWidth=Math.floor(this.At.Lt.Vt*i),t.strokeStyle=this.At.Lt.B,t.fillStyle=this.At.Lt.B,u(t,this.At.Lt.Rt),function(t,i,n,e){t.beginPath();var r=t.lineWidth%2?.5:0;t.moveTo(i+r,0),t.lineTo(i+r,e),t.stroke()}(t,o,0,f)),s&&h>=0&&(t.lineWidth=Math.floor(this.At.Et.Vt*i),t.strokeStyle=this.At.Et.B,t.fillStyle=this.At.Et.B,u(t,this.At.Et.Rt),a(t,h,0,l)),t.restore()}}},t}(),q=function(){function t(t){this.ft=!0,this.Wt={Lt:{Vt:1,Rt:0,B:"",yt:!1},Et:{Vt:1,Rt:0,B:"",yt:!1},Ft:0,Ot:0,tt:0,it:0},this.zt=new Y(this.Wt),this.Pt=t}return t.prototype.vt=function(){this.ft=!0},t.prototype.dt=function(t,i){return this.ft&&(this.wt(),this.ft=!1),this.zt},t.prototype.wt=function(){var t=this.Pt.yt(),i=c(this.Pt.It()),n=i.jt().W().crosshair,e=this.Wt;e.Et.yt=t&&this.Pt.qt(i),e.Lt.yt=t&&this.Pt.Ut(),e.Et.Vt=n.horzLine.width,e.Et.Rt=n.horzLine.style,e.Et.B=n.horzLine.color,e.Lt.Vt=n.vertLine.width,e.Lt.Rt=n.vertLine.style,e.Lt.B=n.vertLine.color,e.Ft=i.Ht(),e.Ot=i.Yt(),e.tt=this.Pt.$t(),e.it=this.Pt.Kt()},t}();function J(t,i,n,e,r,s){t.fillRect(i+s,n,e-2*s,s),t.fillRect(i+s,n+r-s,e-2*s,s),t.fillRect(i,n,s,r),t.fillRect(i+e-s,n,s,r)}function U(t,i,n){t.save(),t.scale(i,i),n(),t.restore()}function H(t,i,n,e,r,s){t.save(),t.globalCompositeOperation="copy",t.fillStyle=s,t.fillRect(i,n,e,r),t.restore()}function Z(t,i,n,e,r,s,o){t.save(),t.globalCompositeOperation="copy";var h=t.createLinearGradient(0,0,0,r);h.addColorStop(0,s),h.addColorStop(1,o),t.fillStyle=h,t.fillRect(i,n,e,r),t.restore()}var Q,K=function(){function t(t,i){this.Z(t,i)}return t.prototype.Z=function(t,i){this.At=t,this.Xt=i},t.prototype.H=function(t,i,n,e,r,s){if(this.At.yt){t.font=i.T;var o=this.At.Zt||!this.At.Jt?i.C:0,h=i.N,u=i.O,a=i.A,l=i.L,f=i.F,c=this.At.Gt,p=Math.ceil(n.Qt(t,c)),v=i.V,d=i.S+u+a,y=Math.ceil(.5*d),w=h+p+l+f+o,g=this.Xt.ti;this.Xt.ii&&(g=this.Xt.ii);var M,m,_=(g=Math.round(g))-y,b=_+d,S="right"===r,C=S?e:0,x=Math.ceil(e*s),A=C;if(t.fillStyle=this.Xt.t,t.lineWidth=1,t.lineCap="butt",c){S?(M=C-o,m=(A=C-w)+f):(A=C+w,M=C+o,m=C+h+o+l);var T=Math.max(1,Math.floor(s)),z=Math.max(1,Math.floor(h*s)),k=S?x:0,E=Math.round(_*s),L=Math.round(A*s),O=Math.round(g*s)-Math.floor(.5*s),D=O+T+(O-E),N=Math.round(M*s);t.save(),t.beginPath(),t.moveTo(k,E),t.lineTo(L,E),t.lineTo(L,D),t.lineTo(k,D),t.fill(),t.fillStyle=this.At.Tt,t.fillRect(S?x-z:0,E,z,D-E),this.At.Zt&&(t.fillStyle=this.Xt.B,t.fillRect(k,O,N-k,T)),t.textAlign="left",t.fillStyle=this.Xt.B,U(t,s,(function(){t.fillText(c,m,b-a-v)})),t.restore()}}},t.prototype.Yt=function(t,i){return this.At.yt?t.S+t.O+t.A:0},t}(),$=function(){function t(t){this.ni={ti:0,B:"#FFF",t:"#000"},this.si={Gt:"",yt:!1,Zt:!0,Jt:!1,Tt:""},this.hi={Gt:"",yt:!1,Zt:!1,Jt:!0,Tt:""},this.ft=!0,this.ri=new(t||K)(this.si,this.ni),this.ei=new(t||K)(this.hi,this.ni)}return t.prototype.Gt=function(){return this.ui(),this.si.Gt},t.prototype.ti=function(){return this.ui(),this.ni.ti},t.prototype.vt=function(){this.ft=!0},t.prototype.Yt=function(t,i){return void 0===i&&(i=!1),Math.max(this.ri.Yt(t,i),this.ei.Yt(t,i))},t.prototype.ai=function(){return this.ni.ii||0},t.prototype.oi=function(t){this.ni.ii=t},t.prototype.li=function(){return this.ui(),this.si.yt||this.hi.yt},t.prototype.fi=function(){return this.ui(),this.si.yt},t.prototype.dt=function(t){return this.ui(),this.si.Zt=this.si.Zt&&t.W().drawTicks,this.hi.Zt=this.hi.Zt&&t.W().drawTicks,this.ri.Z(this.si,this.ni),this.ei.Z(this.hi,this.ni),this.ri},t.prototype.ci=function(){return this.ui(),this.ri.Z(this.si,this.ni),this.ei.Z(this.hi,this.ni),this.ei},t.prototype.ui=function(){this.ft&&(this.si.Zt=!0,this.hi.Zt=!1,this.vi(this.si,this.hi,this.ni))},t}(),tt=function(t){function i(i,n,e){var r=t.call(this)||this;return r.Pt=i,r._i=n,r.di=e,r}return C(i,t),i.prototype.vi=function(t,i,n){t.yt=!1;var e=this.Pt.W().horzLine;if(e.labelVisible){var r=this._i.kt();if(this.Pt.yt()&&!this._i.wi()&&null!==r){var s=b(e.labelBackgroundColor);n.t=s.t,n.B=s.i;var o=this.di(this._i);n.ti=o.ti,t.Gt=this._i.Mi(o.et,r),t.yt=!0}}},i}($),it=/[1-9]/g,nt=function(){function t(){this.At=null}return t.prototype.Z=function(t){this.At=t},t.prototype.H=function(t,i,n){var e=this;if(null!==this.At&&!1!==this.At.yt&&0!==this.At.Gt.length){t.font=i.T;var r=Math.round(i.bi.Qt(t,this.At.Gt,it));if(!(r<=0)){t.save();var s=i.mi,o=r+2*s,h=o/2,u=this.At.Ht,a=this.At.ti,l=Math.floor(a-h)+.5;l<0?(a+=Math.abs(0-l),l=Math.floor(a-h)+.5):l+o>u&&(a-=Math.abs(u-(l+o)),l=Math.floor(a-h)+.5);var f=l+o,p=0+i.N+i.O+i.S+i.A;t.fillStyle=this.At.t;var v=Math.round(l*n),d=Math.round(0*n),y=Math.round(f*n),w=Math.round(p*n);t.fillRect(v,d,y-v,w-d);var g=Math.round(this.At.ti*n),M=d,m=Math.round((M+i.N+i.C)*n);t.fillStyle=this.At.B;var _=Math.max(1,Math.floor(n)),b=Math.floor(.5*n);t.fillRect(g-b,M,_,m-M);var S=p-i.V-i.A;t.textAlign="left",t.fillStyle=this.At.B,U(t,n,(function(){t.fillText(c(e.At).Gt,l+s,S)})),t.restore()}}},t}(),et=function(){function t(t,i,n){this.ft=!0,this.zt=new nt,this.Wt={yt:!1,t:"#4c525e",B:"white",Gt:"",Ht:0,ti:NaN},this.ct=t,this.gi=i,this.di=n}return t.prototype.vt=function(){this.ft=!0},t.prototype.dt=function(){return this.ft&&(this.wt(),this.ft=!1),this.zt.Z(this.Wt),this.zt},t.prototype.wt=function(){var t=this.Wt;t.yt=!1;var i=this.ct.W().vertLine;if(i.labelVisible){var n=this.gi.bt();if(!n.wi()){t.Ht=n.Ht();var e=this.di();if(e.rt){t.ti=e.ti;var r=n.pi(this.ct.Mt());t.Gt=n.yi(c(r)),t.yt=!0;var s=b(i.labelBackgroundColor);t.t=s.t,t.B=s.i}}}},t}(),rt=function(){function t(){this.ki=null,this.Ni=0}return t.prototype.xi=function(){return this.Ni},t.prototype.Ci=function(t){this.Ni=t},t.prototype.Ct=function(){return this.ki},t.prototype.Si=function(t){this.ki=t},t.prototype.Ti=function(){return[]},t.prototype.yt=function(){return!0},t}();!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet"}(Q||(Q={}));var st=function(t){function i(i,n){var e,r,s=t.call(this)||this;s.Di=null,s.Bi=NaN,s.Ai=0,s.Li=!0,s.Ei=new Map,s.Fi=!1,s.Oi=NaN,s.Vi=NaN,s.Ri=NaN,s.Wi=NaN,s.gi=i,s.zi=n,s.Pi=new G(i,s),s.Ii=(e=function(){return s.Bi},r=function(){return s.Vi},function(t){var i=r(),n=e();if(t===c(s.Di).ji())return{et:n,ti:i};var o=c(t.kt());return{et:t.qi(i,o),ti:i}});var o=function(){return{rt:s.gi.bt().Ui(s.Ai),ti:s.$t()}};return s.Hi=new et(s,i,o),s.Yi=new q(s),s}return C(i,t),i.prototype.W=function(){return this.zi},i.prototype.$i=function(t,i){this.Ri=t,this.Wi=i},i.prototype.Ki=function(){this.Ri=NaN,this.Wi=NaN},i.prototype.Xi=function(){return this.Ri},i.prototype.Zi=function(){return this.Wi},i.prototype.Ji=function(t,i,n){this.Fi||(this.Fi=!0),this.Li=!0,this.Gi(t,i,n)},i.prototype.Mt=function(){return this.Ai},i.prototype.$t=function(){return this.Oi},i.prototype.Kt=function(){return this.Vi},i.prototype.yt=function(){return this.Li},i.prototype.Qi=function(){this.Li=!1,this.tn(),this.Bi=NaN,this.Oi=NaN,this.Vi=NaN,this.Di=null,this.Ki()},i.prototype.nn=function(t){return null!==this.Di?[this.Yi,this.Pi]:[]},i.prototype.qt=function(t){return t===this.Di&&this.zi.horzLine.visible},i.prototype.Ut=function(){return this.zi.vertLine.visible},i.prototype.sn=function(t,i){this.Li&&this.Di===t||this.Ei.clear();var n=[];return this.Di===t&&n.push(this.hn(this.Ei,i,this.Ii)),n},i.prototype.Ti=function(){return this.Li?[this.Hi]:[]},i.prototype.It=function(){return this.Di},i.prototype.rn=function(){this.Yi.vt(),this.Ei.forEach((function(t){return t.vt()})),this.Hi.vt(),this.Pi.vt()},i.prototype.en=function(t){return t&&!t.ji().wi()?t.ji():null},i.prototype.Gi=function(t,i,n){this.un(t,i,n)&&this.rn()},i.prototype.un=function(t,i,n){var e=this.Oi,r=this.Vi,s=this.Bi,o=this.Ai,h=this.Di,u=this.en(n);this.Ai=t,this.Oi=isNaN(t)?NaN:this.gi.bt().Bt(t),this.Di=n;var a=null!==u?u.kt():null;return null!==u&&null!==a?(this.Bi=i,this.Vi=u.xt(i,a)):(this.Bi=NaN,this.Vi=NaN),e!==this.Oi||r!==this.Vi||o!==this.Ai||s!==this.Bi||h!==this.Di},i.prototype.tn=function(){var t=this.gi._t().map((function(t){return t.on().an()})).filter(N),i=0===t.length?null:Math.max.apply(Math,t);this.Ai=null!==i?i:NaN},i.prototype.hn=function(t,i,n){var e=t.get(i);return void 0===e&&(e=new tt(this,i,n),t.set(i,e)),e},i}(rt);function ot(t){return"left"===t||"right"===t}var ht=function(){function t(t){this.ln=new Map,this.fn=[],this.cn=t}return t.prototype.vn=function(t,i){var n=function(t,i){return void 0===t?i:{_n:Math.max(t._n,i._n),dn:t.dn||i.dn}}(this.ln.get(t),i);this.ln.set(t,n)},t.prototype.wn=function(){return this.cn},t.prototype.Mn=function(t){var i=this.ln.get(t);return void 0===i?{_n:this.cn}:{_n:Math.max(this.cn,i._n),dn:i.dn}},t.prototype.bn=function(){this.fn=[{mn:0}]},t.prototype.gn=function(t){this.fn=[{mn:1,St:t}]},t.prototype.pn=function(){this.fn=[{mn:4}]},t.prototype.yn=function(t){this.fn.push({mn:2,St:t})},t.prototype.kn=function(t){this.fn.push({mn:3,St:t})},t.prototype.Nn=function(){return this.fn},t.prototype.xn=function(t){for(var i=this,n=0,e=t.fn;n<e.length;n++){var r=e[n];this.Cn(r)}this.cn=Math.max(this.cn,t.cn),t.ln.forEach((function(t,n){i.vn(n,t)}))},t.prototype.Cn=function(t){switch(t.mn){case 0:this.bn();break;case 1:this.gn(t.St);break;case 2:this.yn(t.St);break;case 3:this.kn(t.St);break;case 4:this.pn()}},t}();function ut(t,i){if(!k(t))return"n/a";if(!E(i))throw new TypeError("invalid length");if(i<0||i>16)throw new TypeError("invalid length");return 0===i?t.toString():("0000000000000000"+t.toString()).slice(-i)}var at=function(){function t(t,i){if(i||(i=1),k(t)&&E(t)||(t=100),t<0)throw new TypeError("invalid base");this._i=t,this.Sn=i,this.Tn()}return t.prototype.format=function(t){var i=t<0?"\u2212":"";return t=Math.abs(t),i+this.Dn(t)},t.prototype.Tn=function(){if(this.Bn=0,this._i>0&&this.Sn>0)for(var t=this._i;t>1;)t/=10,this.Bn++},t.prototype.Dn=function(t){var i=this._i/this.Sn,n=Math.floor(t),e="",r=void 0!==this.Bn?this.Bn:NaN;if(i>1){var s=+(Math.round(t*i)-n*i).toFixed(this.Bn);s>=i&&(s-=i,n+=1),e="."+ut(+s.toFixed(this.Bn)*this.Sn,r)}else n=Math.round(n*i)/i,r>0&&(e="."+ut(0,r));return n.toFixed(0)+e},t}(),lt=function(t){function i(i){return void 0===i&&(i=100),t.call(this,i)||this}return C(i,t),i.prototype.format=function(i){return"".concat(t.prototype.format.call(this,i),"%")},i}(at),ft=function(){function t(t){this.An=t}return t.prototype.format=function(t){var i="";return t<0&&(i="-",t=-t),t<995?i+this.Ln(t):t<999995?i+this.Ln(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),i+this.Ln(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),i+this.Ln(t/1e9)+"B")},t.prototype.Ln=function(t){var i=Math.pow(10,this.An);return((t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.An).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(function(t,i){return i}))},t}();function ct(t,i,n,e){if(0!==i.length){var r=i[e.from].tt,s=i[e.from].it;t.moveTo(r,s);for(var o=e.from+1;o<e.to;++o){var h=i[o];if(1===n){var u=i[o-1].it,a=h.tt;t.lineTo(a,u)}t.lineTo(h.tt,h.it)}}}var pt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.X=null,i}return C(i,t),i.prototype.Z=function(t){this.X=t},i.prototype.Y=function(t){if(null!==this.X&&0!==this.X.G.length&&null!==this.X.J){if(t.lineCap="butt",t.lineJoin="round",t.lineWidth=this.X.Vt,u(t,this.X.Rt),t.lineWidth=1,t.beginPath(),1===this.X.G.length){var i=this.X.G[0],n=this.X.En/2;t.moveTo(i.tt-n,this.X.Fn),t.lineTo(i.tt-n,i.it),t.lineTo(i.tt+n,i.it),t.lineTo(i.tt+n,this.X.Fn)}else t.moveTo(this.X.G[this.X.J.from].tt,this.X.Fn),t.lineTo(this.X.G[this.X.J.from].tt,this.X.G[this.X.J.from].it),ct(t,this.X.G,this.X.On,this.X.J),this.X.J.to>this.X.J.from&&(t.lineTo(this.X.G[this.X.J.to-1].tt,this.X.Fn),t.lineTo(this.X.G[this.X.J.from].tt,this.X.Fn));t.closePath(),t.fillStyle=this.Vn(t),t.fill()}},i}(P),vt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return C(i,t),i.prototype.Vn=function(t){var i=this.X,n=t.createLinearGradient(0,0,0,i.Rn);return n.addColorStop(0,i.Wn),n.addColorStop(1,i.zn),n},i}(pt),dt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.X=null,i}return C(i,t),i.prototype.Z=function(t){this.X=t},i.prototype.Y=function(t){if(null!==this.X&&0!==this.X.G.length&&null!==this.X.J)if(t.lineCap="butt",t.lineWidth=this.X.Vt,u(t,this.X.Rt),t.strokeStyle=this.Pn(t),t.lineJoin="round",1===this.X.G.length){t.beginPath();var i=this.X.G[0];t.moveTo(i.tt-this.X.En/2,i.it),t.lineTo(i.tt+this.X.En/2,i.it),void 0!==i.B&&(t.strokeStyle=i.B),t.stroke()}else this.In(t,this.X)},i.prototype.In=function(t,i){t.beginPath(),ct(t,i.G,i.On,i.J),t.stroke()},i}(P),yt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return C(i,t),i.prototype.In=function(t,i){var n,e,r=i.G,s=i.J,o=i.On,h=i.ht;if(0!==r.length&&null!==s){t.beginPath();var u=r[s.from];t.moveTo(u.tt,u.it);var a=null!==(n=u.B)&&void 0!==n?n:h;t.strokeStyle=a;for(var l=function(i){t.stroke(),t.beginPath(),t.strokeStyle=i,a=i},f=s.from+1;f<s.to;++f){var c=r[f],p=r[f-1],v=null!==(e=c.B)&&void 0!==e?e:h;1===o&&(t.lineTo(c.tt,p.it),v!==a&&(l(v),t.moveTo(c.tt,p.it))),t.lineTo(c.tt,c.it),1!==o&&v!==a&&(l(v),t.moveTo(c.tt,c.it))}t.stroke()}},i.prototype.Pn=function(){return this.X.ht},i}(dt);function wt(t,i,n,e,r){void 0===e&&(e=0),void 0===r&&(r=t.length);for(var s=r-e;0<s;){var o=s>>1,h=e+o;n(t[h],i)?(e=h+1,s-=o+1):s=o}return e}function gt(t,i,n,e,r){void 0===e&&(e=0),void 0===r&&(r=t.length);for(var s=r-e;0<s;){var o=s>>1,h=e+o;n(i,t[h])?s=o:(e=h+1,s-=o+1)}return e}function Mt(t,i){return t.rt<i}function mt(t,i){return t<i.rt}function _t(t,i,n){var e=i.jn(),r=i.qn(),s=wt(t,e,Mt),o=gt(t,r,mt);if(!n)return{from:s,to:o};var h=s,u=o;return s>0&&s<t.length&&t[s].rt>=e&&(h=s-1),o>0&&o<t.length&&t[o-1].rt<=r&&(u=o+1),{from:h,to:u}}var bt=function(){function t(t,i,n){this.Un=!0,this.Hn=!0,this.Yn=!0,this.$n=[],this.Kn=null,this.Xn=t,this.Zn=i,this.Jn=n}return t.prototype.vt=function(t){this.Un=!0,"data"===t&&(this.Hn=!0),"options"===t&&(this.Yn=!0)},t.prototype.Gn=function(){this.Hn&&(this.Qn(),this.Hn=!1),this.Un&&(this.ts(),this.Un=!1),this.Yn&&(this.ns(),this.Yn=!1)},t.prototype.ss=function(){this.Kn=null},t.prototype.ts=function(){var t=this.Xn.Ct(),i=this.Zn.bt();if(this.ss(),!i.wi()&&!t.wi()){var n=i.hs();if(null!==n&&0!==this.Xn.on().rs()){var e=this.Xn.kt();null!==e&&(this.Kn=_t(this.$n,n,this.Jn),this.es(t,i,e.St))}}},t}(),St=function(t){function i(i,n){return t.call(this,i,n,!0)||this}return C(i,t),i.prototype.es=function(t,i,n){i.us(this.$n,W(this.Kn)),t.os(this.$n,n,W(this.Kn))},i.prototype.ls=function(t,i){return{rt:t,et:i,tt:NaN,it:NaN}},i.prototype.ns=function(){},i.prototype.Qn=function(){var t=this,i=this.Xn.fs();this.$n=this.Xn.on().cs().map((function(n){var e=n.St[3];return t.vs(n._s,e,i)}))},i}(bt),Ct=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e.zt=new B,e.ds=new vt,e.ws=new yt,e.zt.U([e.ds,e.ws]),e}return C(i,t),i.prototype.dt=function(t,i){if(!this.Xn.yt())return null;var n=this.Xn.W();return this.Gn(),this.ds.Z({On:n.lineType,G:this.$n,Rt:n.lineStyle,Vt:n.lineWidth,Wn:n.topColor,zn:n.bottomColor,Fn:t,Rn:t,J:this.Kn,En:this.Zn.bt().Ms()}),this.ws.Z({On:n.lineType,G:this.$n,ht:n.lineColor,Rt:n.lineStyle,Vt:n.lineWidth,J:this.Kn,En:this.Zn.bt().Ms()}),this.zt},i.prototype.vs=function(t,i){return this.ls(t,i)},i}(St),xt=function(){function t(){this.At=null,this.bs=0,this.gs=0}return t.prototype.Z=function(t){this.At=t},t.prototype.H=function(t,i,n,e){if(null!==this.At&&0!==this.At.on.length&&null!==this.At.J){this.bs=this.ps(i),this.bs>=2&&Math.max(1,Math.floor(i))%2!=this.bs%2&&this.bs--,this.gs=this.At.ys?Math.min(this.bs,Math.floor(i)):this.bs;for(var r=null,s=this.gs<=this.bs&&this.At.Ms>=Math.floor(1.5*i),o=this.At.J.from;o<this.At.J.to;++o){var h=this.At.on[o];r!==h.B&&(t.fillStyle=h.B,r=h.B);var u=Math.floor(.5*this.gs),a=Math.round(h.tt*i),l=a-u,f=this.gs,c=l+f-1,p=Math.min(h.ks,h.Ns),v=Math.max(h.ks,h.Ns),d=Math.round(p*i)-u,y=Math.round(v*i)+u,w=Math.max(y-d,this.gs);t.fillRect(l,d,f,w);var g=Math.ceil(1.5*this.bs);if(s){if(this.At.xs){var M=a-g,m=Math.max(d,Math.round(h.Cs*i)-u),_=m+f-1;_>d+w-1&&(m=(_=d+w-1)-f+1),t.fillRect(M,m,l-M,_-m+1)}var b=a+g,S=Math.max(d,Math.round(h.Ss*i)-u),C=S+f-1;C>d+w-1&&(S=(C=d+w-1)-f+1),t.fillRect(c+1,S,b-c,C-S+1)}}}},t.prototype.ps=function(t){var i=Math.floor(t);return Math.max(i,Math.floor(function(t,i){return Math.floor(.3*t*i)}(c(this.At).Ms,t)))},t}(),At=function(t){function i(i,n){return t.call(this,i,n,!1)||this}return C(i,t),i.prototype.es=function(t,i,n){i.us(this.$n,W(this.Kn)),t.Ts(this.$n,n,W(this.Kn))},i.prototype.Ds=function(t,i,n){return{rt:t,Bs:i.St[0],As:i.St[1],Ls:i.St[2],Es:i.St[3],tt:NaN,Cs:NaN,ks:NaN,Ns:NaN,Ss:NaN}},i.prototype.Qn=function(){var t=this,i=this.Xn.fs();this.$n=this.Xn.on().cs().map((function(n){return t.vs(n._s,n,i)}))},i}(bt),Tt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.zt=new xt,i}return C(i,t),i.prototype.dt=function(t,i){if(!this.Xn.yt())return null;var n=this.Xn.W();this.Gn();var e={on:this.$n,Ms:this.Zn.bt().Ms(),xs:n.openVisible,ys:n.thinBars,J:this.Kn};return this.zt.Z(e),this.zt},i.prototype.ns=function(){var t=this;this.$n.forEach((function(i){i.B=t.Xn.fs().Os(i.rt).Fs}))},i.prototype.vs=function(t,i,n){return x(x({},this.Ds(t,i,n)),{B:n.Os(t).Fs})},i}(At);function zt(t,i,n){return Math.min(Math.max(t,i),n)}function kt(t,i,n){return i-t<=n}function Et(t){return t<=0?NaN:Math.log(t)/Math.log(10)}function Lt(t){var i=Math.ceil(t);return i%2!=0?i-1:i}function Ot(t){var i=Math.ceil(t);return i%2==0?i-1:i}var Dt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return C(i,t),i.prototype.Vn=function(t){var i=this.X,n=t.createLinearGradient(0,0,0,i.Rn),e=zt(i.Fn/i.Rn,0,1);return n.addColorStop(0,i.Vs),n.addColorStop(e,i.Rs),n.addColorStop(e,i.Ws),n.addColorStop(1,i.zs),n},i}(pt),Nt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return C(i,t),i.prototype.Pn=function(t){var i=this.X,n=t.createLinearGradient(0,0,0,i.Rn),e=zt(i.Fn/i.Rn,0,1);return n.addColorStop(0,i.Wn),n.addColorStop(e,i.Wn),n.addColorStop(e,i.zn),n.addColorStop(1,i.zn),n},i}(dt),Wt=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e.Ps=new Dt,e.Is=new Nt,e.ut=new B,e.ut.U([e.Ps,e.Is]),e}return C(i,t),i.prototype.dt=function(t,i){if(!this.Xn.yt())return null;var n=this.Xn.kt();if(null===n)return null;var e=this.Xn.W();this.Gn();var r=this.Xn.Ct().xt(e.baseValue.price,n.St),s=this.Zn.bt().Ms();return this.Ps.Z({G:this.$n,Vs:e.topFillColor1,Rs:e.topFillColor2,Ws:e.bottomFillColor1,zs:e.bottomFillColor2,Vt:e.lineWidth,Rt:e.lineStyle,On:0,Fn:r,Rn:t,J:this.Kn,En:s}),this.Is.Z({G:this.$n,Wn:e.topLineColor,zn:e.bottomLineColor,Vt:e.lineWidth,Rt:e.lineStyle,On:0,Fn:r,Rn:t,J:this.Kn,En:s}),this.ut},i.prototype.vs=function(t,i){return this.ls(t,i)},i}(St),Rt=function(){function t(){this.At=null,this.bs=0}return t.prototype.Z=function(t){this.At=t},t.prototype.H=function(t,i,n,e){if(null!==this.At&&0!==this.At.on.length&&null!==this.At.J){this.bs=function(t,i){if(t>=2.5&&t<=4)return Math.floor(3*i);var n=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),e=Math.floor(t*n*i),r=Math.floor(t*i),s=Math.min(e,r);return Math.max(Math.floor(i),s)}(this.At.Ms,i),this.bs>=2&&Math.floor(i)%2!=this.bs%2&&this.bs--;var r=this.At.on;this.At.js&&this.qs(t,r,this.At.J,i),this.At.Us&&this.Hs(t,r,this.At.J,this.At.Ms,i);var s=this.Ys(i);(!this.At.Us||this.bs>2*s)&&this.$s(t,r,this.At.J,i)}},t.prototype.qs=function(t,i,n,e){if(null!==this.At){var r="",s=Math.min(Math.floor(e),Math.floor(this.At.Ms*e));s=Math.max(Math.floor(e),Math.min(s,this.bs));for(var o=Math.floor(.5*s),h=null,u=n.from;u<n.to;u++){var a=i[u];a.Ks!==r&&(t.fillStyle=a.Ks,r=a.Ks);var l=Math.round(Math.min(a.Cs,a.Ss)*e),f=Math.round(Math.max(a.Cs,a.Ss)*e),c=Math.round(a.ks*e),p=Math.round(a.Ns*e),v=Math.round(e*a.tt)-o,d=v+s-1;null!==h&&(v=Math.max(h+1,v),v=Math.min(v,d));var y=d-v+1;t.fillRect(v,c,y,l-c),t.fillRect(v,f+1,y,p-f),h=d}}},t.prototype.Ys=function(t){var i=Math.floor(1*t);this.bs<=2*i&&(i=Math.floor(.5*(this.bs-1)));var n=Math.max(Math.floor(t),i);return this.bs<=2*n?Math.max(Math.floor(t),Math.floor(1*t)):n},t.prototype.Hs=function(t,i,n,e,r){if(null!==this.At)for(var s="",o=this.Ys(r),h=null,u=n.from;u<n.to;u++){var a=i[u];a.Tt!==s&&(t.fillStyle=a.Tt,s=a.Tt);var l=Math.round(a.tt*r)-Math.floor(.5*this.bs),f=l+this.bs-1,c=Math.round(Math.min(a.Cs,a.Ss)*r),p=Math.round(Math.max(a.Cs,a.Ss)*r);if(null!==h&&(l=Math.max(h+1,l),l=Math.min(l,f)),this.At.Ms*r>2*o)J(t,l,c,f-l+1,p-c+1,o);else{var v=f-l+1;t.fillRect(l,c,v,p-c+1)}h=f}},t.prototype.$s=function(t,i,n,e){if(null!==this.At)for(var r="",s=this.Ys(e),o=n.from;o<n.to;o++){var h=i[o],u=Math.round(Math.min(h.Cs,h.Ss)*e),a=Math.round(Math.max(h.Cs,h.Ss)*e),l=Math.round(h.tt*e)-Math.floor(.5*this.bs),f=l+this.bs-1;if(h.B!==r){var c=h.B;t.fillStyle=c,r=c}this.At.Us&&(l+=s,u+=s,f-=s,a-=s),u>a||t.fillRect(l,u,f-l+1,a-u+1)}},t}(),jt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.zt=new Rt,i}return C(i,t),i.prototype.dt=function(t,i){if(!this.Xn.yt())return null;var n=this.Xn.W();this.Gn();var e={on:this.$n,Ms:this.Zn.bt().Ms(),js:n.wickVisible,Us:n.borderVisible,J:this.Kn};return this.zt.Z(e),this.zt},i.prototype.ns=function(){var t=this;this.$n.forEach((function(i){var n=t.Xn.fs().Os(i.rt);i.B=n.Fs,i.Ks=n.Xs,i.Tt=n.Zs}))},i.prototype.vs=function(t,i,n){var e=n.Os(t);return x(x({},this.Ds(t,i,n)),{B:e.Fs,Ks:e.Xs,Tt:e.Zs})},i}(At),Ft=function(){function t(){this.At=null,this.Js=[]}return t.prototype.Z=function(t){this.At=t,this.Js=[]},t.prototype.H=function(t,i,n,e){if(null!==this.At&&0!==this.At.G.length&&null!==this.At.J){this.Js.length||this.Gs(i);for(var r=Math.max(1,Math.floor(i)),s=Math.round(this.At.Qs*i)-Math.floor(r/2),o=s+r,h=this.At.J.from;h<this.At.J.to;h++){var u=this.At.G[h],a=this.Js[h-this.At.J.from],l=Math.round(u.it*i);t.fillStyle=u.B;var f=void 0,c=void 0;l<=s?(f=l,c=o):(f=s,c=l-Math.floor(r/2)+r),t.fillRect(a.jn,f,a.qn-a.jn+1,c-f)}}},t.prototype.Gs=function(t){if(null!==this.At&&0!==this.At.G.length&&null!==this.At.J){var i=Math.ceil(this.At.Ms*t)<=1?0:Math.max(1,Math.floor(t)),n=Math.round(this.At.Ms*t)-i;this.Js=new Array(this.At.J.to-this.At.J.from);for(var e=this.At.J.from;e<this.At.J.to;e++){var r,s=this.At.G[e],o=Math.round(s.tt*t),h=void 0,u=void 0;n%2?(h=o-(r=(n-1)/2),u=o+r):(h=o-(r=n/2),u=o+r-1),this.Js[e-this.At.J.from]={jn:h,qn:u,th:o,ih:s.tt*t,rt:s.rt}}for(e=this.At.J.from+1;e<this.At.J.to;e++){var a=this.Js[e-this.At.J.from],l=this.Js[e-this.At.J.from-1];a.rt===l.rt+1&&a.jn-l.qn!==i+1&&(l.th>l.ih?l.qn=a.jn-i-1:a.jn=l.qn+i+1)}var f=Math.ceil(this.At.Ms*t);for(e=this.At.J.from;e<this.At.J.to;e++){(a=this.Js[e-this.At.J.from]).qn<a.jn&&(a.qn=a.jn);var c=a.qn-a.jn+1;f=Math.min(c,f)}if(i>0&&f<4)for(e=this.At.J.from;e<this.At.J.to;e++)(c=(a=this.Js[e-this.At.J.from]).qn-a.jn+1)>f&&(a.th>a.ih?a.qn-=1:a.jn+=1)}else this.Js=[]},t}();function Bt(t){return{G:[],Ms:t,Qs:NaN,J:null}}function Pt(t,i,n){return{rt:t,et:i,tt:NaN,it:NaN,B:n}}var It=function(t){function i(i,n){var e=t.call(this,i,n,!1)||this;return e.ut=new B,e.nh=Bt(0),e.zt=new Ft,e}return C(i,t),i.prototype.dt=function(t,i){return this.Xn.yt()?(this.Gn(),this.ut):null},i.prototype.Qn=function(){var t=this.Zn.bt().Ms();this.nh=Bt(t);for(var i=0,n=0,e=this.Xn.W().color,r=0,s=this.Xn.on().cs();r<s.length;r++){var o=s[r],h=o.St[3],u=void 0!==o.B?o.B:e,a=Pt(o._s,h,u);++i<this.nh.G.length?this.nh.G[i]=a:this.nh.G.push(a),this.$n[n++]={rt:o._s,tt:0}}this.zt.Z(this.nh),this.ut.U([this.zt])},i.prototype.ns=function(){},i.prototype.ss=function(){t.prototype.ss.call(this),this.nh.J=null},i.prototype.es=function(t,i,n){if(null!==this.Kn){var e=i.Ms(),r=c(i.hs()),s=t.xt(this.Xn.W().base,n);i.us(this.nh.G),t.os(this.nh.G,n),this.nh.Qs=s,this.nh.J=_t(this.nh.G,r,!1),this.nh.Ms=e,this.zt.Z(this.nh)}},i}(bt),Xt=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e.ws=new yt,e}return C(i,t),i.prototype.dt=function(t,i){if(!this.Xn.yt())return null;var n=this.Xn.W();this.Gn();var e={G:this.$n,ht:n.color,Rt:n.lineStyle,On:n.lineType,Vt:n.lineWidth,J:this.Kn,En:this.Zn.bt().Ms()};return this.ws.Z(e),this.ws},i.prototype.ns=function(){var t=this;this.$n.forEach((function(i){i.B=t.Xn.fs().Os(i.rt).Fs}))},i.prototype.vs=function(t,i,n){var e=this.ls(t,i);return e.B=n.Os(t).Fs,e},i}(St),Vt=/[2-9]/g,Gt=function(){function t(t){void 0===t&&(t=50),this.sh=new Map,this.hh=0,this.rh=Array.from(new Array(t))}return t.prototype.eh=function(){this.sh.clear(),this.rh.fill(void 0)},t.prototype.Qt=function(t,i,n){var e=n||Vt,r=String(i).replace(e,"0"),s=this.sh.get(r);if(void 0===s){if(0===(s=t.measureText(r).width)&&0!==i.length)return 0;var o=this.rh[this.hh];void 0!==o&&this.sh.delete(o),this.rh[this.hh]=r,this.hh=(this.hh+1)%this.rh.length,this.sh.set(r,s)}return s},t}(),Yt=function(){function t(t){this.uh=null,this.k=null,this.ah="right",this.oh=0,this.lh=t}return t.prototype.fh=function(t,i,n,e){this.uh=t,this.k=i,this.oh=n,this.ah=e},t.prototype.H=function(t,i){null!==this.k&&null!==this.uh&&this.uh.H(t,this.k,this.lh,this.oh,this.ah,i)},t}(),qt=function(){function t(t,i,n){this._h=t,this.lh=new Gt(50),this.dh=i,this.R=n,this.P=-1,this.zt=new Yt(this.lh)}return t.prototype.dt=function(t,i){var n=this.R.wh(this.dh);if(null===n)return null;var e=n.Mh(this.dh)?n.bh():this.dh.Ct();if(null===e)return null;var r=n.mh(e);if("overlay"===r)return null;var s=this.R.gh();return s.S!==this.P&&(this.P=s.S,this.lh.eh()),this.zt.fh(this._h.ci(),s,i,r),this.zt},t}(),Jt=function(){function t(){this.At=null}return t.prototype.Z=function(t){this.At=t},t.prototype.H=function(t,i,n,e){if(null!==this.At&&!1!==this.At.yt){var r=Math.round(this.At.it*i);if(!(r<0||r>Math.ceil(this.At.Yt*i))){var s=Math.ceil(this.At.Ht*i);t.lineCap="butt",t.strokeStyle=this.At.B,t.lineWidth=Math.floor(this.At.Vt*i),u(t,this.At.Rt),a(t,r,0,s)}}},t}(),Ut=function(){function t(t){this.ph={Ht:0,Yt:0,it:0,B:"rgba(0, 0, 0, 0)",Vt:1,Rt:0,yt:!1},this.yh=new Jt,this.ft=!0,this.Xn=t,this.Zn=t.jt(),this.yh.Z(this.ph)}return t.prototype.vt=function(){this.ft=!0},t.prototype.dt=function(t,i){return this.Xn.yt()?(this.ft&&(this.kh(t,i),this.ft=!1),this.yh):null},t}(),Ht=function(t){function i(i){return t.call(this,i)||this}return C(i,t),i.prototype.kh=function(t,i){this.ph.yt=!1;var n=this.Xn.Ct(),e=n.Nh().Nh;if(2===e||3===e){var r=this.Xn.W();if(r.baseLineVisible&&this.Xn.yt()){var s=this.Xn.kt();null!==s&&(this.ph.yt=!0,this.ph.it=n.xt(s.St,s.St),this.ph.Ht=i,this.ph.Yt=t,this.ph.B=r.baseLineColor,this.ph.Vt=r.baseLineWidth,this.ph.Rt=r.baseLineStyle)}}},i}(Ut),Zt=function(){function t(){this.At=null}return t.prototype.Z=function(t){this.At=t},t.prototype.xh=function(){return this.At},t.prototype.H=function(t,i,n,e){var r=this.At;if(null!==r){t.save();var s=Math.max(1,Math.floor(i)),o=s%2/2,h=Math.round(r.ih.x*i)+o,u=r.ih.y*i;t.fillStyle=r.Ch,t.beginPath();var a=Math.max(2,1.5*r.Sh)*i;t.arc(h,u,a,0,2*Math.PI,!1),t.fill(),t.fillStyle=r.Th,t.beginPath(),t.arc(h,u,r.st*i,0,2*Math.PI,!1),t.fill(),t.lineWidth=s,t.strokeStyle=r.Dh,t.beginPath(),t.arc(h,u,r.st*i+s/2,0,2*Math.PI,!1),t.stroke(),t.restore()}},t}(),Qt=[{Bh:0,Ah:.25,Lh:4,Eh:10,Fh:.25,Oh:0,Vh:.4,Rh:.8},{Bh:.25,Ah:.525,Lh:10,Eh:14,Fh:0,Oh:0,Vh:.8,Rh:0},{Bh:.525,Ah:1,Lh:14,Eh:14,Fh:0,Oh:0,Vh:0,Rh:0}];function Kt(t,i,n,e){return function(t,i){if("transparent"===t)return t;var n=_(t),e=n[3];return"rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", ").concat(i*e,")")}(t,n+(e-n)*i)}function $t(t,i){for(var n,e=t%2600/2600,r=0,s=Qt;r<s.length;r++){var o=s[r];if(e>=o.Bh&&e<=o.Ah){n=o;break}}l(void 0!==n,"Last price animation internal logic error");var h,u,a,f=(e-n.Bh)/(n.Ah-n.Bh);return{Th:Kt(i,f,n.Fh,n.Oh),Dh:Kt(i,f,n.Vh,n.Rh),st:(h=f,u=n.Lh,a=n.Eh,u+(a-u)*h)}}var ti=function(){function t(t){this.zt=new Zt,this.ft=!0,this.Wh=!0,this.zh=performance.now(),this.Ph=this.zh-1,this.Ih=t}return t.prototype.jh=function(){this.Ph=this.zh-1,this.vt()},t.prototype.qh=function(){if(this.vt(),2===this.Ih.W().lastPriceAnimation){var t=performance.now(),i=this.Ph-t;if(i>0)return void(i<650&&(this.Ph+=2600));this.zh=t,this.Ph=t+2600}},t.prototype.vt=function(){this.ft=!0},t.prototype.Uh=function(){this.Wh=!0},t.prototype.yt=function(){return 0!==this.Ih.W().lastPriceAnimation},t.prototype.Hh=function(){switch(this.Ih.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Ph}},t.prototype.dt=function(t,i){return this.ft?(this.wt(t,i),this.ft=!1,this.Wh=!1):this.Wh&&(this.Yh(),this.Wh=!1),this.zt},t.prototype.wt=function(t,i){this.zt.Z(null);var n=this.Ih.jt().bt(),e=n.hs(),r=this.Ih.kt();if(null!==e&&null!==r){var s=this.Ih.$h(!0);if(!s.Kh&&e.Xh(s._s)){var o={x:n.Bt(s._s),y:this.Ih.Ct().xt(s.et,r.St)},h=s.B,u=this.Ih.W().lineWidth,a=$t(this.Zh(),h);this.zt.Z({Ch:h,Sh:u,Th:a.Th,Dh:a.Dh,st:a.st,ih:o})}}},t.prototype.Yh=function(){var t=this.zt.xh();if(null!==t){var i=$t(this.Zh(),t.Ch);t.Th=i.Th,t.Dh=i.Dh,t.st=i.st}},t.prototype.Zh=function(){return this.Hh()?performance.now()-this.zh:2599},t}();function ii(t,i){return Ot(Math.min(Math.max(t,12),30)*i)}function ni(t,i){switch(t){case"arrowDown":case"arrowUp":return ii(i,1);case"circle":return ii(i,.8);case"square":return ii(i,.7)}}function ei(t){return Lt(ii(t,1))}function ri(t){return Math.max(ii(t,.1),3)}function si(t,i,n,e,r){var s=ni("square",n),o=(s-1)/2,h=t-o,u=i-o;return e>=h&&e<=h+s&&r>=u&&r<=u+s}function oi(t,i,n,e,r){var s=(ni("arrowUp",r)-1)/2,o=(Ot(r/2)-1)/2;i.beginPath(),t?(i.moveTo(n-s,e),i.lineTo(n,e-s),i.lineTo(n+s,e),i.lineTo(n+o,e),i.lineTo(n+o,e+s),i.lineTo(n-o,e+s),i.lineTo(n-o,e)):(i.moveTo(n-s,e),i.lineTo(n,e+s),i.lineTo(n+s,e),i.lineTo(n+o,e),i.lineTo(n+o,e-s),i.lineTo(n-o,e-s),i.lineTo(n-o,e)),i.fill()}var hi=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.At=null,i.lh=new Gt,i.P=-1,i.I="",i.Jh="",i}return C(i,t),i.prototype.Z=function(t){this.At=t},i.prototype.fh=function(t,i){this.P===t&&this.I===i||(this.P=t,this.I=i,this.Jh=j(t,i),this.lh.eh())},i.prototype.Gh=function(t,i){if(null===this.At||null===this.At.J)return null;for(var n=this.At.J.from;n<this.At.J.to;n++){var e=this.At.G[n];if(ai(e,t,i))return{Qh:e.tr,ir:e.ir}}return null},i.prototype.Y=function(t,i,n){if(null!==this.At&&null!==this.At.J){t.textBaseline="middle",t.font=this.Jh;for(var e=this.At.J.from;e<this.At.J.to;e++){var r=this.At.G[e];void 0!==r.Gt&&(r.Gt.Ht=this.lh.Qt(t,r.Gt.nr),r.Gt.Yt=this.P),ui(r,t)}}},i}(P);function ui(t,i){i.fillStyle=t.B,void 0!==t.Gt&&function(t,i,n,e){t.fillText(i,n,e)}(i,t.Gt.nr,t.tt-t.Gt.Ht/2,t.Gt.it),function(t,i){if(0!==t.rs){switch(t.sr){case"arrowDown":return void oi(!1,i,t.tt,t.it,t.rs);case"arrowUp":return void oi(!0,i,t.tt,t.it,t.rs);case"circle":return void function(t,i,n,e){var r=(ni("circle",e)-1)/2;t.beginPath(),t.arc(i,n,r,0,2*Math.PI,!1),t.fill()}(i,t.tt,t.it,t.rs);case"square":return void function(t,i,n,e){var r=ni("square",e),s=(r-1)/2,o=i-s,h=n-s;t.fillRect(o,h,r,r)}(i,t.tt,t.it,t.rs)}t.sr}}(t,i)}function ai(t,i,n){return!(void 0===t.Gt||!function(t,i,n,e,r,s){var o=e/2;return r>=t&&r<=t+n&&s>=i-o&&s<=i+o}(t.tt,t.Gt.it,t.Gt.Ht,t.Gt.Yt,i,n))||function(t,i,n){if(0===t.rs)return!1;switch(t.sr){case"arrowDown":case"arrowUp":return function(t,i,n,e,r,s){return si(i,n,e,r,s)}(0,t.tt,t.it,t.rs,i,n);case"circle":return function(t,i,n,e,r){var s=2+ni("circle",n)/2,o=t-e,h=i-r;return Math.sqrt(o*o+h*h)<=s}(t.tt,t.it,t.rs,i,n);case"square":return si(t.tt,t.it,t.rs,i,n)}}(t,i,n)}function li(t,i,n,e,r,s,o,h,u){var a=k(n)?n:n.Es,l=k(n)?n:n.As,f=k(n)?n:n.Ls,c=k(i.size)?Math.max(i.size,0):1,p=ei(h.Ms())*c,v=p/2;switch(t.rs=p,i.position){case"inBar":return t.it=o.xt(a,u),void(void 0!==t.Gt&&(t.Gt.it=t.it+v+s+.6*r));case"aboveBar":return t.it=o.xt(l,u)-v-e.hr,void 0!==t.Gt&&(t.Gt.it=t.it-v-.6*r,e.hr+=1.2*r),void(e.hr+=p+s);case"belowBar":return t.it=o.xt(f,u)+v+e.rr,void 0!==t.Gt&&(t.Gt.it=t.it+v+s+.6*r,e.rr+=1.2*r),void(e.rr+=p+s)}i.position}var fi,ci=function(){function t(t,i){this.ft=!0,this.er=!0,this.ur=!0,this.ar=null,this.zt=new hi,this.Ih=t,this.gi=i,this.At={G:[],J:null}}return t.prototype.vt=function(t){this.ft=!0,this.ur=!0,"data"===t&&(this.er=!0)},t.prototype.dt=function(t,i,n){if(!this.Ih.yt())return null;this.ft&&this.Gn();var e=this.gi.W().layout;return this.zt.fh(e.fontSize,e.fontFamily),this.zt.Z(this.At),this.zt},t.prototype.lr=function(){if(this.ur){if(this.Ih.cr().length>0){var t=this.gi.bt().Ms(),i=ri(t),n=1.5*ei(t)+2*i;this.ar={above:n,below:n}}else this.ar=null;this.ur=!1}return this.ar},t.prototype.Gn=function(){var t=this.Ih.Ct(),i=this.gi.bt(),n=this.Ih.cr();this.er&&(this.At.G=n.map((function(t){return{rt:t.time,tt:0,it:0,rs:0,sr:t.shape,B:t.color,tr:t.internalId,ir:t.id,Gt:void 0}})),this.er=!1);var e=this.gi.W().layout;this.At.J=null;var r=i.hs();if(null!==r){var s=this.Ih.kt();if(null!==s&&0!==this.At.G.length){var o=NaN,h=ri(i.Ms()),u={hr:h,rr:h};this.At.J=_t(this.At.G,r,!0);for(var a=this.At.J.from;a<this.At.J.to;a++){var l=n[a];l.time!==o&&(u.hr=h,u.rr=h,o=l.time);var f=this.At.G[a];f.tt=i.Bt(l.time),void 0!==l.text&&l.text.length>0&&(f.Gt={nr:l.text,it:0,Ht:0,Yt:0});var c=this.Ih.vr(l.time);null!==c&&li(f,l,c,u,e.fontSize,h,t,i,s.St)}this.ft=!1}}},t}(),pi=function(t){function i(i){return t.call(this,i)||this}return C(i,t),i.prototype.kh=function(t,i){var n=this.ph;n.yt=!1;var e=this.Xn.W();if(e.priceLineVisible&&this.Xn.yt()){var r=this.Xn.$h(0===e.priceLineSource);r.Kh||(n.yt=!0,n.it=r.ti,n.B=this.Xn._r(r.B),n.Ht=i,n.Yt=t,n.Vt=e.priceLineWidth,n.Rt=e.priceLineStyle)}},i}(Ut),vi=function(t){function i(i){var n=t.call(this)||this;return n.Pt=i,n}return C(i,t),i.prototype.vi=function(t,i,n){t.yt=!1,i.yt=!1;var e=this.Pt;if(e.yt()){var r=e.W(),s=r.lastValueVisible,o=""!==e.dr(),h=0===r.seriesLastValueMode,u=e.$h(!1);if(!u.Kh){s&&(t.Gt=this.wr(u,s,h),t.yt=0!==t.Gt.length),(o||h)&&(i.Gt=this.Mr(u,s,o,h),i.yt=i.Gt.length>0);var a=e._r(u.B),l=b(a);n.t=l.t,n.B=l.i,n.ti=u.ti,i.Tt=e.jt().Dt(u.ti/e.Ct().Yt()),t.Tt=a}}},i.prototype.Mr=function(t,i,n,e){var r="",s=this.Pt.dr();return n&&0!==s.length&&(r+="".concat(s," ")),i&&e&&(r+=this.Pt.Ct().br()?t.mr:t.gr),r.trim()},i.prototype.wr=function(t,i,n){return i?n?this.Pt.Ct().br()?t.gr:t.mr:t.Gt:""},i}($),di=function(){function t(t,i){this.pr=t,this.yr=i}return t.prototype.kr=function(t){return null!==t&&this.pr===t.pr&&this.yr===t.yr},t.prototype.Nr=function(){return new t(this.pr,this.yr)},t.prototype.Cr=function(){return this.pr},t.prototype.Sr=function(){return this.yr},t.prototype.Tr=function(){return this.yr-this.pr},t.prototype.wi=function(){return this.yr===this.pr||Number.isNaN(this.yr)||Number.isNaN(this.pr)},t.prototype.xn=function(i){return null===i?this:new t(Math.min(this.Cr(),i.Cr()),Math.max(this.Sr(),i.Sr()))},t.prototype.Dr=function(t){if(k(t)&&0!=this.yr-this.pr){var i=.5*(this.yr+this.pr),n=this.yr-i,e=this.pr-i;n*=t,e*=t,this.yr=i+n,this.pr=i+e}},t.prototype.Br=function(t){k(t)&&(this.yr+=t,this.pr+=t)},t.prototype.Ar=function(){return{minValue:this.pr,maxValue:this.yr}},t.Lr=function(i){return null===i?null:new t(i.minValue,i.maxValue)},t}(),yi=function(){function t(t,i){this.Er=t,this.Fr=i||null}return t.prototype.Or=function(){return this.Er},t.prototype.Vr=function(){return this.Fr},t.prototype.Ar=function(){return null===this.Er?null:{priceRange:this.Er.Ar(),margins:this.Fr||void 0}},t.Lr=function(i){return null===i?null:new t(di.Lr(i.priceRange),i.margins)},t}(),wi=function(t){function i(i,n){var e=t.call(this,i)||this;return e.Rr=n,e}return C(i,t),i.prototype.kh=function(t,i){var n=this.ph;n.yt=!1;var e=this.Rr.W();if(this.Xn.yt()&&e.lineVisible){var r=this.Rr.Wr();null!==r&&(n.yt=!0,n.it=r,n.B=e.color,n.Ht=i,n.Yt=t,n.Vt=e.lineWidth,n.Rt=e.lineStyle)}},i}(Ut),gi=function(t){function i(i,n){var e=t.call(this)||this;return e.Ih=i,e.Rr=n,e}return C(i,t),i.prototype.vi=function(t,i,n){t.yt=!1,i.yt=!1;var e=this.Rr.W(),r=e.axisLabelVisible,s=""!==e.title,o=this.Ih;if(r&&o.yt()){var h=this.Rr.Wr();if(null!==h){s&&(i.Gt=e.title,i.yt=!0),i.Tt=o.jt().Dt(h/o.Ct().Yt()),t.Gt=o.Ct().zr(e.price),t.yt=!0;var u=b(e.color);n.t=u.t,n.B=u.i,n.ti=h}}},i}($),Mi=function(){function t(t,i){this.Ih=t,this.zi=i,this.Pr=new wi(t,this),this._h=new gi(t,this),this.Ir=new qt(this._h,t,t.jt())}return t.prototype.jr=function(t){z(this.zi,t),this.vt(),this.Ih.jt().qr()},t.prototype.W=function(){return this.zi},t.prototype.nn=function(){return[this.Pr,this.Ir]},t.prototype.Ur=function(){return this._h},t.prototype.vt=function(){this.Pr.vt(),this._h.vt()},t.prototype.Wr=function(){var t=this.Ih,i=t.Ct();if(t.jt().bt().wi()||i.wi())return null;var n=t.kt();return null===n?null:i.xt(this.zi.price,n.St)},t}(),mi=function(t){function i(i){var n=t.call(this)||this;return n.gi=i,n}return C(i,t),i.prototype.jt=function(){return this.gi},i}(rt),_i={Fs:"",Zs:"",Xs:""},bi=function(){function t(t){this.Ih=t}return t.prototype.Os=function(t,i){var n=this.Ih.Hr(),e=this.Ih.W();switch(n){case"Line":return this.Yr(e,t,i);case"Area":return this.$r(e);case"Baseline":return this.Kr(e,t,i);case"Bar":return this.Xr(e,t,i);case"Candlestick":return this.Zr(e,t,i);case"Histogram":return this.Jr(e,t,i)}throw new Error("Unknown chart style")},t.prototype.Xr=function(t,i,n){var e=x({},_i),r=t.upColor,s=t.downColor,o=r,h=s,u=c(this.Gr(i,n)),a=p(u.St[0])<=p(u.St[3]);return void 0!==u.B?(e.Fs=u.B,e.Zs=u.B):(e.Fs=a?r:s,e.Zs=a?o:h),e},t.prototype.Zr=function(t,i,n){var e,r,s,o=x({},_i),h=t.upColor,u=t.downColor,a=t.borderUpColor,l=t.borderDownColor,f=t.wickUpColor,v=t.wickDownColor,d=c(this.Gr(i,n)),y=p(d.St[0])<=p(d.St[3]);return o.Fs=null!==(e=d.B)&&void 0!==e?e:y?h:u,o.Zs=null!==(r=d.Tt)&&void 0!==r?r:y?a:l,o.Xs=null!==(s=d.Ks)&&void 0!==s?s:y?f:v,o},t.prototype.$r=function(t){return x(x({},_i),{Fs:t.lineColor})},t.prototype.Kr=function(t,i,n){var e=c(this.Gr(i,n)).St[3]>=t.baseValue.price;return x(x({},_i),{Fs:e?t.topLineColor:t.bottomLineColor})},t.prototype.Yr=function(t,i,n){var e,r=c(this.Gr(i,n));return x(x({},_i),{Fs:null!==(e=r.B)&&void 0!==e?e:t.color})},t.prototype.Jr=function(t,i,n){var e=x({},_i),r=c(this.Gr(i,n));return e.Fs=void 0!==r.B?r.B:t.color,e},t.prototype.Gr=function(t,i){return void 0!==i?i.St:this.Ih.on().Qr(t)},t}();!function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"}(fi||(fi={}));var Si=function(){function t(){this.te=[],this.ie=new Map,this.ne=new Map}return t.prototype.se=function(){return this.rs()>0?this.te[this.te.length-1]:null},t.prototype.he=function(){return this.rs()>0?this.re(0):null},t.prototype.an=function(){return this.rs()>0?this.re(this.te.length-1):null},t.prototype.rs=function(){return this.te.length},t.prototype.wi=function(){return 0===this.rs()},t.prototype.Xh=function(t){return null!==this.ee(t,0)},t.prototype.Qr=function(t){return this.ue(t)},t.prototype.ue=function(t,i){void 0===i&&(i=0);var n=this.ee(t,i);return null===n?null:x(x({},this.ae(n)),{_s:this.re(n)})},t.prototype.cs=function(){return this.te},t.prototype.oe=function(t,i,n){if(this.wi())return null;for(var e=null,r=0,s=n;r<s.length;r++){var o=s[r];e=Ci(e,this.le(t,i,o))}return e},t.prototype.Z=function(t){this.ne.clear(),this.ie.clear(),this.te=t},t.prototype.re=function(t){return this.te[t]._s},t.prototype.ae=function(t){return this.te[t]},t.prototype.ee=function(t,i){var n=this.fe(t);if(null===n&&0!==i)switch(i){case-1:return this.ce(t);case 1:return this.ve(t);default:throw new TypeError("Unknown search mode")}return n},t.prototype.ce=function(t){var i=this._e(t);return i>0&&(i-=1),i!==this.te.length&&this.re(i)<t?i:null},t.prototype.ve=function(t){var i=this.de(t);return i!==this.te.length&&t<this.re(i)?i:null},t.prototype.fe=function(t){var i=this._e(t);return i===this.te.length||t<this.te[i]._s?null:i},t.prototype._e=function(t){return wt(this.te,t,(function(t,i){return t._s<i}))},t.prototype.de=function(t){return gt(this.te,t,(function(t,i){return i._s>t}))},t.prototype.we=function(t,i,n){for(var e=null,r=t;r<i;r++){var s=this.te[r].St[n];Number.isNaN(s)||(null===e?e={Me:s,be:s}:(s<e.Me&&(e.Me=s),s>e.be&&(e.be=s)))}return e},t.prototype.le=function(t,i,n){if(this.wi())return null;var e=null,r=c(this.he()),s=c(this.an()),o=Math.max(t,r),h=Math.min(i,s),u=30*Math.ceil(o/30),a=Math.max(u,30*Math.floor(h/30)),l=this._e(o),f=this.de(Math.min(h,u,i));e=Ci(e,this.we(l,f,n));var p=this.ie.get(n);void 0===p&&(p=new Map,this.ie.set(n,p));for(var v=Math.max(u+1,o);v<a;v+=30){var d=Math.floor(v/30),y=p.get(d);if(void 0===y){var w=this._e(30*d),g=this.de(30*(d+1)-1);y=this.we(w,g,n),p.set(d,y)}e=Ci(e,y)}return l=this._e(a),f=this.de(h),Ci(e,this.we(l,f,n))},t}();function Ci(t,i){return null===t?i:null===i?t:{Me:Math.min(t.Me,i.Me),be:Math.max(t.be,i.be)}}var xi=function(t){function i(i,n,e){var r=t.call(this,i)||this;r.At=new Si,r.Pr=new pi(r),r.me=[],r.ge=new Ht(r),r.pe=null,r.ye=null,r.ke=[],r.Ne=[],r.xe=null,r.zi=n,r.Ce=e;var s=new vi(r);return r.Ei=[s],r.Ir=new qt(s,r,i),"Area"!==e&&"Line"!==e&&"Baseline"!==e||(r.pe=new ti(r)),r.Se(),r.Te(),r}return C(i,t),i.prototype.p=function(){null!==this.xe&&clearTimeout(this.xe)},i.prototype._r=function(t){return this.zi.priceLineColor||t},i.prototype.$h=function(t){var i={Kh:!0},n=this.Ct();if(this.jt().bt().wi()||n.wi()||this.At.wi())return i;var e,r,s=this.jt().bt().hs(),o=this.kt();if(null===s||null===o)return i;if(t){var h=this.At.se();if(null===h)return i;e=h,r=h._s}else{var u=this.At.ue(s.qn(),-1);if(null===u)return i;if(null===(e=this.At.Qr(u._s)))return i;r=u._s}var a=e.St[3],l=this.fs().Os(r,{St:e}),f=n.xt(a,o.St);return{Kh:!1,et:a,Gt:n.Mi(a,o.St),mr:n.zr(a),gr:n.De(a,o.St),B:l.Fs,ti:f,_s:r}},i.prototype.fs=function(){return null!==this.ye||(this.ye=new bi(this)),this.ye},i.prototype.W=function(){return this.zi},i.prototype.jr=function(t){var i=t.priceScaleId;void 0!==i&&i!==this.zi.priceScaleId&&this.jt().Be(this,i),z(this.zi,t),void 0!==t.priceFormat&&(this.Se(),this.jt().Ae()),this.jt().Le(this),this.jt().Ee(),this.Yi.vt("options")},i.prototype.Z=function(t,i){this.At.Z(t),this.Fe(),this.Yi.vt("data"),this.Pi.vt("data"),null!==this.pe&&(i&&i.Oe?this.pe.qh():0===t.length&&this.pe.jh());var n=this.jt().wh(this);this.jt().Ve(n),this.jt().Le(this),this.jt().Ee(),this.jt().qr()},i.prototype.Re=function(t){this.ke=t,this.Fe();var i=this.jt().wh(this);this.Pi.vt("data"),this.jt().Ve(i),this.jt().Le(this),this.jt().Ee(),this.jt().qr()},i.prototype.We=function(){return this.ke},i.prototype.cr=function(){return this.Ne},i.prototype.ze=function(t){var i=new Mi(this,t);return this.me.push(i),this.jt().Le(this),i},i.prototype.Pe=function(t){var i=this.me.indexOf(t);-1!==i&&this.me.splice(i,1),this.jt().Le(this)},i.prototype.Hr=function(){return this.Ce},i.prototype.kt=function(){var t=this.Ie();return null===t?null:{St:t.St[3],je:t.rt}},i.prototype.Ie=function(){var t=this.jt().bt().hs();if(null===t)return null;var i=t.jn();return this.At.ue(i,1)},i.prototype.on=function(){return this.At},i.prototype.vr=function(t){var i=this.At.Qr(t);return null===i?null:"Bar"===this.Ce||"Candlestick"===this.Ce?{Bs:i.St[0],As:i.St[1],Ls:i.St[2],Es:i.St[3]}:i.St[3]},i.prototype.qe=function(t){var i=this,n=this.pe;return null!==n&&n.yt()?(null===this.xe&&n.Hh()&&(this.xe=setTimeout((function(){i.xe=null,i.jt().Ue()}),0)),n.Uh(),[n]):[]},i.prototype.nn=function(){var t=[];this.He()||t.push(this.ge),t.push(this.Yi,this.Pr,this.Ir,this.Pi);for(var i=0,n=this.me;i<n.length;i++){var e=n[i];t.push.apply(t,e.nn())}return t},i.prototype.sn=function(t,i){if(i!==this.ki&&!this.He())return[];for(var n=A([],this.Ei,!0),e=0,r=this.me;e<r.length;e++){var s=r[e];n.push(s.Ur())}return n},i.prototype.Ye=function(t,i){var n=this;if(void 0!==this.zi.autoscaleInfoProvider){var e=this.zi.autoscaleInfoProvider((function(){var e=n.$e(t,i);return null===e?null:e.Ar()}));return yi.Lr(e)}return this.$e(t,i)},i.prototype.Ke=function(){return this.zi.priceFormat.minMove},i.prototype.Xe=function(){return this.Ze},i.prototype.rn=function(){var t;this.Yi.vt(),this.Pi.vt();for(var i=0,n=this.Ei;i<n.length;i++)n[i].vt();for(var e=0,r=this.me;e<r.length;e++)r[e].vt();this.Pr.vt(),this.ge.vt(),null===(t=this.pe)||void 0===t||t.vt()},i.prototype.Ct=function(){return c(t.prototype.Ct.call(this))},i.prototype.gt=function(t){if("Line"!==this.Ce&&"Area"!==this.Ce&&"Baseline"!==this.Ce||!this.zi.crosshairMarkerVisible)return null;var i=this.At.Qr(t);return null===i?null:{et:i.St[3],st:this.Je(),Tt:this.Ge(),Nt:this.Qe(t)}},i.prototype.dr=function(){return this.zi.title},i.prototype.yt=function(){return this.zi.visible},i.prototype.He=function(){return!ot(this.Ct().tu())},i.prototype.$e=function(t,i){if(!E(t)||!E(i)||this.At.wi())return null;var n="Line"===this.Ce||"Area"===this.Ce||"Baseline"===this.Ce||"Histogram"===this.Ce?[3]:[2,1],e=this.At.oe(t,i,n),r=null!==e?new di(e.Me,e.be):null;if("Histogram"===this.Hr()){var s=this.zi.base,o=new di(s,s);r=null!==r?r.xn(o):o}return new yi(r,this.Pi.lr())},i.prototype.Je=function(){switch(this.Ce){case"Line":case"Area":case"Baseline":return this.zi.crosshairMarkerRadius}return 0},i.prototype.Ge=function(){switch(this.Ce){case"Line":case"Area":case"Baseline":var t=this.zi.crosshairMarkerBorderColor;if(0!==t.length)return t}return null},i.prototype.Qe=function(t){switch(this.Ce){case"Line":case"Area":case"Baseline":var i=this.zi.crosshairMarkerBackgroundColor;if(0!==i.length)return i}return this.fs().Os(t).Fs},i.prototype.Se=function(){switch(this.zi.priceFormat.type){case"custom":this.Ze={format:this.zi.priceFormat.formatter};break;case"volume":this.Ze=new ft(this.zi.priceFormat.precision);break;case"percent":this.Ze=new lt(this.zi.priceFormat.precision);break;default:var t=Math.pow(10,this.zi.priceFormat.precision);this.Ze=new at(t,this.zi.priceFormat.minMove*t)}null!==this.ki&&this.ki.iu()},i.prototype.Fe=function(){var t=this,i=this.jt().bt();if(i.wi()||0===this.At.rs())this.Ne=[];else{var n=c(this.At.he());this.Ne=this.ke.map((function(e,r){var s=c(i.nu(e.time,!0)),o=s<n?1:-1;return{time:c(t.At.ue(s,o))._s,position:e.position,shape:e.shape,color:e.color,id:e.id,internalId:r,text:e.text,size:e.size}}))}},i.prototype.Te=function(){switch(this.Pi=new ci(this,this.jt()),this.Ce){case"Bar":this.Yi=new Tt(this,this.jt());break;case"Candlestick":this.Yi=new jt(this,this.jt());break;case"Line":this.Yi=new Xt(this,this.jt());break;case"Area":this.Yi=new Ct(this,this.jt());break;case"Baseline":this.Yi=new Wt(this,this.jt());break;case"Histogram":this.Yi=new It(this,this.jt());break;default:throw Error("Unknown chart style assigned: "+this.Ce)}},i}(mi),Ai=function(){function t(t){this.zi=t}return t.prototype.su=function(t,i,n){var e=t;if(0===this.zi.mode)return e;var r=n.ji(),s=r.kt();if(null===s)return e;var o=r.xt(t,s),h=n.hu().filter((function(t){return t instanceof xi})).reduce((function(t,e){if(n.Mh(e)||!e.yt())return t;var r=e.Ct(),s=e.on();if(r.wi()||!s.Xh(i))return t;var o=s.Qr(i);if(null===o)return t;var h=p(e.kt());return t.concat([r.xt(o.St[3],h.St)])}),[]);if(0===h.length)return e;h.sort((function(t,i){return Math.abs(t-o)-Math.abs(i-o)}));var u=h[0];return r.qi(u,s)},t}(),Ti=function(){function t(){this.At=null}return t.prototype.Z=function(t){this.At=t},t.prototype.H=function(t,i,n,e){var r=this;if(null!==this.At){var s=Math.max(1,Math.floor(i));t.lineWidth=s;var o=Math.ceil(this.At.Ot*i),h=Math.ceil(this.At.Ft*i);!function(t,i){t.save(),t.lineWidth%2&&t.translate(.5,.5),i(),t.restore()}(t,(function(){var n=c(r.At);if(n.ru){t.strokeStyle=n.eu,u(t,n.uu),t.beginPath();for(var e=0,a=n.au;e<a.length;e++){var l=a[e],f=Math.round(l.ou*i);t.moveTo(f,-s),t.lineTo(f,o+s)}t.stroke()}if(n.lu){t.strokeStyle=n.fu,u(t,n.cu),t.beginPath();for(var p=0,v=n.vu;p<v.length;p++){var d=v[p],y=Math.round(d.ou*i);t.moveTo(-s,y),t.lineTo(h+s,y)}t.stroke()}}))}},t}(),zi=function(){function t(t){this.zt=new Ti,this.ft=!0,this.Di=t}return t.prototype.vt=function(){this.ft=!0},t.prototype.dt=function(t,i){if(this.ft){var n=this.Di.jt().W().grid,e={Ot:t,Ft:i,lu:n.horzLines.visible,ru:n.vertLines.visible,fu:n.horzLines.color,eu:n.vertLines.color,cu:n.horzLines.style,uu:n.vertLines.style,vu:this.Di.ji()._u(),au:this.Di.jt().bt()._u()||[]};this.zt.Z(e),this.ft=!1}return this.zt},t}(),ki=function(){function t(t){this.Yi=new zi(t)}return t.prototype.du=function(){return this.Yi},t}(),Ei={wu:4,Mu:1e-4};function Li(t,i){var n=100*(t-i)/i;return i<0?-n:n}function Oi(t,i){var n=Li(t.Cr(),i),e=Li(t.Sr(),i);return new di(n,e)}function Di(t,i){var n=100*(t-i)/i+100;return i<0?-n:n}function Ni(t,i){var n=Di(t.Cr(),i),e=Di(t.Sr(),i);return new di(n,e)}function Wi(t,i){var n=Math.abs(t);if(n<1e-15)return 0;var e=Et(n+i.Mu)+i.wu;return t<0?-e:e}function Ri(t,i){var n=Math.abs(t);if(n<1e-15)return 0;var e=Math.pow(10,n-i.wu)-i.Mu;return t<0?-e:e}function ji(t,i){if(null===t)return null;var n=Wi(t.Cr(),i),e=Wi(t.Sr(),i);return new di(n,e)}function Fi(t,i){if(null===t)return null;var n=Ri(t.Cr(),i),e=Ri(t.Sr(),i);return new di(n,e)}function Bi(t){if(null===t)return Ei;var i=Math.abs(t.Sr()-t.Cr());if(i>=1||i<1e-15)return Ei;var n=Math.ceil(Math.abs(Math.log10(i))),e=Ei.wu+n;return{wu:e,Mu:1/Math.pow(10,e)}}var Pi,Ii=function(){function t(t,i){if(this.bu=t,this.mu=i,function(t){if(t<0)return!1;for(var i=t;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.bu))this.gu=[2,2.5,2];else{this.gu=[];for(var n=this.bu;1!==n;){if(n%2==0)this.gu.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.gu.push(2,2.5),n/=5}if(this.gu.length>100)throw new Error("something wrong with base")}}}return t.prototype.pu=function(t,i,n){for(var e,r=0===this.bu?0:1/this.bu,s=Math.pow(10,Math.max(0,Math.ceil(Et(t-i)))),o=0,h=this.mu[0];;){var u=kt(s,r,1e-14)&&s>r+1e-14,a=kt(s,n*h,1e-14),l=kt(s,1,1e-14);if(!(u&&a&&l))break;s/=h,h=this.mu[++o%this.mu.length]}if(s<=r+1e-14&&(s=r),s=Math.max(1,s),this.gu.length>0&&(e=s,1,1e-14,Math.abs(e-1)<1e-14))for(o=0,h=this.gu[0];kt(s,n*h,1e-14)&&s>r+1e-14;)s/=h,h=this.gu[++o%this.gu.length];return s},t}(),Xi=function(){function t(t,i,n,e){this.yu=[],this._i=t,this.bu=i,this.ku=n,this.Nu=e}return t.prototype.pu=function(t,i){if(t<i)throw new Error("high < low");var n=this._i.Yt(),e=(t-i)*this.xu()/n,r=new Ii(this.bu,[2,2.5,2]),s=new Ii(this.bu,[2,2,2.5]),o=new Ii(this.bu,[2.5,2,2]),h=[];return h.push(r.pu(t,i,e),s.pu(t,i,e),o.pu(t,i,e)),function(t){if(t.length<1)throw Error("array is empty");for(var i=t[0],n=1;n<t.length;++n)t[n]<i&&(i=t[n]);return i}(h)},t.prototype.Cu=function(){var t=this._i,i=t.kt();if(null!==i){var n=t.Yt(),e=this.ku(n-1,i),r=this.ku(0,i),s=this._i.W().entireTextOnly?this.Su()/2:0,o=s,h=n-1-s,u=Math.max(e,r),a=Math.min(e,r);if(u!==a){for(var l=this.pu(u,a),f=u%l,c=u>=a?1:-1,p=null,v=0,d=u-(f+=f<0?l:0);d>a;d-=l){var y=this.Nu(d,i,!0);null!==p&&Math.abs(y-p)<this.xu()||y<o||y>h||(v<this.yu.length?(this.yu[v].ou=y,this.yu[v].Tu=t.Du(d)):this.yu.push({ou:y,Tu:t.Du(d)}),v++,p=y,t.Bu()&&(l=this.pu(d*c,a)))}this.yu.length=v}else this.yu=[]}else this.yu=[]},t.prototype._u=function(){return this.yu},t.prototype.Su=function(){return this._i.S()},t.prototype.xu=function(){return Math.ceil(2.5*this.Su())},t}();function Vi(t){return t.slice().sort((function(t,i){return c(t.xi())-c(i.xi())}))}!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(Pi||(Pi={}));var Gi=new lt,Yi=new at(100,1),qi=function(){function t(t,i,n,e){this.Au=0,this.Lu=null,this.Er=null,this.Eu=null,this.Fu={Ou:!1,Vu:null},this.Ru=0,this.Wu=0,this.zu=new T,this.Pu=new T,this.Iu=[],this.ju=null,this.qu=null,this.Uu=null,this.Hu=null,this.Ze=Yi,this.Yu=Bi(null),this.$u=t,this.zi=i,this.Ku=n,this.Xu=e,this.Zu=new Xi(this,100,this.Ju.bind(this),this.Gu.bind(this))}return t.prototype.tu=function(){return this.$u},t.prototype.W=function(){return this.zi},t.prototype.jr=function(t){if(z(this.zi,t),this.iu(),void 0!==t.mode&&this.Qu({Nh:t.mode}),void 0!==t.scaleMargins){var i=f(t.scaleMargins.top),n=f(t.scaleMargins.bottom);if(i<0||i>1)throw new Error("Invalid top margin - expect value between 0 and 1, given=".concat(i));if(n<0||n>1||i+n>1)throw new Error("Invalid bottom margin - expect value between 0 and 1, given=".concat(n));if(i+n>1)throw new Error("Invalid margins - sum of margins must be less than 1, given=".concat(i+n));this.ta(),this.qu=null}},t.prototype.ia=function(){return this.zi.autoScale},t.prototype.Bu=function(){return 1===this.zi.mode},t.prototype.br=function(){return 2===this.zi.mode},t.prototype.na=function(){return 3===this.zi.mode},t.prototype.Nh=function(){return{dn:this.zi.autoScale,sa:this.zi.invertScale,Nh:this.zi.mode}},t.prototype.Qu=function(t){var i=this.Nh(),n=null;void 0!==t.dn&&(this.zi.autoScale=t.dn),void 0!==t.Nh&&(this.zi.mode=t.Nh,2!==t.Nh&&3!==t.Nh||(this.zi.autoScale=!0),this.Fu.Ou=!1),1===i.Nh&&t.Nh!==i.Nh&&(function(t,i){if(null===t)return!1;var n=Ri(t.Cr(),i),e=Ri(t.Sr(),i);return isFinite(n)&&isFinite(e)}(this.Er,this.Yu)?null!==(n=Fi(this.Er,this.Yu))&&this.ha(n):this.zi.autoScale=!0),1===t.Nh&&t.Nh!==i.Nh&&null!==(n=ji(this.Er,this.Yu))&&this.ha(n);var e=i.Nh!==this.zi.mode;e&&(2===i.Nh||this.br())&&this.iu(),e&&(3===i.Nh||this.na())&&this.iu(),void 0!==t.sa&&i.sa!==t.sa&&(this.zi.invertScale=t.sa,this.ra()),this.Pu.m(i,this.Nh())},t.prototype.ea=function(){return this.Pu},t.prototype.S=function(){return this.Ku.fontSize},t.prototype.Yt=function(){return this.Au},t.prototype.ua=function(t){this.Au!==t&&(this.Au=t,this.ta(),this.qu=null)},t.prototype.aa=function(){if(this.Lu)return this.Lu;var t=this.Yt()-this.oa()-this.la();return this.Lu=t,t},t.prototype.Or=function(){return this.fa(),this.Er},t.prototype.ha=function(t,i){var n=this.Er;(i||null===n&&null!==t||null!==n&&!n.kr(t))&&(this.qu=null,this.Er=t)},t.prototype.wi=function(){return this.fa(),0===this.Au||!this.Er||this.Er.wi()},t.prototype.ca=function(t){return this.sa()?t:this.Yt()-1-t},t.prototype.xt=function(t,i){return this.br()?t=Li(t,i):this.na()&&(t=Di(t,i)),this.Gu(t,i)},t.prototype.os=function(t,i,n){this.fa();for(var e=this.la(),r=c(this.Or()),s=r.Cr(),o=r.Sr(),h=this.aa()-1,u=this.sa(),a=h/(o-s),l=void 0===n?0:n.from,f=void 0===n?t.length:n.to,p=this.va(),v=l;v<f;v++){var d=t[v],y=d.et;if(!isNaN(y)){var w=y;null!==p&&(w=p(d.et,i));var g=e+a*(w-s),M=u?g:this.Au-1-g;d.it=M}}},t.prototype.Ts=function(t,i,n){this.fa();for(var e=this.la(),r=c(this.Or()),s=r.Cr(),o=r.Sr(),h=this.aa()-1,u=this.sa(),a=h/(o-s),l=void 0===n?0:n.from,f=void 0===n?t.length:n.to,p=this.va(),v=l;v<f;v++){var d=t[v],y=d.Bs,w=d.As,g=d.Ls,M=d.Es;null!==p&&(y=p(d.Bs,i),w=p(d.As,i),g=p(d.Ls,i),M=p(d.Es,i));var m=e+a*(y-s),_=u?m:this.Au-1-m;d.Cs=_,m=e+a*(w-s),_=u?m:this.Au-1-m,d.ks=_,m=e+a*(g-s),_=u?m:this.Au-1-m,d.Ns=_,m=e+a*(M-s),_=u?m:this.Au-1-m,d.Ss=_}},t.prototype.qi=function(t,i){var n=this.Ju(t,i);return this._a(n,i)},t.prototype._a=function(t,i){var n=t;return this.br()?n=function(t,i){return i<0&&(t=-t),t/100*i+i}(n,i):this.na()&&(n=function(t,i){return t-=100,i<0&&(t=-t),t/100*i+i}(n,i)),n},t.prototype.hu=function(){return this.Iu},t.prototype.da=function(){if(this.ju)return this.ju;for(var t=[],i=0;i<this.Iu.length;i++){var n=this.Iu[i];null===n.xi()&&n.Ci(i+1),t.push(n)}return t=Vi(t),this.ju=t,this.ju},t.prototype.wa=function(t){-1===this.Iu.indexOf(t)&&(this.Iu.push(t),this.iu(),this.Ma())},t.prototype.ba=function(t){var i=this.Iu.indexOf(t);if(-1===i)throw new Error("source is not attached to scale");this.Iu.splice(i,1),0===this.Iu.length&&(this.Qu({dn:!0}),this.ha(null)),this.iu(),this.Ma()},t.prototype.kt=function(){for(var t=null,i=0,n=this.Iu;i<n.length;i++){var e=n[i].kt();null!==e&&(null===t||e.je<t.je)&&(t=e)}return null===t?null:t.St},t.prototype.sa=function(){return this.zi.invertScale},t.prototype._u=function(){var t=null===this.kt();if(null!==this.qu&&(t||this.qu.ma===t))return this.qu._u;this.Zu.Cu();var i=this.Zu._u();return this.qu={_u:i,ma:t},this.zu.m(),i},t.prototype.ga=function(){return this.zu},t.prototype.pa=function(t){this.br()||this.na()||null===this.Uu&&null===this.Eu&&(this.wi()||(this.Uu=this.Au-t,this.Eu=c(this.Or()).Nr()))},t.prototype.ya=function(t){if(!this.br()&&!this.na()&&null!==this.Uu){this.Qu({dn:!1}),(t=this.Au-t)<0&&(t=0);var i=(this.Uu+.2*(this.Au-1))/(t+.2*(this.Au-1)),n=c(this.Eu).Nr();i=Math.max(i,.1),n.Dr(i),this.ha(n)}},t.prototype.ka=function(){this.br()||this.na()||(this.Uu=null,this.Eu=null)},t.prototype.Na=function(t){this.ia()||null===this.Hu&&null===this.Eu&&(this.wi()||(this.Hu=t,this.Eu=c(this.Or()).Nr()))},t.prototype.xa=function(t){if(!this.ia()&&null!==this.Hu){var i=c(this.Or()).Tr()/(this.aa()-1),n=t-this.Hu;this.sa()&&(n*=-1);var e=n*i,r=c(this.Eu).Nr();r.Br(e),this.ha(r,!0),this.qu=null}},t.prototype.Ca=function(){this.ia()||null!==this.Hu&&(this.Hu=null,this.Eu=null)},t.prototype.Xe=function(){return this.Ze||this.iu(),this.Ze},t.prototype.Mi=function(t,i){switch(this.zi.mode){case 2:return this.Xe().format(Li(t,i));case 3:return this.Xe().format(Di(t,i));default:return this.Sa(t)}},t.prototype.Du=function(t){switch(this.zi.mode){case 2:case 3:return this.Xe().format(t);default:return this.Sa(t)}},t.prototype.zr=function(t){return this.Sa(t,c(this.Ta()).Xe())},t.prototype.De=function(t,i){return t=Li(t,i),Gi.format(t)},t.prototype.Da=function(){return this.Iu},t.prototype.Ba=function(t){this.Fu={Vu:t,Ou:!1}},t.prototype.rn=function(){this.Iu.forEach((function(t){return t.rn()}))},t.prototype.iu=function(){this.qu=null;var t=this.Ta(),i=100;null!==t&&(i=Math.round(1/t.Ke())),this.Ze=Yi,this.br()?(this.Ze=Gi,i=100):this.na()?(this.Ze=new at(100,1),i=100):null!==t&&(this.Ze=t.Xe()),this.Zu=new Xi(this,i,this.Ju.bind(this),this.Gu.bind(this)),this.Zu.Cu()},t.prototype.Ma=function(){this.ju=null},t.prototype.Ta=function(){return this.Iu[0]||null},t.prototype.oa=function(){return this.sa()?this.zi.scaleMargins.bottom*this.Yt()+this.Wu:this.zi.scaleMargins.top*this.Yt()+this.Ru},t.prototype.la=function(){return this.sa()?this.zi.scaleMargins.top*this.Yt()+this.Ru:this.zi.scaleMargins.bottom*this.Yt()+this.Wu},t.prototype.fa=function(){this.Fu.Ou||(this.Fu.Ou=!0,this.Aa())},t.prototype.ta=function(){this.Lu=null},t.prototype.Gu=function(t,i){if(this.fa(),this.wi())return 0;t=this.Bu()&&t?Wi(t,this.Yu):t;var n=c(this.Or()),e=this.la()+(this.aa()-1)*(t-n.Cr())/n.Tr();return this.ca(e)},t.prototype.Ju=function(t,i){if(this.fa(),this.wi())return 0;var n=this.ca(t),e=c(this.Or()),r=e.Cr()+e.Tr()*((n-this.la())/(this.aa()-1));return this.Bu()?Ri(r,this.Yu):r},t.prototype.ra=function(){this.qu=null,this.Zu.Cu()},t.prototype.Aa=function(){var t=this.Fu.Vu;if(null!==t){for(var i,n,e=null,r=0,s=0,o=0,h=this.Da();o<h.length;o++){var u=h[o];if(u.yt()){var a=u.kt();if(null!==a){var l=u.Ye(t.jn(),t.qn()),f=l&&l.Or();if(null!==f){switch(this.zi.mode){case 1:f=ji(f,this.Yu);break;case 2:f=Oi(f,a.St);break;case 3:f=Ni(f,a.St)}if(e=null===e?f:e.xn(c(f)),null!==l){var p=l.Vr();null!==p&&(r=Math.max(r,p.above),s=Math.max(r,p.below))}}}}}if(r===this.Ru&&s===this.Wu||(this.Ru=r,this.Wu=s,this.qu=null,this.ta()),null!==e){if(e.Cr()===e.Sr()){var v=this.Ta(),d=5*(null===v||this.br()||this.na()?1:v.Ke());this.Bu()&&(e=Fi(e,this.Yu)),e=new di(e.Cr()-d,e.Sr()+d),this.Bu()&&(e=ji(e,this.Yu))}if(this.Bu()){var y=Fi(e,this.Yu),w=Bi(y);if(i=w,n=this.Yu,i.wu!==n.wu||i.Mu!==n.Mu){var g=null!==this.Eu?Fi(this.Eu,this.Yu):null;this.Yu=w,e=ji(y,w),null!==g&&(this.Eu=ji(g,w))}}this.ha(e)}else null===this.Er&&(this.ha(new di(-.5,.5)),this.Yu=Bi(null));this.Fu.Ou=!0}},t.prototype.va=function(){var t=this;return this.br()?Li:this.na()?Di:this.Bu()?function(i){return Wi(i,t.Yu)}:null},t.prototype.Sa=function(t,i){return void 0===this.Xu.priceFormatter?(void 0===i&&(i=this.Xe()),i.format(t)):this.Xu.priceFormatter(t)},t}(),Ji=function(){function t(t,i){this.Iu=[],this.La=new Map,this.Au=0,this.oh=0,this.Ea=1e3,this.ju=null,this.Fa=new T,this.Oa=t,this.gi=i,this.Va=new ki(this);var n=i.W();this.Ra=this.Wa("left",n.leftPriceScale),this.za=this.Wa("right",n.rightPriceScale),this.Ra.ea().u(this.Pa.bind(this,this.Ra),this),this.za.ea().u(this.Pa.bind(this,this.Ra),this),this.Ia(n)}return t.prototype.Ia=function(t){if(t.leftPriceScale&&this.Ra.jr(t.leftPriceScale),t.rightPriceScale&&this.za.jr(t.rightPriceScale),t.localization&&(this.Ra.iu(),this.za.iu()),t.overlayPriceScales)for(var i=0,n=Array.from(this.La.values());i<n.length;i++){var e=c(n[i][0].Ct());e.jr(t.overlayPriceScales),t.localization&&e.iu()}},t.prototype.ja=function(t){switch(t){case"left":return this.Ra;case"right":return this.za}return this.La.has(t)?f(this.La.get(t))[0].Ct():null},t.prototype.p=function(){this.jt().qa().M(this),this.Ra.ea().M(this),this.za.ea().M(this),this.Iu.forEach((function(t){t.p&&t.p()})),this.Fa.m()},t.prototype.Ua=function(){return this.Ea},t.prototype.Ha=function(t){this.Ea=t},t.prototype.jt=function(){return this.gi},t.prototype.Ht=function(){return this.oh},t.prototype.Yt=function(){return this.Au},t.prototype.Ya=function(t){this.oh=t,this.$a()},t.prototype.ua=function(t){var i=this;this.Au=t,this.Ra.ua(t),this.za.ua(t),this.Iu.forEach((function(n){if(i.Mh(n)){var e=n.Ct();null!==e&&e.ua(t)}})),this.$a()},t.prototype.hu=function(){return this.Iu},t.prototype.Mh=function(t){var i=t.Ct();return null===i||this.Ra!==i&&this.za!==i},t.prototype.wa=function(t,i,n){var e=void 0!==n?n:this.Xa().Ka+1;this.Za(t,i,e)},t.prototype.ba=function(t){var i=this.Iu.indexOf(t);l(-1!==i,"removeDataSource: invalid data source"),this.Iu.splice(i,1);var n=c(t.Ct()).tu();if(this.La.has(n)){var e=f(this.La.get(n)),r=e.indexOf(t);-1!==r&&(e.splice(r,1),0===e.length&&this.La.delete(n))}var s=t.Ct();s&&s.hu().indexOf(t)>=0&&s.ba(t),null!==s&&(s.Ma(),this.Ja(s)),this.ju=null},t.prototype.mh=function(t){return t===this.Ra?"left":t===this.za?"right":"overlay"},t.prototype.Ga=function(){return this.Ra},t.prototype.Qa=function(){return this.za},t.prototype.io=function(t,i){t.pa(i)},t.prototype.no=function(t,i){t.ya(i),this.$a()},t.prototype.so=function(t){t.ka()},t.prototype.ho=function(t,i){t.Na(i)},t.prototype.ro=function(t,i){t.xa(i),this.$a()},t.prototype.eo=function(t){t.Ca()},t.prototype.$a=function(){this.Iu.forEach((function(t){t.rn()}))},t.prototype.ji=function(){var t=null;return this.gi.W().rightPriceScale.visible&&0!==this.za.hu().length?t=this.za:this.gi.W().leftPriceScale.visible&&0!==this.Ra.hu().length?t=this.Ra:0!==this.Iu.length&&(t=this.Iu[0].Ct()),null===t&&(t=this.za),t},t.prototype.bh=function(){var t=null;return this.gi.W().rightPriceScale.visible?t=this.za:this.gi.W().leftPriceScale.visible&&(t=this.Ra),t},t.prototype.Ja=function(t){null!==t&&t.ia()&&this.uo(t)},t.prototype.ao=function(t){var i=this.Oa.hs();t.Qu({dn:!0}),null!==i&&t.Ba(i),this.$a()},t.prototype.oo=function(){this.uo(this.Ra),this.uo(this.za)},t.prototype.lo=function(){var t=this;this.Ja(this.Ra),this.Ja(this.za),this.Iu.forEach((function(i){t.Mh(i)&&t.Ja(i.Ct())})),this.$a(),this.gi.qr()},t.prototype.da=function(){return null===this.ju&&(this.ju=Vi(this.Iu)),this.ju},t.prototype.fo=function(){return this.Fa},t.prototype.co=function(){return this.Va},t.prototype.uo=function(t){var i=t.Da();if(i&&i.length>0&&!this.Oa.wi()){var n=this.Oa.hs();null!==n&&t.Ba(n)}t.rn()},t.prototype.Xa=function(){var t=this.da();if(0===t.length)return{vo:0,Ka:0};for(var i=0,n=0,e=0;e<t.length;e++){var r=t[e].xi();null!==r&&(r<i&&(i=r),r>n&&(n=r))}return{vo:i,Ka:n}},t.prototype.Za=function(t,i,n){var e=this.ja(i);if(null===e&&(e=this.Wa(i,this.gi.W().overlayPriceScales)),this.Iu.push(t),!ot(i)){var r=this.La.get(i)||[];r.push(t),this.La.set(i,r)}e.wa(t),t.Si(e),t.Ci(n),this.Ja(e),this.ju=null},t.prototype.Pa=function(t,i,n){i.Nh!==n.Nh&&this.uo(t)},t.prototype.Wa=function(t,i){var n=x({visible:!0,autoScale:!0},D(i)),e=new qi(t,n,this.gi.W().layout,this.gi.W().localization);return e.ua(this.Yt()),e},t}(),Ui=function(t){return t.getUTCFullYear()};var Hi=function(){function t(t,i){void 0===t&&(t="yyyy-MM-dd"),void 0===i&&(i="default"),this._o=t,this.do=i}return t.prototype.wo=function(t){return function(t,i,n){return i.replace(/yyyy/g,function(t){return ut(Ui(t),4)}(t)).replace(/yy/g,function(t){return ut(Ui(t)%100,2)}(t)).replace(/MMMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"long"})}(t,n)).replace(/MMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"short"})}(t,n)).replace(/MM/g,function(t){return ut(function(t){return t.getUTCMonth()+1}(t),2)}(t)).replace(/dd/g,function(t){return ut(function(t){return t.getUTCDate()}(t),2)}(t))}(t,this._o,this.do)},t}(),Zi=function(){function t(t){this.Mo=t||"%h:%m:%s"}return t.prototype.wo=function(t){return this.Mo.replace("%h",ut(t.getUTCHours(),2)).replace("%m",ut(t.getUTCMinutes(),2)).replace("%s",ut(t.getUTCSeconds(),2))},t}(),Qi={bo:"yyyy-MM-dd",mo:"%h:%m:%s",po:" ",yo:"default"},Ki=function(){function t(t){void 0===t&&(t={});var i=x(x({},Qi),t);this.ko=new Hi(i.bo,i.yo),this.No=new Zi(i.mo),this.xo=i.po}return t.prototype.wo=function(t){return"".concat(this.ko.wo(t)).concat(this.xo).concat(this.No.wo(t))},t}(),$i=function(){function t(t,i){void 0===i&&(i=50),this.Co=0,this.So=1,this.To=1,this.sh=new Map,this.Do=new Map,this.Bo=t,this.Ao=i}return t.prototype.wo=function(t){var i=t.rt,n=void 0===i.Lo?new Date(1e3*i.Eo).getTime():new Date(Date.UTC(i.Lo.year,i.Lo.month-1,i.Lo.day)).getTime(),e=this.sh.get(n);if(void 0!==e)return e.Fo;if(this.Co===this.Ao){var r=this.Do.get(this.To);this.Do.delete(this.To),this.sh.delete(f(r)),this.To++,this.Co--}var s=this.Bo(t);return this.sh.set(n,{Fo:s,Oo:this.So}),this.Do.set(this.So,n),this.Co++,this.So++,s},t}(),tn=function(){function t(t,i){l(t<=i,"right should be >= left"),this.Vo=t,this.Ro=i}return t.prototype.jn=function(){return this.Vo},t.prototype.qn=function(){return this.Ro},t.prototype.Wo=function(){return this.Ro-this.Vo+1},t.prototype.Xh=function(t){return this.Vo<=t&&t<=this.Ro},t.prototype.kr=function(t){return this.Vo===t.jn()&&this.Ro===t.qn()},t}();function nn(t,i){return null===t||null===i?t===i:t.kr(i)}var en,rn=function(){function t(){this.zo=new Map,this.sh=null}return t.prototype.Po=function(t,i){this.Io(i),this.sh=null;for(var n=i;n<t.length;++n){var e=t[n],r=this.zo.get(e.jo);void 0===r&&(r=[],this.zo.set(e.jo,r)),r.push({_s:n,rt:e.rt,qo:e.jo,Uo:e.Uo})}},t.prototype.Ho=function(t,i){var n=Math.ceil(i/t);return null!==this.sh&&this.sh.Yo===n||(this.sh={_u:this.$o(n),Yo:n}),this.sh._u},t.prototype.Io=function(t){if(0!==t){var i=[];this.zo.forEach((function(n,e){t<=n[0]._s?i.push(e):n.splice(wt(n,t,(function(i){return i._s<t})),1/0)}));for(var n=0,e=i;n<e.length;n++){var r=e[n];this.zo.delete(r)}}else this.zo.clear()},t.prototype.$o=function(t){for(var i=[],n=0,e=Array.from(this.zo.keys()).sort((function(t,i){return i-t}));n<e.length;n++){var r=e[n];if(this.zo.get(r)){var s=i;i=[];for(var o=s.length,h=0,u=f(this.zo.get(r)),a=u.length,l=1/0,c=-1/0,p=0;p<a;p++){for(var v=u[p],d=v._s;h<o;){var y=s[h],w=y._s;if(!(w<d)){l=w;break}h++,i.push(y),c=w,l=1/0}l-d>=t&&d-c>=t&&(i.push(v),c=d)}for(;h<o;h++)i.push(s[h])}}return i},t}(),sn=function(){function t(t){this.Ko=t}return t.prototype.Xo=function(){return null===this.Ko?null:new tn(Math.floor(this.Ko.jn()),Math.ceil(this.Ko.qn()))},t.prototype.Zo=function(){return this.Ko},t.Jo=function(){return new t(null)},t}();!function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(en||(en={}));var on,hn=function(){function t(t,i,n){this.oh=0,this.Go=null,this.Qo=[],this.Hu=null,this.Uu=null,this.tl=new rn,this.il=new Map,this.nl=sn.Jo(),this.sl=!0,this.hl=new T,this.rl=new T,this.el=new T,this.ul=null,this.al=null,this.ol=[],this.zi=i,this.Xu=n,this.ll=i.rightOffset,this.fl=i.barSpacing,this.gi=t,this.cl()}return t.prototype.W=function(){return this.zi},t.prototype.vl=function(t){z(this.Xu,t),this._l(),this.cl()},t.prototype.jr=function(t,i){var n;z(this.zi,t),this.zi.fixLeftEdge&&this.dl(),this.zi.fixRightEdge&&this.wl(),void 0!==t.barSpacing&&this.gi.yn(t.barSpacing),void 0!==t.rightOffset&&this.gi.kn(t.rightOffset),void 0!==t.minBarSpacing&&this.gi.yn(null!==(n=t.barSpacing)&&void 0!==n?n:this.fl),this._l(),this.cl(),this.el.m()},t.prototype.Ui=function(t){var i,n;return null!==(n=null===(i=this.Qo[t])||void 0===i?void 0:i.rt)&&void 0!==n?n:null},t.prototype.pi=function(t){var i;return null!==(i=this.Qo[t])&&void 0!==i?i:null},t.prototype.nu=function(t,i){if(this.Qo.length<1)return null;if(t.Eo>this.Qo[this.Qo.length-1].rt.Eo)return i?this.Qo.length-1:null;var n=wt(this.Qo,t.Eo,(function(t,i){return t.rt.Eo<i}));return t.Eo<this.Qo[n].rt.Eo?i?n:null:n},t.prototype.wi=function(){return 0===this.oh||0===this.Qo.length||null===this.Go},t.prototype.hs=function(){return this.Ml(),this.nl.Xo()},t.prototype.bl=function(){return this.Ml(),this.nl.Zo()},t.prototype.ml=function(){var t=this.hs();if(null===t)return null;var i={from:t.jn(),to:t.qn()};return this.gl(i)},t.prototype.gl=function(t){var i=Math.round(t.from),n=Math.round(t.to),e=c(this.pl()),r=c(this.yl());return{from:c(this.Ui(Math.max(e,i))),to:c(this.Ui(Math.min(r,n)))}},t.prototype.kl=function(t){return{from:c(this.nu(t.from,!0)),to:c(this.nu(t.to,!0))}},t.prototype.Ht=function(){return this.oh},t.prototype.Ya=function(t){if(isFinite(t)&&!(t<=0)&&this.oh!==t){var i=this.bl(),n=this.oh;if(this.oh=t,this.sl=!0,this.zi.lockVisibleTimeRangeOnResize&&0!==n){var e=this.fl*t/n;this.fl=e}if(this.zi.fixLeftEdge&&null!==i&&i.jn()<=0){var r=n-t;this.ll-=Math.round(r/this.fl)+1,this.sl=!0}this.Nl(),this.xl()}},t.prototype.Bt=function(t){if(this.wi()||!E(t))return 0;var i=this.Cl()+this.ll-t;return this.oh-(i+.5)*this.fl-1},t.prototype.us=function(t,i){for(var n=this.Cl(),e=void 0===i?0:i.from,r=void 0===i?t.length:i.to,s=e;s<r;s++){var o=t[s].rt,h=n+this.ll-o,u=this.oh-(h+.5)*this.fl-1;t[s].tt=u}},t.prototype.Sl=function(t){return Math.ceil(this.Tl(t))},t.prototype.kn=function(t){this.sl=!0,this.ll=t,this.xl(),this.gi.Dl(),this.gi.qr()},t.prototype.Ms=function(){return this.fl},t.prototype.yn=function(t){this.Bl(t),this.xl(),this.gi.Dl(),this.gi.qr()},t.prototype.Al=function(){return this.ll},t.prototype._u=function(){if(this.wi())return null;if(null!==this.al)return this.al;for(var t=this.fl,i=5*(this.gi.W().layout.fontSize+4),n=Math.round(i/t),e=c(this.hs()),r=Math.max(e.jn(),e.jn()-n),s=Math.max(e.qn(),e.qn()-n),o=this.tl.Ho(t,i),h=this.pl()+n,u=this.yl()-n,a=this.Ll(),l=this.zi.fixLeftEdge||a,f=this.zi.fixRightEdge||a,p=0,v=0,d=o;v<d.length;v++){var y=d[v];if(r<=y._s&&y._s<=s){var w=void 0;p<this.ol.length?((w=this.ol[p]).ou=this.Bt(y._s),w.Tu=this.El(y),w.qo=y.qo):(w={Fl:!1,ou:this.Bt(y._s),Tu:this.El(y),qo:y.qo},this.ol.push(w)),this.fl>i/2&&!a?w.Fl=!1:w.Fl=l&&y._s<=h||f&&y._s>=u,p++}}return this.ol.length=p,this.al=this.ol,this.ol},t.prototype.Ol=function(){this.sl=!0,this.yn(this.zi.barSpacing),this.kn(this.zi.rightOffset)},t.prototype.Vl=function(t){this.sl=!0,this.Go=t,this.xl(),this.dl()},t.prototype.Rl=function(t,i){var n=this.Tl(t),e=this.Ms(),r=e+i*(e/10);this.yn(r),this.zi.rightBarStaysOnScroll||this.kn(this.Al()+(n-this.Tl(t)))},t.prototype.pa=function(t){this.Hu&&this.Ca(),null===this.Uu&&null===this.ul&&(this.wi()||(this.Uu=t,this.Wl()))},t.prototype.ya=function(t){if(null!==this.ul){var i=zt(this.oh-t,0,this.oh),n=zt(this.oh-c(this.Uu),0,this.oh);0!==i&&0!==n&&this.yn(this.ul.Ms*i/n)}},t.prototype.ka=function(){null!==this.Uu&&(this.Uu=null,this.zl())},t.prototype.Na=function(t){null===this.Hu&&null===this.ul&&(this.wi()||(this.Hu=t,this.Wl()))},t.prototype.xa=function(t){if(null!==this.Hu){var i=(this.Hu-t)/this.Ms();this.ll=c(this.ul).Al+i,this.sl=!0,this.xl()}},t.prototype.Ca=function(){null!==this.Hu&&(this.Hu=null,this.zl())},t.prototype.Pl=function(){this.Il(this.zi.rightOffset)},t.prototype.Il=function(t,i){var n=this;if(void 0===i&&(i=400),!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw new RangeError("animationDuration (optional) must be finite positive number");var e=this.ll,r=performance.now();!function s(){var o=(performance.now()-r)/i,h=o>=1,u=h?t:e+(t-e)*o;n.kn(u),h||setTimeout(s,20)}()},t.prototype.vt=function(t,i){this.sl=!0,this.Qo=t,this.tl.Po(t,i),this.xl()},t.prototype.jl=function(){return this.hl},t.prototype.ql=function(){return this.rl},t.prototype.Ul=function(){return this.el},t.prototype.Cl=function(){return this.Go||0},t.prototype.Hl=function(t){var i=t.Wo();this.Bl(this.oh/i),this.ll=t.qn()-this.Cl(),this.xl(),this.sl=!0,this.gi.Dl(),this.gi.qr()},t.prototype.Yl=function(){var t=this.pl(),i=this.yl();null!==t&&null!==i&&this.Hl(new tn(t,i+this.zi.rightOffset))},t.prototype.$l=function(t){var i=new tn(t.from,t.to);this.Hl(i)},t.prototype.yi=function(t){return void 0!==this.Xu.timeFormatter?this.Xu.timeFormatter(t.Uo):this.Kl.wo(new Date(1e3*t.rt.Eo))},t.prototype.Ll=function(){var t=this.gi.W(),i=t.handleScroll,n=t.handleScale;return!(i.horzTouchDrag||i.mouseWheel||i.pressedMouseMove||i.vertTouchDrag||n.axisDoubleClickReset||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)},t.prototype.pl=function(){return 0===this.Qo.length?null:0},t.prototype.yl=function(){return 0===this.Qo.length?null:this.Qo.length-1},t.prototype.Xl=function(t){return(this.oh-1-t)/this.fl},t.prototype.Tl=function(t){var i=this.Xl(t),n=this.Cl()+this.ll-i;return Math.round(1e6*n)/1e6},t.prototype.Bl=function(t){var i=this.fl;this.fl=t,this.Nl(),i!==this.fl&&(this.sl=!0,this.Zl())},t.prototype.Ml=function(){if(this.sl)if(this.sl=!1,this.wi())this.Jl(sn.Jo());else{var t=this.Cl(),i=this.oh/this.fl,n=this.ll+t,e=new tn(n-i+1,n);this.Jl(new sn(e))}},t.prototype.Nl=function(){var t=this.Gl();if(this.fl<t&&(this.fl=t,this.sl=!0),0!==this.oh){var i=.5*this.oh;this.fl>i&&(this.fl=i,this.sl=!0)}},t.prototype.Gl=function(){return this.zi.fixLeftEdge&&this.zi.fixRightEdge&&0!==this.Qo.length?this.oh/this.Qo.length:this.zi.minBarSpacing},t.prototype.xl=function(){var t=this.Ql();this.ll>t&&(this.ll=t,this.sl=!0);var i=this.tf();null!==i&&this.ll<i&&(this.ll=i,this.sl=!0)},t.prototype.tf=function(){var t=this.pl(),i=this.Go;return null===t||null===i?null:t-i-1+(this.zi.fixLeftEdge?this.oh/this.fl:Math.min(2,this.Qo.length))},t.prototype.Ql=function(){return this.zi.fixRightEdge?0:this.oh/this.fl-Math.min(2,this.Qo.length)},t.prototype.Wl=function(){this.ul={Ms:this.Ms(),Al:this.Al()}},t.prototype.zl=function(){this.ul=null},t.prototype.El=function(t){var i=this,n=this.il.get(t.qo);return void 0===n&&(n=new $i((function(t){return i.if(t)})),this.il.set(t.qo,n)),n.wo(t)},t.prototype.if=function(t){var i=function(t,i,n){switch(t){case 0:case 10:return i?n?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return i?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.qo,this.zi.timeVisible,this.zi.secondsVisible);return void 0!==this.zi.tickMarkFormatter?this.zi.tickMarkFormatter(t.Uo,i,this.Xu.locale):function(t,i,n){var e={};switch(i){case 0:e.year="numeric";break;case 1:e.month="short";break;case 2:e.day="numeric";break;case 3:e.hour12=!1,e.hour="2-digit",e.minute="2-digit";break;case 4:e.hour12=!1,e.hour="2-digit",e.minute="2-digit",e.second="2-digit"}var r=void 0===t.Lo?new Date(1e3*t.Eo):new Date(Date.UTC(t.Lo.year,t.Lo.month-1,t.Lo.day));return new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()).toLocaleString(n,e)}(t.rt,i,this.Xu.locale)},t.prototype.Jl=function(t){var i=this.nl;this.nl=t,nn(i.Xo(),this.nl.Xo())||this.hl.m(),nn(i.Zo(),this.nl.Zo())||this.rl.m(),this.Zl()},t.prototype.Zl=function(){this.al=null},t.prototype._l=function(){this.Zl(),this.il.clear()},t.prototype.cl=function(){var t=this.Xu.dateFormat;this.zi.timeVisible?this.Kl=new Ki({bo:t,mo:this.zi.secondsVisible?"%h:%m:%s":"%h:%m",po:"   ",yo:this.Xu.locale}):this.Kl=new Hi(t,this.Xu.locale)},t.prototype.dl=function(){if(this.zi.fixLeftEdge){var t=this.pl();if(null!==t){var i=this.hs();if(null!==i){var n=i.jn()-t;if(n<0){var e=this.ll-n-1;this.kn(e)}this.Nl()}}}},t.prototype.wl=function(){this.xl(),this.Nl()},t}(),un=function(t){function i(i){var n=t.call(this)||this;return n.nf=new Map,n.At=i,n}return C(i,t),i.prototype.Y=function(t){},i.prototype.K=function(t){if(this.At.yt){t.save();for(var i=0,n=0,e=this.At.sf;n<e.length;n++)if(0!==(u=e[n]).Gt.length){t.font=u.T;var r=this.hf(t,u.Gt);r>this.At.Ht?u.Rl=this.At.Ht/r:u.Rl=1,i+=u.rf*u.Rl}var s=0;switch(this.At.ef){case"top":s=0;break;case"center":s=Math.max((this.At.Yt-i)/2,0);break;case"bottom":s=Math.max(this.At.Yt-i,0)}t.fillStyle=this.At.B;for(var o=0,h=this.At.sf;o<h.length;o++){var u=h[o];t.save();var a=0;switch(this.At.uf){case"left":t.textAlign="left",a=u.rf/2;break;case"center":t.textAlign="center",a=this.At.Ht/2;break;case"right":t.textAlign="right",a=this.At.Ht-1-u.rf/2}t.translate(a,s),t.textBaseline="top",t.font=u.T,t.scale(u.Rl,u.Rl),t.fillText(u.Gt,0,u.af),t.restore(),s+=u.rf*u.Rl}t.restore()}},i.prototype.hf=function(t,i){var n=this.lf(t.font),e=n.get(i);return void 0===e&&(e=t.measureText(i).width,n.set(i,e)),e},i.prototype.lf=function(t){var i=this.nf.get(t);return void 0===i&&(i=new Map,this.nf.set(t,i)),i},i}(P),an=function(){function t(t){this.ft=!0,this.Wt={yt:!1,B:"",Yt:0,Ht:0,sf:[],ef:"center",uf:"center"},this.zt=new un(this.Wt),this.Pt=t}return t.prototype.vt=function(){this.ft=!0},t.prototype.dt=function(t,i){return this.ft&&(this.wt(t,i),this.ft=!1),this.zt},t.prototype.wt=function(t,i){var n=this.Pt.W(),e=this.Wt;e.yt=n.visible,e.yt&&(e.B=n.color,e.Ht=i,e.Yt=t,e.uf=n.horzAlign,e.ef=n.vertAlign,e.sf=[{Gt:n.text,T:j(n.fontSize,n.fontFamily,n.fontStyle),rf:1.2*n.fontSize,af:0,Rl:0}])},t}(),ln=function(t){function i(i,n){var e=t.call(this)||this;return e.zi=n,e.Yi=new an(e),e}return C(i,t),i.prototype.sn=function(){return[]},i.prototype.nn=function(){return[this.Yi]},i.prototype.W=function(){return this.zi},i.prototype.rn=function(){this.Yi.vt()},i}(rt);!function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"}(on||(on={}));var fn,cn,pn,vn=function(){function t(t,i){this.ff=[],this.cf=[],this.oh=0,this.vf=null,this._f=null,this.df=new T,this.wf=new T,this.Mf=null,this.bf=t,this.zi=i,this.mf=new F(this),this.Oa=new hn(this,i.timeScale,this.zi.localization),this.ct=new st(this,i.crosshair),this.gf=new Ai(i.crosshair),this.pf=new ln(this,i.watermark),this.yf(),this.ff[0].Ha(2e3),this.kf=this.Nf(0),this.xf=this.Nf(1)}return t.prototype.Ae=function(){this.Cf(new ht(3))},t.prototype.qr=function(){this.Cf(new ht(2))},t.prototype.Ue=function(){this.Cf(new ht(1))},t.prototype.Le=function(t){var i=this.Sf(t);this.Cf(i)},t.prototype.Tf=function(){return this._f},t.prototype.Df=function(t){var i=this._f;this._f=t,null!==i&&this.Le(i.Bf),null!==t&&this.Le(t.Bf)},t.prototype.W=function(){return this.zi},t.prototype.jr=function(t){z(this.zi,t),this.ff.forEach((function(i){return i.Ia(t)})),void 0!==t.timeScale&&this.Oa.jr(t.timeScale),void 0!==t.localization&&this.Oa.vl(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.df.m(),this.kf=this.Nf(0),this.xf=this.Nf(1),this.Ae()},t.prototype.Af=function(t,i){if("left"!==t)if("right"!==t){var n=this.Lf(t);null!==n&&(n.Ct.jr(i),this.df.m())}else this.jr({rightPriceScale:i});else this.jr({leftPriceScale:i})},t.prototype.Lf=function(t){for(var i=0,n=this.ff;i<n.length;i++){var e=n[i],r=e.ja(t);if(null!==r)return{It:e,Ct:r}}return null},t.prototype.bt=function(){return this.Oa},t.prototype.Ef=function(){return this.ff},t.prototype.Ff=function(){return this.pf},t.prototype.Of=function(){return this.ct},t.prototype.Vf=function(){return this.wf},t.prototype.Rf=function(t,i){t.ua(i),this.Dl()},t.prototype.Ya=function(t){this.oh=t,this.Oa.Ya(this.oh),this.ff.forEach((function(i){return i.Ya(t)})),this.Dl()},t.prototype.yf=function(t){var i=new Ji(this.Oa,this);void 0!==t?this.ff.splice(t,0,i):this.ff.push(i);var n=void 0===t?this.ff.length-1:t,e=new ht(3);return e.vn(n,{_n:0,dn:!0}),this.Cf(e),i},t.prototype.io=function(t,i,n){t.io(i,n)},t.prototype.no=function(t,i,n){t.no(i,n),this.Ee(),this.Cf(this.Wf(t,2))},t.prototype.so=function(t,i){t.so(i),this.Cf(this.Wf(t,2))},t.prototype.ho=function(t,i,n){i.ia()||t.ho(i,n)},t.prototype.ro=function(t,i,n){i.ia()||(t.ro(i,n),this.Ee(),this.Cf(this.Wf(t,2)))},t.prototype.eo=function(t,i){i.ia()||(t.eo(i),this.Cf(this.Wf(t,2)))},t.prototype.ao=function(t,i){t.ao(i),this.Cf(this.Wf(t,2))},t.prototype.zf=function(t){this.Oa.pa(t)},t.prototype.Pf=function(t,i){var n=this.bt();if(!n.wi()&&0!==i){var e=n.Ht();t=Math.max(1,Math.min(t,e)),n.Rl(t,i),this.Dl()}},t.prototype.If=function(t){this.jf(0),this.qf(t),this.Uf()},t.prototype.Hf=function(t){this.Oa.ya(t),this.Dl()},t.prototype.Yf=function(){this.Oa.ka(),this.qr()},t.prototype.jf=function(t){this.vf=t,this.Oa.Na(t)},t.prototype.qf=function(t){var i=!1;return null!==this.vf&&Math.abs(t-this.vf)>20&&(this.vf=null,i=!0),this.Oa.xa(t),this.Dl(),i},t.prototype.Uf=function(){this.Oa.Ca(),this.qr(),this.vf=null},t.prototype._t=function(){return this.cf},t.prototype.$f=function(t,i,n){this.ct.$i(t,i);var e=NaN,r=this.Oa.Sl(t),s=this.Oa.hs();null!==s&&(r=Math.min(Math.max(s.jn(),r),s.qn()));var o=n.ji(),h=o.kt();null!==h&&(e=o.qi(i,h)),e=this.gf.su(e,r,n),this.ct.Ji(r,e,n),this.Ue(),this.wf.m(this.ct.Mt(),{x:t,y:i})},t.prototype.Kf=function(){this.Of().Qi(),this.Ue(),this.wf.m(null,null)},t.prototype.Ee=function(){var t=this.ct.It();if(null!==t){var i=this.ct.Xi(),n=this.ct.Zi();this.$f(i,n,t)}this.ct.rn()},t.prototype.Xf=function(t,i,n){var e=this.Oa.Ui(0);void 0!==i&&void 0!==n&&this.Oa.vt(i,n);var r=this.Oa.Ui(0),s=this.Oa.Cl(),o=this.Oa.hs();if(null!==o&&null!==e&&null!==r){var h=o.Xh(s),u=e.Eo>r.Eo,a=null!==t&&t>s&&!u,l=h&&this.Oa.W().shiftVisibleRangeOnNewBar;if(a&&!l){var f=t-s;this.Oa.kn(this.Oa.Al()-f)}}this.Oa.Vl(t)},t.prototype.Ve=function(t){null!==t&&t.lo()},t.prototype.wh=function(t){var i=this.ff.find((function(i){return i.da().includes(t)}));return void 0===i?null:i},t.prototype.Dl=function(){this.pf.rn(),this.ff.forEach((function(t){return t.lo()})),this.Ee()},t.prototype.p=function(){this.ff.forEach((function(t){return t.p()})),this.ff.length=0,this.zi.localization.priceFormatter=void 0,this.zi.localization.timeFormatter=void 0},t.prototype.Zf=function(){return this.mf},t.prototype.gh=function(){return this.mf.W()},t.prototype.qa=function(){return this.df},t.prototype.Jf=function(t,i){var n=this.ff[0],e=this.Gf(i,t,n);return this.cf.push(e),1===this.cf.length?this.Ae():this.qr(),e},t.prototype.Qf=function(t){var i=this.wh(t),n=this.cf.indexOf(t);l(-1!==n,"Series not found"),this.cf.splice(n,1),c(i).ba(t),t.p&&t.p()},t.prototype.Be=function(t,i){var n=c(this.wh(t));n.ba(t);var e=this.Lf(i);if(null===e){var r=t.xi();n.wa(t,i,r)}else r=e.It===n?t.xi():void 0,e.It.wa(t,i,r)},t.prototype.Yl=function(){var t=new ht(2);t.bn(),this.Cf(t)},t.prototype.tc=function(t){var i=new ht(2);i.gn(t),this.Cf(i)},t.prototype.pn=function(){var t=new ht(2);t.pn(),this.Cf(t)},t.prototype.yn=function(t){var i=new ht(2);i.yn(t),this.Cf(i)},t.prototype.kn=function(t){var i=new ht(2);i.kn(t),this.Cf(i)},t.prototype.ic=function(){return this.zi.rightPriceScale.visible?"right":"left"},t.prototype.nc=function(){return this.xf},t.prototype.sc=function(){return this.kf},t.prototype.Dt=function(t){var i=this.xf,n=this.kf;if(i===n)return i;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.Mf||this.Mf.Wn!==n||this.Mf.zn!==i)this.Mf={Wn:n,zn:i,hc:new Map};else{var e=this.Mf.hc.get(t);if(void 0!==e)return e}var r=function(t,i,n){var e=_(t),r=e[0],s=e[1],o=e[2],h=e[3],u=_(i),a=u[0],l=u[1],f=u[2],c=u[3],p=[d(r+n*(a-r)),d(s+n*(l-s)),d(o+n*(f-o)),y(h+n*(c-h))];return"rgba(".concat(p[0],", ").concat(p[1],", ").concat(p[2],", ").concat(p[3],")")}(n,i,t/100);return this.Mf.hc.set(t,r),r},t.prototype.Wf=function(t,i){var n=new ht(i);if(null!==t){var e=this.ff.indexOf(t);n.vn(e,{_n:i})}return n},t.prototype.Sf=function(t,i){return void 0===i&&(i=2),this.Wf(this.wh(t),i)},t.prototype.Cf=function(t){this.bf&&this.bf(t),this.ff.forEach((function(t){return t.co().du().vt()}))},t.prototype.Gf=function(t,i,n){var e=new xi(this,t,i),r=void 0!==t.priceScaleId?t.priceScaleId:this.ic();return n.wa(e,r),ot(r)||e.jr(t),e},t.prototype.Nf=function(t){var i=this.zi.layout;return"gradient"===i.background.type?0===t?i.background.topColor:i.background.bottomColor:i.background.color},t}();function dn(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}function yn(t){return!k(t)&&!L(t)}function wn(t){return k(t)}!function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"}(fn||(fn={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(cn||(cn={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(pn||(pn={}));var gn=function(){function t(t,i){this.Ft=t,this.Ot=i}return t.prototype.kr=function(t){return this.Ft===t.Ft&&this.Ot===t.Ot},t}();function Mn(t){return t.ownerDocument&&t.ownerDocument.defaultView&&t.ownerDocument.defaultView.devicePixelRatio||1}function mn(t){var i=c(t.getContext("2d"));return i.setTransform(1,0,0,1,0,0),i}function _n(t,i){var n=t.createElement("canvas"),e=Mn(n);return n.style.width="".concat(i.Ft,"px"),n.style.height="".concat(i.Ot,"px"),n.width=i.Ft*e,n.height=i.Ot*e,n}function bn(t,i){var n=c(t.ownerDocument).createElement("canvas");t.appendChild(n);var r,s=(void 0===(r={allowDownsampling:!1})&&(r=e),new h(n,r));return s.resizeCanvas({width:i.Ft,height:i.Ot}),s}function Sn(t,i){return t.rc-i.rc}function Cn(t,i,n){var e=(t.rc-i.rc)/(t.rt-i.rt);return Math.sign(e)*Math.min(Math.abs(e),n)}var xn=function(){function t(t,i,n,e){this.ec=null,this.uc=null,this.ac=null,this.oc=null,this.lc=null,this.fc=0,this.cc=0,this.vc=!1,this._c=t,this.dc=i,this.wc=n,this.Sn=e}return t.prototype.Mc=function(t,i){if(null!==this.ec){if(this.ec.rt===i)return void(this.ec.rc=t);if(Math.abs(this.ec.rc-t)<this.Sn)return}this.oc=this.ac,this.ac=this.uc,this.uc=this.ec,this.ec={rt:i,rc:t}},t.prototype.Bh=function(t,i){if(null!==this.ec&&null!==this.uc&&!(i-this.ec.rt>50)){var n=0,e=Cn(this.ec,this.uc,this.dc),r=Sn(this.ec,this.uc),s=[e],o=[r];if(n+=r,null!==this.ac){var h=Cn(this.uc,this.ac,this.dc);if(Math.sign(h)===Math.sign(e)){var u=Sn(this.uc,this.ac);if(s.push(h),o.push(u),n+=u,null!==this.oc){var a=Cn(this.ac,this.oc,this.dc);if(Math.sign(a)===Math.sign(e)){var l=Sn(this.ac,this.oc);s.push(a),o.push(l),n+=l}}}}for(var f,c,p,v=0,d=0;d<s.length;++d)v+=o[d]/n*s[d];Math.abs(v)<this._c||(this.lc={rc:t,rt:i},this.cc=v,this.fc=(f=Math.abs(v),c=this.wc,p=Math.log(c),Math.log(1*p/-f)/p))}},t.prototype.bc=function(t){var i=c(this.lc),n=t-i.rt;return i.rc+this.cc*(Math.pow(this.wc,n)-1)/Math.log(this.wc)},t.prototype.mc=function(t){return null===this.lc||this.gc(t)===this.fc},t.prototype.yc=function(){return this.vc},t.prototype.kc=function(){this.vc=!0},t.prototype.gc=function(t){var i=t-c(this.lc).rt;return Math.min(i,this.fc)},t}(),An="undefined"!=typeof window;function Tn(){return!!An&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function zn(){return!!An&&/iPhone|iPad|iPod/.test(window.navigator.platform)}var kn=function(){function t(t,i,n){var e=this;this.Nc=0,this.xc=null,this.Cc={tt:Number.NEGATIVE_INFINITY,it:Number.POSITIVE_INFINITY},this.Sc=0,this.Tc=null,this.Dc={tt:Number.NEGATIVE_INFINITY,it:Number.POSITIVE_INFINITY},this.Bc=null,this.Ac=!1,this.Lc=null,this.Ec=null,this.Fc=!1,this.Oc=!1,this.Vc=!1,this.Rc=null,this.Wc=null,this.zc=null,this.Pc=null,this.Ic=null,this.jc=null,this.qc=null,this.Uc=0,this.Hc=!1,this.Yc=!1,this.$c=!1,this.Kc=0,this.Xc=null,this.Zc=!zn(),this.Jc=function(t){e.Gc(t)},this.Qc=function(t){if(e.tv(t)){var i=e.iv(t);++e.Sc,e.Tc&&e.Sc>1&&(e.sv(On(t),e.Dc).nv<30&&!e.Vc&&e.hv(i,e.ev.rv),e.uv())}else i=e.iv(t),++e.Nc,e.xc&&e.Nc>1&&(e.sv(On(t),e.Cc).nv<5&&!e.Oc&&e.av(i,e.ev.ov),e.lv())},this.fv=t,this.ev=i,this.zi=n,this.cv()}return t.prototype.p=function(){null!==this.Rc&&(this.Rc(),this.Rc=null),null!==this.Wc&&(this.Wc(),this.Wc=null),null!==this.Pc&&(this.Pc(),this.Pc=null),null!==this.Ic&&(this.Ic(),this.Ic=null),null!==this.jc&&(this.jc(),this.jc=null),null!==this.zc&&(this.zc(),this.zc=null),this.vv(),this.lv()},t.prototype._v=function(t){var i=this;this.Pc&&this.Pc();var n=this.dv.bind(this);if(this.Pc=function(){i.fv.removeEventListener("mousemove",n)},this.fv.addEventListener("mousemove",n),!this.tv(t)){var e=this.iv(t);this.av(e,this.ev.wv),this.Zc=!0}},t.prototype.lv=function(){null!==this.xc&&clearTimeout(this.xc),this.Nc=0,this.xc=null,this.Cc={tt:Number.NEGATIVE_INFINITY,it:Number.POSITIVE_INFINITY}},t.prototype.uv=function(){null!==this.Tc&&clearTimeout(this.Tc),this.Sc=0,this.Tc=null,this.Dc={tt:Number.NEGATIVE_INFINITY,it:Number.POSITIVE_INFINITY}},t.prototype.dv=function(t){if(!this.$c&&null===this.Ec&&!this.tv(t)){var i=this.iv(t);this.av(i,this.ev.Mv),this.Zc=!0}},t.prototype.bv=function(t){var i=Nn(t.changedTouches,c(this.Xc));if(null!==i&&(this.Kc=Dn(t),null===this.qc&&!this.Yc)){this.Hc=!0;var n=this.sv(On(i),c(this.Ec)),e=n.mv,r=n.gv,s=n.nv;if(this.Fc||!(s<5)){if(!this.Fc){var o=.5*e,h=r>=o&&!this.zi.pv(),u=o>r&&!this.zi.yv();h||u||(this.Yc=!0),this.Fc=!0,this.Vc=!0,this.vv(),this.uv()}if(!this.Yc){var a=this.iv(t,i);this.hv(a,this.ev.kv),Ln(t)}}}},t.prototype.Nv=function(t){if(0===t.button&&(this.sv(On(t),c(this.Lc)).nv>=5&&(this.Oc=!0,this.lv()),this.Oc)){var i=this.iv(t);this.av(i,this.ev.xv)}},t.prototype.sv=function(t,i){var n=Math.abs(i.tt-t.tt),e=Math.abs(i.it-t.it);return{mv:n,gv:e,nv:n+e}},t.prototype.Cv=function(t){var i=Nn(t.changedTouches,c(this.Xc));if(null===i&&0===t.touches.length&&(i=t.changedTouches[0]),null!==i){this.Xc=null,this.Kc=Dn(t),this.vv(),this.Ec=null,this.jc&&(this.jc(),this.jc=null);var n=this.iv(t,i);this.hv(n,this.ev.Sv),++this.Sc,this.Tc&&this.Sc>1?(this.sv(On(i),this.Dc).nv<30&&!this.Vc&&this.hv(n,this.ev.rv),this.uv()):this.Vc||(this.hv(n,this.ev.Tv),this.ev.Tv&&Ln(t)),0===this.Sc&&Ln(t),0===t.touches.length&&this.Ac&&(this.Ac=!1,Ln(t))}},t.prototype.Gc=function(t){if(0===t.button){var i=this.iv(t);this.Lc=null,this.$c=!1,this.Ic&&(this.Ic(),this.Ic=null),Tn()&&this.fv.ownerDocument.documentElement.removeEventListener("mouseleave",this.Jc),this.tv(t)||(this.av(i,this.ev.Dv),++this.Nc,this.xc&&this.Nc>1?(this.sv(On(t),this.Cc).nv<5&&!this.Oc&&this.av(i,this.ev.ov),this.lv()):this.Oc||this.av(i,this.ev.Bv))}},t.prototype.vv=function(){null!==this.Bc&&(clearTimeout(this.Bc),this.Bc=null)},t.prototype.Av=function(t){if(null===this.Xc){var i=t.changedTouches[0];this.Xc=i.identifier,this.Kc=Dn(t);var n=this.fv.ownerDocument.documentElement;this.Vc=!1,this.Fc=!1,this.Yc=!1,this.Ec=On(i),this.jc&&(this.jc(),this.jc=null);var e=this.bv.bind(this),r=this.Cv.bind(this);this.jc=function(){n.removeEventListener("touchmove",e),n.removeEventListener("touchend",r)},n.addEventListener("touchmove",e,{passive:!1}),n.addEventListener("touchend",r,{passive:!1}),this.vv(),this.Bc=setTimeout(this.Lv.bind(this,t),240);var s=this.iv(t,i);this.hv(s,this.ev.Ev),this.Tc||(this.Sc=0,this.Tc=setTimeout(this.uv.bind(this),500),this.Dc=On(i))}},t.prototype.Fv=function(t){if(0===t.button){var i=this.fv.ownerDocument.documentElement;Tn()&&i.addEventListener("mouseleave",this.Jc),this.Oc=!1,this.Lc=On(t),this.Ic&&(this.Ic(),this.Ic=null);var n=this.Nv.bind(this),e=this.Gc.bind(this);if(this.Ic=function(){i.removeEventListener("mousemove",n),i.removeEventListener("mouseup",e)},i.addEventListener("mousemove",n),i.addEventListener("mouseup",e),this.$c=!0,!this.tv(t)){var r=this.iv(t);this.av(r,this.ev.Ov),this.xc||(this.Nc=0,this.xc=setTimeout(this.lv.bind(this),500),this.Cc=On(t))}}},t.prototype.cv=function(){var t=this;this.fv.addEventListener("mouseenter",this._v.bind(this)),this.fv.addEventListener("touchcancel",this.vv.bind(this));var i=this.fv.ownerDocument,n=function(i){t.ev.Vv&&(i.target&&t.fv.contains(i.target)||t.ev.Vv())};this.Wc=function(){i.removeEventListener("touchstart",n)},this.Rc=function(){i.removeEventListener("mousedown",n)},i.addEventListener("mousedown",n),i.addEventListener("touchstart",n,{passive:!0}),zn()&&(this.zc=function(){t.fv.removeEventListener("dblclick",t.Qc)},this.fv.addEventListener("dblclick",this.Qc)),this.fv.addEventListener("mouseleave",this.Rv.bind(this)),this.fv.addEventListener("touchstart",this.Av.bind(this),{passive:!0}),function(t){An&&void 0!==window.chrome&&t.addEventListener("mousedown",(function(t){if(1===t.button)return t.preventDefault(),!1}))}(this.fv),this.fv.addEventListener("mousedown",this.Fv.bind(this)),this.Wv(),this.fv.addEventListener("touchmove",(function(){}),{passive:!1})},t.prototype.Wv=function(){var t=this;void 0===this.ev.zv&&void 0===this.ev.Pv&&void 0===this.ev.Iv||(this.fv.addEventListener("touchstart",(function(i){return t.jv(i.touches)}),{passive:!0}),this.fv.addEventListener("touchmove",(function(i){if(2===i.touches.length&&null!==t.qc&&void 0!==t.ev.Pv){var n=En(i.touches[0],i.touches[1])/t.Uc;t.ev.Pv(t.qc,n),Ln(i)}}),{passive:!1}),this.fv.addEventListener("touchend",(function(i){t.jv(i.touches)})))},t.prototype.jv=function(t){1===t.length&&(this.Hc=!1),2!==t.length||this.Hc||this.Ac?this.qv():this.Uv(t)},t.prototype.Uv=function(t){var i=this.fv.getBoundingClientRect()||{left:0,top:0};this.qc={tt:(t[0].clientX-i.left+(t[1].clientX-i.left))/2,it:(t[0].clientY-i.top+(t[1].clientY-i.top))/2},this.Uc=En(t[0],t[1]),void 0!==this.ev.zv&&this.ev.zv(),this.vv()},t.prototype.qv=function(){null!==this.qc&&(this.qc=null,void 0!==this.ev.Iv&&this.ev.Iv())},t.prototype.Rv=function(t){if(this.Pc&&this.Pc(),!this.tv(t)&&this.Zc){var i=this.iv(t);this.av(i,this.ev.Hv),this.Zc=!zn()}},t.prototype.Lv=function(t){var i=Nn(t.touches,c(this.Xc));if(null!==i){var n=this.iv(t,i);this.hv(n,this.ev.Yv),this.Vc=!0,this.Ac=!0}},t.prototype.tv=function(t){return t.sourceCapabilities&&void 0!==t.sourceCapabilities.firesTouchEvents?t.sourceCapabilities.firesTouchEvents:Dn(t)<this.Kc+500},t.prototype.hv=function(t,i){i&&i.call(this.ev,t)},t.prototype.av=function(t,i){i&&i.call(this.ev,t)},t.prototype.iv=function(t,i){var n=i||t,e=this.fv.getBoundingClientRect()||{left:0,top:0};return{$v:n.clientX,Kv:n.clientY,Xv:n.pageX,Zv:n.pageY,Jv:n.screenX,Gv:n.screenY,Qv:n.clientX-e.left,t_:n.clientY-e.top,i_:t.ctrlKey,n_:t.altKey,s_:t.shiftKey,h_:t.metaKey,r_:!t.type.startsWith("mouse")&&"contextmenu"!==t.type&&"click"!==t.type,e_:t.type,u_:n.target,a_:t.view,o_:function(){"touchstart"!==t.type&&Ln(t)}}},t}();function En(t,i){var n=t.clientX-i.clientX,e=t.clientY-i.clientY;return Math.sqrt(n*n+e*e)}function Ln(t){t.cancelable&&t.preventDefault()}function On(t){return{tt:t.pageX,it:t.pageY}}function Dn(t){return t.timeStamp||performance.now()}function Nn(t,i){for(var n=0;n<t.length;++n)if(t[n].identifier===i)return t[n];return null}var Wn=function(){function t(t,i,n,e){this.lh=new Gt(200),this.P=0,this.l_="",this.Jh="",this.rh=[],this.f_=new Map,this.P=t,this.l_=i,this.Jh=j(t,n,e)}return t.prototype.p=function(){this.lh.eh(),this.rh=[],this.f_.clear()},t.prototype.c_=function(t,i,n,e,r){var s=this.v_(t,i);if("left"!==r){var o=Mn(t.canvas);n-=Math.floor(s.__*o)}e-=Math.floor(s.Yt/2),t.drawImage(s.d_,n,e,s.Ht,s.Yt)},t.prototype.v_=function(t,i){var n,e=this;if(this.f_.has(i))n=f(this.f_.get(i));else{if(this.rh.length>=200){var r=f(this.rh.shift());this.f_.delete(r)}var s=Mn(t.canvas),o=Math.ceil(this.P/4.5),h=Math.round(this.P/10),u=Math.ceil(this.lh.Qt(t,i)),a=Lt(Math.round(u+2*o)),l=Lt(this.P+2*o),c=_n(document,new gn(a,l));n={Gt:i,__:Math.round(Math.max(1,u)),Ht:Math.ceil(a*s),Yt:Math.ceil(l*s),d_:c},0!==u&&(this.rh.push(n.Gt),this.f_.set(n.Gt,n)),U(t=mn(n.d_),s,(function(){t.font=e.Jh,t.fillStyle=e.l_,t.fillText(i,0,l-o-h)}))}return n},t}(),Rn=function(){function t(t,i,n,e){var r=this;this._i=null,this.w_=null,this.M_=!1,this.b_=new Gt(50),this.m_=new Wn(11,"#000"),this.l_=null,this.Jh=null,this.g_=0,this.p_=!1,this.y_=function(){r.k_(r.mf.W()),r.p_||r.Di.N_().jt().qr()},this.x_=function(){r.p_||r.Di.N_().jt().qr()},this.Di=t,this.zi=i,this.mf=n,this.C_="left"===e,this.S_=document.createElement("div"),this.S_.style.height="100%",this.S_.style.overflow="hidden",this.S_.style.width="25px",this.S_.style.left="0",this.S_.style.position="relative",this.T_=bn(this.S_,new gn(16,16)),this.T_.subscribeCanvasConfigured(this.y_);var s=this.T_.canvas;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.D_=bn(this.S_,new gn(16,16)),this.D_.subscribeCanvasConfigured(this.x_);var o=this.D_.canvas;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";var h={Ov:this.B_.bind(this),Ev:this.B_.bind(this),xv:this.A_.bind(this),kv:this.A_.bind(this),Vv:this.L_.bind(this),Dv:this.E_.bind(this),Sv:this.E_.bind(this),ov:this.F_.bind(this),rv:this.F_.bind(this),wv:this.O_.bind(this),Hv:this.V_.bind(this)};this.R_=new kn(this.D_.canvas,h,{pv:function(){return!1},yv:function(){return!0}})}return t.prototype.p=function(){this.R_.p(),this.D_.unsubscribeCanvasConfigured(this.x_),this.D_.destroy(),this.T_.unsubscribeCanvasConfigured(this.y_),this.T_.destroy(),null!==this._i&&this._i.ga().M(this),this._i=null,this.m_.p()},t.prototype.W_=function(){return this.S_},t.prototype.ht=function(){return c(this._i).W().borderColor},t.prototype.z_=function(){return this.zi.textColor},t.prototype.S=function(){return this.zi.fontSize},t.prototype.P_=function(){return j(this.S(),this.zi.fontFamily)},t.prototype.I_=function(){var t=this.mf.W(),i=this.l_!==t.B,n=this.Jh!==t.T;return(i||n)&&(this.k_(t),this.l_=t.B),n&&(this.b_.eh(),this.Jh=t.T),t},t.prototype.j_=function(){if(null===this._i)return 0;var t=0,i=this.I_(),n=mn(this.T_.canvas),e=this._i._u();n.font=this.P_(),e.length>0&&(t=Math.max(this.b_.Qt(n,e[0].Tu),this.b_.Qt(n,e[e.length-1].Tu)));for(var r=this.q_(),s=r.length;s--;){var o=this.b_.Qt(n,r[s].Gt());o>t&&(t=o)}var h=this._i.kt();if(null!==h&&null!==this.w_){var u=this._i.qi(1,h),a=this._i.qi(this.w_.Ot-2,h);t=Math.max(t,this.b_.Qt(n,this._i.Mi(Math.floor(Math.min(u,a))+.11111111111111,h)),this.b_.Qt(n,this._i.Mi(Math.ceil(Math.max(u,a))-.11111111111111,h)))}var l=t||34,f=Math.ceil(i.N+i.C+i.L+i.F+l);return f+f%2},t.prototype.U_=function(t){if(t.Ft<0||t.Ot<0)throw new Error("Try to set invalid size to PriceAxisWidget "+JSON.stringify(t));null!==this.w_&&this.w_.kr(t)||(this.w_=t,this.p_=!0,this.T_.resizeCanvas({width:t.Ft,height:t.Ot}),this.D_.resizeCanvas({width:t.Ft,height:t.Ot}),this.p_=!1,this.S_.style.width=t.Ft+"px",this.S_.style.height=t.Ot+"px",this.S_.style.minWidth=t.Ft+"px")},t.prototype.H_=function(){return c(this.w_).Ft},t.prototype.Si=function(t){this._i!==t&&(null!==this._i&&this._i.ga().M(this),this._i=t,t.ga().u(this.zu.bind(this),this))},t.prototype.Ct=function(){return this._i},t.prototype.eh=function(){var t=this.Di.Y_();this.Di.N_().jt().ao(t,c(this.Ct()))},t.prototype.K_=function(t){if(null!==this.w_){if(1!==t){var i=mn(this.T_.canvas);this.X_(),this.Z_(i,this.T_.pixelRatio),this.Hs(i,this.T_.pixelRatio),this.J_(i,this.T_.pixelRatio),this.G_(i,this.T_.pixelRatio)}var n=mn(this.D_.canvas),e=this.w_.Ft,r=this.w_.Ot;U(n,this.D_.pixelRatio,(function(){n.clearRect(0,0,e,r)})),this.Q_(n,this.D_.pixelRatio)}},t.prototype.td=function(){return this.T_.canvas},t.prototype.vt=function(){var t;null===(t=this._i)||void 0===t||t._u()},t.prototype.B_=function(t){if(null!==this._i&&!this._i.wi()&&this.Di.N_().W().handleScale.axisPressedMouseMove.price){var i=this.Di.N_().jt(),n=this.Di.Y_();this.M_=!0,i.io(n,this._i,t.t_)}},t.prototype.A_=function(t){if(null!==this._i&&this.Di.N_().W().handleScale.axisPressedMouseMove.price){var i=this.Di.N_().jt(),n=this.Di.Y_(),e=this._i;i.no(n,e,t.t_)}},t.prototype.L_=function(){if(null!==this._i&&this.Di.N_().W().handleScale.axisPressedMouseMove.price){var t=this.Di.N_().jt(),i=this.Di.Y_(),n=this._i;this.M_&&(this.M_=!1,t.so(i,n))}},t.prototype.E_=function(t){if(null!==this._i&&this.Di.N_().W().handleScale.axisPressedMouseMove.price){var i=this.Di.N_().jt(),n=this.Di.Y_();this.M_=!1,i.so(n,this._i)}},t.prototype.F_=function(t){this.Di.N_().W().handleScale.axisDoubleClickReset&&this.eh()},t.prototype.O_=function(t){null!==this._i&&(!this.Di.N_().jt().W().handleScale.axisPressedMouseMove.price||this._i.br()||this._i.na()||this.nd(1))},t.prototype.V_=function(t){this.nd(0)},t.prototype.q_=function(){var t=this,i=[],n=null===this._i?void 0:this._i;return function(e){for(var r=0;r<e.length;++r)for(var s=e[r].sn(t.Di.Y_(),n),o=0;o<s.length;o++)i.push(s[o])}(this.Di.Y_().da()),i},t.prototype.Z_=function(t,i){var n=this;if(null!==this.w_){var e=this.w_.Ft,r=this.w_.Ot;U(t,i,(function(){var i=n.Di.Y_().jt(),s=i.sc(),o=i.nc();s===o?H(t,0,0,e,r,s):Z(t,0,0,e,r,s,o)}))}},t.prototype.Hs=function(t,i){if(null!==this.w_&&null!==this._i&&this._i.W().borderVisible){t.save(),t.fillStyle=this.ht();var n,e=Math.max(1,Math.floor(this.I_().N*i));n=this.C_?Math.floor(this.w_.Ft*i)-e:0,t.fillRect(n,0,e,Math.ceil(this.w_.Ot*i)),t.restore()}},t.prototype.J_=function(t,i){if(null!==this.w_&&null!==this._i){var n=this._i._u();t.save(),t.strokeStyle=this.ht(),t.font=this.P_(),t.fillStyle=this.ht();var e=this.I_(),r=this._i.W().borderVisible&&this._i.W().drawTicks,s=this.C_?Math.floor((this.w_.Ft-e.C)*i-e.N*i):Math.floor(e.N*i),o=this.C_?Math.round(s-e.L*i):Math.round(s+e.C*i+e.L*i),h=this.C_?"right":"left",u=Math.max(1,Math.floor(i)),a=Math.floor(.5*i);if(r){var l=Math.round(e.C*i);t.beginPath();for(var f=0,c=n;f<c.length;f++){var p=c[f];t.rect(s,Math.round(p.ou*i)-a,l,u)}t.fill()}t.fillStyle=this.z_();for(var v=0,d=n;v<d.length;v++)p=d[v],this.m_.c_(t,p.Tu,o,Math.round(p.ou*i),h);t.restore()}},t.prototype.X_=function(){if(null!==this.w_&&null!==this._i){var t=this.w_.Ot/2,i=[],n=this._i.da().slice(),e=this.Di.Y_(),r=this.I_();this._i===e.bh()&&this.Di.Y_().da().forEach((function(t){e.Mh(t)&&n.push(t)}));var s=this._i.hu()[0],o=this._i;n.forEach((function(n){var r=n.sn(e,o);r.forEach((function(t){t.oi(null),t.li()&&i.push(t)})),s===n&&r.length>0&&(t=r[0].ti())}));var h=i.filter((function(i){return i.ti()<=t})),u=i.filter((function(i){return i.ti()>t}));if(h.sort((function(t,i){return i.ti()-t.ti()})),h.length&&u.length&&u.push(h[0]),u.sort((function(t,i){return t.ti()-i.ti()})),i.forEach((function(t){return t.oi(t.ti())})),this._i.W().alignLabels){for(var a=1;a<h.length;a++){var l=h[a],f=(p=h[a-1]).Yt(r,!1);l.ti()>(v=p.ai())-f&&l.oi(v-f)}for(var c=1;c<u.length;c++){var p,v;l=u[c],f=(p=u[c-1]).Yt(r,!0),l.ti()<(v=p.ai())+f&&l.oi(v+f)}}}},t.prototype.G_=function(t,i){var n=this;if(null!==this.w_){t.save();var e=this.w_,r=this.q_(),s=this.I_(),o=this.C_?"right":"left";r.forEach((function(r){if(r.fi()){var h=r.dt(c(n._i));t.save(),h.H(t,s,n.b_,e.Ft,o,i),t.restore()}})),t.restore()}},t.prototype.Q_=function(t,i){var n=this;if(null!==this.w_&&null!==this._i){t.save();var e=this.w_,r=this.Di.N_().jt(),s=[],o=this.Di.Y_(),h=r.Of().sn(o,this._i);h.length&&s.push(h);var u=this.I_(),a=this.C_?"right":"left";s.forEach((function(r){r.forEach((function(r){t.save(),r.dt(c(n._i)).H(t,u,n.b_,e.Ft,a,i),t.restore()}))})),t.restore()}},t.prototype.nd=function(t){this.S_.style.cursor=1===t?"ns-resize":"default"},t.prototype.zu=function(){var t=this.j_();this.g_<t&&this.Di.N_().jt().Ae(),this.g_=t},t.prototype.k_=function(t){this.m_.p(),this.m_=new Wn(t.S,t.B,t.D)},t}();function jn(t,i,n,e,r){t.$&&t.$(i,n,e,r)}function Fn(t,i,n,e,r){t.H(i,n,e,r)}function Bn(t,i){return t.nn(i)}function Pn(t,i){return void 0!==t.qe?t.qe(i):[]}var In=function(){function t(t,i){var n=this;this.w_=new gn(0,0),this.sd=null,this.hd=null,this.rd=null,this.ed=!1,this.ud=new T,this.ad=0,this.od=!1,this.ld=null,this.fd=!1,this.vd=null,this._d=null,this.p_=!1,this.y_=function(){n.p_||null===n.dd||n.gi().qr()},this.x_=function(){n.p_||null===n.dd||n.gi().qr()},this.wd=t,this.dd=i,this.dd.fo().u(this.Md.bind(this),this,!0),this.bd=document.createElement("td"),this.bd.style.padding="0",this.bd.style.position="relative";var e=document.createElement("div");e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this.md=document.createElement("td"),this.md.style.padding="0",this.gd=document.createElement("td"),this.gd.style.padding="0",this.bd.appendChild(e),this.T_=bn(e,new gn(16,16)),this.T_.subscribeCanvasConfigured(this.y_);var r=this.T_.canvas;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.D_=bn(e,new gn(16,16)),this.D_.subscribeCanvasConfigured(this.x_);var s=this.D_.canvas;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.pd=document.createElement("tr"),this.pd.appendChild(this.md),this.pd.appendChild(this.bd),this.pd.appendChild(this.gd),this.yd(),this.R_=new kn(this.D_.canvas,this,{pv:function(){return null===n.ld&&!n.wd.W().handleScroll.vertTouchDrag},yv:function(){return null===n.ld&&!n.wd.W().handleScroll.horzTouchDrag}})}return t.prototype.p=function(){null!==this.sd&&this.sd.p(),null!==this.hd&&this.hd.p(),this.D_.unsubscribeCanvasConfigured(this.x_),this.D_.destroy(),this.T_.unsubscribeCanvasConfigured(this.y_),this.T_.destroy(),null!==this.dd&&this.dd.fo().M(this),this.R_.p()},t.prototype.Y_=function(){return c(this.dd)},t.prototype.kd=function(i){null!==this.dd&&this.dd.fo().M(this),this.dd=i,null!==this.dd&&this.dd.fo().u(t.prototype.Md.bind(this),this,!0),this.yd()},t.prototype.N_=function(){return this.wd},t.prototype.W_=function(){return this.pd},t.prototype.yd=function(){if(null!==this.dd&&(this.Nd(),0!==this.gi()._t().length)){if(null!==this.sd){var t=this.dd.Ga();this.sd.Si(c(t))}if(null!==this.hd){var i=this.dd.Qa();this.hd.Si(c(i))}}},t.prototype.xd=function(){null!==this.sd&&this.sd.vt(),null!==this.hd&&this.hd.vt()},t.prototype.Ua=function(){return null!==this.dd?this.dd.Ua():0},t.prototype.Ha=function(t){this.dd&&this.dd.Ha(t)},t.prototype.wv=function(t){if(this.dd){this.Cd();var i=t.Qv,n=t.t_;this.Sd(i,n)}},t.prototype.Ov=function(t){this.Cd(),this.Td(),this.Sd(t.Qv,t.t_)},t.prototype.Mv=function(t){if(this.dd){this.Cd();var i=t.Qv,n=t.t_;this.Sd(i,n);var e=this.Gh(i,n);this.gi().Df(e&&{Bf:e.Bf,Dd:e.Dd})}},t.prototype.Bv=function(t){if(null!==this.dd){this.Cd();var i=t.Qv,n=t.t_;if(this.ud.g()){var e=this.gi().Of().Mt();this.ud.m(e,{x:i,y:n})}}},t.prototype.xv=function(t){this.Cd(),this.Bd(t),this.Sd(t.Qv,t.t_)},t.prototype.Dv=function(t){null!==this.dd&&(this.Cd(),this.od=!1,this.Ad(t))},t.prototype.Yv=function(t){if(this.od=!0,null===this.ld){var i={x:t.Qv,y:t.t_};this.Ld(i,i)}},t.prototype.Hv=function(t){null!==this.dd&&(this.Cd(),this.dd.jt().Df(null),this.Ed())},t.prototype.Fd=function(){return this.ud},t.prototype.zv=function(){this.ad=1,this.Od()},t.prototype.Pv=function(t,i){if(this.wd.W().handleScale.pinch){var n=5*(i-this.ad);this.ad=i,this.gi().Pf(t.tt,n)}},t.prototype.Ev=function(t){if(this.od=!1,this.fd=null!==this.ld,this.Td(),null!==this.ld){var i=this.gi().Of();this.vd={x:i.$t(),y:i.Kt()},this.ld={x:t.Qv,y:t.t_}}},t.prototype.kv=function(t){if(null!==this.dd){var i=t.Qv,n=t.t_;if(null===this.ld)this.Bd(t);else{this.fd=!1;var e=c(this.vd),r=e.x+(i-this.ld.x),s=e.y+(n-this.ld.y);this.Sd(r,s)}}},t.prototype.Sv=function(t){0===this.N_().W().trackingMode.exitMode&&(this.fd=!0),this.Vd(),this.Ad(t)},t.prototype.Gh=function(t,i){var n=this.dd;if(null===n)return null;for(var e=0,r=n.da();e<r.length;e++){var s=r[e],o=this.Rd(s.nn(n),t,i);if(null!==o)return{Bf:s,a_:o.a_,Dd:o.Dd}}return null},t.prototype.Wd=function(t,i){c("left"===i?this.sd:this.hd).U_(new gn(t,this.w_.Ot))},t.prototype.zd=function(){return this.w_},t.prototype.U_=function(t){if(t.Ft<0||t.Ot<0)throw new Error("Try to set invalid size to PaneWidget "+JSON.stringify(t));this.w_.kr(t)||(this.w_=t,this.p_=!0,this.T_.resizeCanvas({width:t.Ft,height:t.Ot}),this.D_.resizeCanvas({width:t.Ft,height:t.Ot}),this.p_=!1,this.bd.style.width=t.Ft+"px",this.bd.style.height=t.Ot+"px")},t.prototype.Pd=function(){var t=c(this.dd);t.Ja(t.Ga()),t.Ja(t.Qa());for(var i=0,n=t.hu();i<n.length;i++){var e=n[i];if(t.Mh(e)){var r=e.Ct();null!==r&&t.Ja(r),e.rn()}}},t.prototype.td=function(){return this.T_.canvas},t.prototype.K_=function(t){if(0!==t&&null!==this.dd){if(t>1&&this.Pd(),null!==this.sd&&this.sd.K_(t),null!==this.hd&&this.hd.K_(t),1!==t){var i=mn(this.T_.canvas);i.save(),this.Z_(i,this.T_.pixelRatio),this.dd&&(this.Id(i,this.T_.pixelRatio),this.jd(i,this.T_.pixelRatio),this.qd(i,this.T_.pixelRatio,Bn)),i.restore()}var n=mn(this.D_.canvas);n.clearRect(0,0,Math.ceil(this.w_.Ft*this.D_.pixelRatio),Math.ceil(this.w_.Ot*this.D_.pixelRatio)),this.qd(n,this.T_.pixelRatio,Pn),this.Ud(n,this.D_.pixelRatio)}},t.prototype.Hd=function(){return this.sd},t.prototype.Yd=function(){return this.hd},t.prototype.Md=function(){null!==this.dd&&this.dd.fo().M(this),this.dd=null},t.prototype.Z_=function(t,i){var n=this;U(t,i,(function(){var i=n.gi(),e=i.sc(),r=i.nc();e===r?H(t,0,0,n.w_.Ft,n.w_.Ot,r):Z(t,0,0,n.w_.Ft,n.w_.Ot,e,r)}))},t.prototype.Id=function(t,i){var n=c(this.dd),e=n.co().du().dt(n.Yt(),n.Ht());null!==e&&(t.save(),e.H(t,i,!1),t.restore())},t.prototype.jd=function(t,i){var n=this.gi().Ff();this.$d(t,i,Bn,jn,n),this.$d(t,i,Bn,Fn,n)},t.prototype.Ud=function(t,i){this.$d(t,i,Bn,Fn,this.gi().Of())},t.prototype.qd=function(t,i,n){for(var e=c(this.dd).da(),r=0,s=e;r<s.length;r++){var o=s[r];this.$d(t,i,n,jn,o)}for(var h=0,u=e;h<u.length;h++)o=u[h],this.$d(t,i,n,Fn,o)},t.prototype.$d=function(t,i,n,e,r){for(var s=c(this.dd),o=n(r,s),h=s.Yt(),u=s.Ht(),a=s.jt().Tf(),l=null!==a&&a.Bf===r,f=null!==a&&l&&void 0!==a.Dd?a.Dd.Qh:void 0,p=0,v=o;p<v.length;p++){var d=v[p].dt(h,u);null!==d&&(t.save(),e(d,t,i,l,f),t.restore())}},t.prototype.Rd=function(t,i,n){for(var e=0,r=t;e<r.length;e++){var s=r[e],o=s.dt(this.w_.Ot,this.w_.Ft);if(null!==o&&o.Gh){var h=o.Gh(i,n);if(null!==h)return{a_:s,Dd:h}}}return null},t.prototype.Nd=function(){if(null!==this.dd){var t=this.wd,i=this.dd.Ga().W().visible,n=this.dd.Qa().W().visible;i||null===this.sd||(this.md.removeChild(this.sd.W_()),this.sd.p(),this.sd=null),n||null===this.hd||(this.gd.removeChild(this.hd.W_()),this.hd.p(),this.hd=null);var e=t.jt().Zf();i&&null===this.sd&&(this.sd=new Rn(this,t.W().layout,e,"left"),this.md.appendChild(this.sd.W_())),n&&null===this.hd&&(this.hd=new Rn(this,t.W().layout,e,"right"),this.gd.appendChild(this.hd.W_()))}},t.prototype.Kd=function(t){return t.r_&&this.od||null!==this.ld},t.prototype.Xd=function(t){return Math.max(0,Math.min(t,this.w_.Ft-1))},t.prototype.Zd=function(t){return Math.max(0,Math.min(t,this.w_.Ot-1))},t.prototype.Sd=function(t,i){this.gi().$f(this.Xd(t),this.Zd(i),c(this.dd))},t.prototype.Ed=function(){this.gi().Kf()},t.prototype.Vd=function(){this.fd&&(this.ld=null,this.Ed())},t.prototype.Ld=function(t,i){this.ld=t,this.fd=!1,this.Sd(i.x,i.y);var n=this.gi().Of();this.vd={x:n.$t(),y:n.Kt()}},t.prototype.gi=function(){return this.wd.jt()},t.prototype.Jd=function(){var t=this.gi(),i=this.Y_(),n=i.ji();t.eo(i,n),t.Uf(),this.rd=null,this.ed=!1},t.prototype.Ad=function(t){var i=this;if(this.ed){var n=performance.now();if(null!==this._d&&this._d.Bh(t.Qv,n),null===this._d||this._d.mc(n))this.Jd();else{var e=this.gi(),r=e.bt(),s=this._d;requestAnimationFrame((function t(){if(!s.yc()){var n=performance.now(),o=s.mc(n);if(!s.yc()){var h=r.Al();e.qf(s.bc(n)),h===r.Al()&&(o=!0,i._d=null)}o?i.Jd():requestAnimationFrame(t)}}))}}},t.prototype.Cd=function(){this.ld=null},t.prototype.Td=function(){if(this.dd){if(this.Od(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)c(document.activeElement).blur();else{var t=document.getSelection();null!==t&&t.removeAllRanges()}!this.dd.ji().wi()&&this.gi().bt().wi()}},t.prototype.Bd=function(t){if(null!==this.dd){var i=this.gi();if(!i.bt().wi()){var n=this.wd.W(),e=n.handleScroll,r=n.kineticScroll;if(e.pressedMouseMove&&!t.r_||(e.horzTouchDrag||e.vertTouchDrag)&&t.r_){var s=this.dd.ji(),o=performance.now();null!==this.rd||this.Kd(t)||(this.rd={x:t.$v,y:t.Kv,Eo:o,Qv:t.Qv,t_:t.t_}),null!==this._d&&this._d.Mc(t.Qv,o),null===this.rd||this.ed||this.rd.x===t.$v&&this.rd.y===t.Kv||(null===this._d&&(t.r_&&r.touch||!t.r_&&r.mouse)&&(this._d=new xn(.2,7,.997,15),this._d.Mc(this.rd.Qv,this.rd.Eo),this._d.Mc(t.Qv,o)),s.wi()||i.ho(this.dd,s,t.t_),i.jf(t.Qv),this.ed=!0),this.ed&&(s.wi()||i.ro(this.dd,s,t.t_),i.qf(t.Qv))}}}},t.prototype.Od=function(){var t=performance.now(),i=null===this._d||this._d.mc(t);null!==this._d&&(i||this.Jd()),null!==this._d&&(this._d.kc(),this._d=null)},t}(),Xn=function(){function t(t,i,n,e,r){var s=this;this.ft=!0,this.w_=new gn(0,0),this.y_=function(){return s.K_(3)},this.C_="left"===t,this.mf=n.Zf,this.zi=i,this.Gd=e,this.Qd=r,this.S_=document.createElement("div"),this.S_.style.width="25px",this.S_.style.height="100%",this.S_.style.overflow="hidden",this.T_=bn(this.S_,new gn(16,16)),this.T_.subscribeCanvasConfigured(this.y_)}return t.prototype.p=function(){this.T_.unsubscribeCanvasConfigured(this.y_),this.T_.destroy()},t.prototype.W_=function(){return this.S_},t.prototype.zd=function(){return this.w_},t.prototype.U_=function(t){if(t.Ft<0||t.Ot<0)throw new Error("Try to set invalid size to PriceAxisStub "+JSON.stringify(t));this.w_.kr(t)||(this.w_=t,this.T_.resizeCanvas({width:t.Ft,height:t.Ot}),this.S_.style.width="".concat(t.Ft,"px"),this.S_.style.minWidth="".concat(t.Ft,"px"),this.S_.style.height="".concat(t.Ot,"px"),this.ft=!0)},t.prototype.K_=function(t){if((!(t<3)||this.ft)&&0!==this.w_.Ft&&0!==this.w_.Ot){this.ft=!1;var i=mn(this.T_.canvas);this.Z_(i,this.T_.pixelRatio),this.Hs(i,this.T_.pixelRatio)}},t.prototype.td=function(){return this.T_.canvas},t.prototype.Hs=function(t,i){if(this.Gd()){var n=this.w_.Ft;t.save(),t.fillStyle=this.zi.timeScale.borderColor;var e=Math.floor(this.mf.W().N*i),r=this.C_?Math.round(n*i)-e:0;t.fillRect(r,0,e,e),t.restore()}},t.prototype.Z_=function(t,i){var n=this;U(t,i,(function(){H(t,0,0,n.w_.Ft,n.w_.Ot,n.Qd())}))},t}();function Vn(t,i){return t.qo>i.qo?t:i}var Gn=function(){function t(t){var i=this;this.tw=null,this.iw=null,this.k=null,this.nw=!1,this.w_=new gn(0,0),this.sw=new T,this.b_=new Gt(5),this.p_=!1,this.y_=function(){i.p_||i.wd.jt().qr()},this.x_=function(){i.p_||i.wd.jt().qr()},this.wd=t,this.zi=t.W().layout,this.hw=document.createElement("tr"),this.rw=document.createElement("td"),this.rw.style.padding="0",this.ew=document.createElement("td"),this.ew.style.padding="0",this.S_=document.createElement("td"),this.S_.style.height="25px",this.S_.style.padding="0",this.uw=document.createElement("div"),this.uw.style.width="100%",this.uw.style.height="100%",this.uw.style.position="relative",this.uw.style.overflow="hidden",this.S_.appendChild(this.uw),this.T_=bn(this.uw,new gn(16,16)),this.T_.subscribeCanvasConfigured(this.y_);var n=this.T_.canvas;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.D_=bn(this.uw,new gn(16,16)),this.D_.subscribeCanvasConfigured(this.x_);var e=this.D_.canvas;e.style.position="absolute",e.style.zIndex="2",e.style.left="0",e.style.top="0",this.hw.appendChild(this.rw),this.hw.appendChild(this.S_),this.hw.appendChild(this.ew),this.aw(),this.wd.jt().qa().u(this.aw.bind(this),this),this.R_=new kn(this.D_.canvas,this,{pv:function(){return!0},yv:function(){return!1}})}return t.prototype.p=function(){this.R_.p(),null!==this.tw&&this.tw.p(),null!==this.iw&&this.iw.p(),this.D_.unsubscribeCanvasConfigured(this.x_),this.D_.destroy(),this.T_.unsubscribeCanvasConfigured(this.y_),this.T_.destroy()},t.prototype.W_=function(){return this.hw},t.prototype.ow=function(){return this.tw},t.prototype.lw=function(){return this.iw},t.prototype.Ov=function(t){if(!this.nw){this.nw=!0;var i=this.wd.jt();!i.bt().wi()&&this.wd.W().handleScale.axisPressedMouseMove.time&&i.zf(t.Qv)}},t.prototype.Ev=function(t){this.Ov(t)},t.prototype.Vv=function(){var t=this.wd.jt();!t.bt().wi()&&this.nw&&(this.nw=!1,this.wd.W().handleScale.axisPressedMouseMove.time&&t.Yf())},t.prototype.xv=function(t){var i=this.wd.jt();!i.bt().wi()&&this.wd.W().handleScale.axisPressedMouseMove.time&&i.Hf(t.Qv)},t.prototype.kv=function(t){this.xv(t)},t.prototype.Dv=function(){this.nw=!1;var t=this.wd.jt();t.bt().wi()&&!this.wd.W().handleScale.axisPressedMouseMove.time||t.Yf()},t.prototype.Sv=function(){this.Dv()},t.prototype.ov=function(){this.wd.W().handleScale.axisDoubleClickReset&&this.wd.jt().pn()},t.prototype.rv=function(){this.ov()},t.prototype.wv=function(){this.wd.jt().W().handleScale.axisPressedMouseMove.time&&this.nd(1)},t.prototype.Hv=function(){this.nd(0)},t.prototype.zd=function(){return this.w_},t.prototype.fw=function(){return this.sw},t.prototype.cw=function(t,i,n){this.w_&&this.w_.kr(t)||(this.w_=t,this.p_=!0,this.T_.resizeCanvas({width:t.Ft,height:t.Ot}),this.D_.resizeCanvas({width:t.Ft,height:t.Ot}),this.p_=!1,this.S_.style.width=t.Ft+"px",this.S_.style.height=t.Ot+"px",this.sw.m(t)),null!==this.tw&&this.tw.U_(new gn(i,t.Ot)),null!==this.iw&&this.iw.U_(new gn(n,t.Ot))},t.prototype._w=function(){var t=this.dw();return Math.ceil(t.N+t.C+t.S+t.O+t.A)},t.prototype.vt=function(){this.wd.jt().bt()._u()},t.prototype.td=function(){return this.T_.canvas},t.prototype.K_=function(t){if(0!==t){if(1!==t){var i=mn(this.T_.canvas);this.Z_(i,this.T_.pixelRatio),this.Hs(i,this.T_.pixelRatio),this.J_(i,this.T_.pixelRatio),null!==this.tw&&this.tw.K_(t),null!==this.iw&&this.iw.K_(t)}var n=mn(this.D_.canvas),e=this.D_.pixelRatio;n.clearRect(0,0,Math.ceil(this.w_.Ft*e),Math.ceil(this.w_.Ot*e)),this.ww([this.wd.jt().Of()],n,e)}},t.prototype.Z_=function(t,i){var n=this;U(t,i,(function(){H(t,0,0,n.w_.Ft,n.w_.Ot,n.wd.jt().nc())}))},t.prototype.Hs=function(t,i){if(this.wd.W().timeScale.borderVisible){t.save(),t.fillStyle=this.Mw();var n=Math.max(1,Math.floor(this.dw().N*i));t.fillRect(0,0,Math.ceil(this.w_.Ft*i),n),t.restore()}},t.prototype.J_=function(t,i){var n=this,e=this.wd.jt().bt()._u();if(e&&0!==e.length){var r=e.reduce(Vn,e[0]).qo;r>30&&r<50&&(r=30),t.save(),t.strokeStyle=this.Mw();var s=this.dw(),o=s.N+s.C+s.O+s.S-s.V;t.textAlign="center",t.fillStyle=this.Mw();var h=Math.floor(this.dw().N*i),u=Math.max(1,Math.floor(i)),a=Math.floor(.5*i);if(this.wd.jt().bt().W().borderVisible){t.beginPath();for(var l=Math.round(s.C*i),f=e.length;f--;){var c=Math.round(e[f].ou*i);t.rect(c-a,h,u,l)}t.fill()}t.fillStyle=this.j(),U(t,i,(function(){t.font=n.bw();for(var i=0,s=e;i<s.length;i++)if((l=s[i]).qo<r){var h=l.Fl?n.mw(t,l.ou,l.Tu):l.ou;t.fillText(l.Tu,h,o)}t.font=n.gw();for(var u=0,a=e;u<a.length;u++){var l;(l=a[u]).qo>=r&&(h=l.Fl?n.mw(t,l.ou,l.Tu):l.ou,t.fillText(l.Tu,h,o))}})),t.restore()}},t.prototype.mw=function(t,i,n){var e=this.b_.Qt(t,n),r=e/2,s=Math.floor(i-r)+.5;return s<0?i+=Math.abs(0-s):s+e>this.w_.Ft&&(i-=Math.abs(this.w_.Ft-(s+e))),i},t.prototype.ww=function(t,i,n){for(var e=this.dw(),r=0,s=t;r<s.length;r++)for(var o=0,h=s[r].Ti();o<h.length;o++){var u=h[o];i.save(),u.dt().H(i,e,n),i.restore()}},t.prototype.Mw=function(){return this.wd.W().timeScale.borderColor},t.prototype.j=function(){return this.zi.textColor},t.prototype.P=function(){return this.zi.fontSize},t.prototype.bw=function(){return j(this.P(),this.zi.fontFamily)},t.prototype.gw=function(){return j(this.P(),this.zi.fontFamily,"bold")},t.prototype.dw=function(){null===this.k&&(this.k={N:1,V:NaN,O:NaN,A:NaN,mi:NaN,C:3,S:NaN,T:"",bi:new Gt});var t=this.k,i=this.bw();if(t.T!==i){var n=this.P();t.S=n,t.T=i,t.O=Math.ceil(n/2.5),t.A=t.O,t.mi=Math.ceil(n/2),t.V=Math.round(this.P()/5),t.bi.eh()}return this.k},t.prototype.nd=function(t){this.S_.style.cursor=1===t?"ew-resize":"default"},t.prototype.aw=function(){var t=this.wd.jt(),i=t.W();i.leftPriceScale.visible||null===this.tw||(this.rw.removeChild(this.tw.W_()),this.tw.p(),this.tw=null),i.rightPriceScale.visible||null===this.iw||(this.ew.removeChild(this.iw.W_()),this.iw.p(),this.iw=null);var n={Zf:this.wd.jt().Zf()},e=function(){return i.leftPriceScale.borderVisible&&t.bt().W().borderVisible},r=function(){return t.nc()};i.leftPriceScale.visible&&null===this.tw&&(this.tw=new Xn("left",i,n,e,r),this.rw.appendChild(this.tw.W_())),i.rightPriceScale.visible&&null===this.iw&&(this.iw=new Xn("right",i,n,e,r),this.ew.appendChild(this.iw.W_()))},t}(),Yn=function(){function t(t,i){var n;this.pw=[],this.yw=0,this.Au=0,this.oh=0,this.kw=0,this.Nw=0,this.xw=null,this.Cw=!1,this.ud=new T,this.wf=new T,this.zi=i,this.hw=document.createElement("div"),this.hw.classList.add("tv-lightweight-charts"),this.hw.style.overflow="hidden",this.hw.style.width="100%",this.hw.style.height="100%",(n=this.hw).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.Sw=document.createElement("table"),this.Sw.setAttribute("cellspacing","0"),this.hw.appendChild(this.Sw),this.Tw=this.Dw.bind(this),this.hw.addEventListener("wheel",this.Tw,{passive:!1}),this.gi=new vn(this.bf.bind(this),this.zi),this.jt().Vf().u(this.Bw.bind(this),this),this.Aw=new Gn(this),this.Sw.appendChild(this.Aw.W_());var e=this.zi.width,r=this.zi.height;if(0===e||0===r){var s=t.getBoundingClientRect();0===e&&(e=Math.floor(s.width),e-=e%2),0===r&&(r=Math.floor(s.height),r-=r%2)}this.Lw(e,r),this.Ew(),t.appendChild(this.hw),this.Fw(),this.gi.bt().Ul().u(this.gi.Ae.bind(this.gi),this),this.gi.qa().u(this.gi.Ae.bind(this.gi),this)}return t.prototype.jt=function(){return this.gi},t.prototype.W=function(){return this.zi},t.prototype.Ow=function(){return this.pw},t.prototype.Vw=function(){return this.Aw},t.prototype.p=function(){this.hw.removeEventListener("wheel",this.Tw),0!==this.yw&&window.cancelAnimationFrame(this.yw),this.gi.Vf().M(this),this.gi.bt().Ul().M(this),this.gi.qa().M(this),this.gi.p();for(var t=0,i=this.pw;t<i.length;t++){var n=i[t];this.Sw.removeChild(n.W_()),n.Fd().M(this),n.p()}this.pw=[],c(this.Aw).p(),null!==this.hw.parentElement&&this.hw.parentElement.removeChild(this.hw),this.wf.p(),this.ud.p()},t.prototype.Lw=function(t,i,n){if(void 0===n&&(n=!1),this.Au!==i||this.oh!==t){this.Au=i,this.oh=t;var e=i+"px",r=t+"px";c(this.hw).style.height=e,c(this.hw).style.width=r,this.Sw.style.height=e,this.Sw.style.width=r,n?this.Rw(new ht(3)):this.gi.Ae()}},t.prototype.K_=function(t){void 0===t&&(t=new ht(3));for(var i=0;i<this.pw.length;i++)this.pw[i].K_(t.Mn(i)._n);this.zi.timeScale.visible&&this.Aw.K_(t.wn())},t.prototype.jr=function(t){this.gi.jr(t),this.Fw();var i=t.width||this.oh,n=t.height||this.Au;this.Lw(i,n)},t.prototype.Fd=function(){return this.ud},t.prototype.Vf=function(){return this.wf},t.prototype.Ww=function(){var t=this;null!==this.xw&&(this.Rw(this.xw),this.xw=null);var i=this.pw[0],n=_n(document,new gn(this.oh,this.Au)),e=mn(n),r=Mn(n);return U(e,r,(function(){var n=0,r=0,s=function(i){for(var s=0;s<t.pw.length;s++){var o=t.pw[s],h=o.zd().Ot,u=c("left"===i?o.Hd():o.Yd()),a=u.td();e.drawImage(a,n,r,u.H_(),h),r+=h}};t.zw()&&(s("left"),n=c(i.Hd()).H_()),r=0;for(var o=0;o<t.pw.length;o++){var h=t.pw[o],u=h.zd(),a=h.td();e.drawImage(a,n,r,u.Ft,u.Ot),r+=u.Ot}n+=i.zd().Ft,t.Pw()&&(r=0,s("right"));var l=function(i){var s=c("left"===i?t.Aw.ow():t.Aw.lw()),o=s.zd(),h=s.td();e.drawImage(h,n,r,o.Ft,o.Ot)};if(t.zi.timeScale.visible){n=0,t.zw()&&(l("left"),n=c(i.Hd()).H_());var f=t.Aw.zd();a=t.Aw.td(),e.drawImage(a,n,r,f.Ft,f.Ot),t.Pw()&&(n+=i.zd().Ft,l("right"),e.restore())}})),n},t.prototype.Iw=function(t){return"left"===t&&!this.zw()||"right"===t&&!this.Pw()||0===this.pw.length?0:c("left"===t?this.pw[0].Hd():this.pw[0].Yd()).H_()},t.prototype.jw=function(){for(var t=0,i=0,n=0,e=0,r=this.pw;e<r.length;e++){var s=r[e];this.zw()&&(i=Math.max(i,c(s.Hd()).j_())),this.Pw()&&(n=Math.max(n,c(s.Yd()).j_())),t+=s.Ua()}var o=this.oh,h=this.Au,u=Math.max(o-i-n,0),a=this.zi.timeScale.visible,l=a?this.Aw._w():0;l%2&&(l+=1);for(var f=0+l,p=h<f?0:h-f,v=p/t,d=0,y=0;y<this.pw.length;++y){(s=this.pw[y]).kd(this.gi.Ef()[y]);var w,g;g=y===this.pw.length-1?p-d:Math.round(s.Ua()*v),d+=w=Math.max(g,2),s.U_(new gn(u,w)),this.zw()&&s.Wd(i,"left"),this.Pw()&&s.Wd(n,"right"),s.Y_()&&this.gi.Rf(s.Y_(),w)}this.Aw.cw(new gn(a?u:0,l),a?i:0,a?n:0),this.gi.Ya(u),this.kw!==i&&(this.kw=i),this.Nw!==n&&(this.Nw=n)},t.prototype.Dw=function(t){var i=t.deltaX/100,n=-t.deltaY/100;if(0!==i&&this.zi.handleScroll.mouseWheel||0!==n&&this.zi.handleScale.mouseWheel){switch(t.cancelable&&t.preventDefault(),t.deltaMode){case t.DOM_DELTA_PAGE:i*=120,n*=120;break;case t.DOM_DELTA_LINE:i*=32,n*=32}if(0!==n&&this.zi.handleScale.mouseWheel){var e=Math.sign(n)*Math.min(1,Math.abs(n)),r=t.clientX-this.hw.getBoundingClientRect().left;this.jt().Pf(r,e)}0!==i&&this.zi.handleScroll.mouseWheel&&this.jt().If(-80*i)}},t.prototype.Rw=function(t){var i,n=t.wn();3===n&&this.qw(),3!==n&&2!==n||(this.Uw(t),this.Hw(t),this.Aw.vt(),this.pw.forEach((function(t){t.xd()})),3===(null===(i=this.xw)||void 0===i?void 0:i.wn())&&(this.xw.xn(t),this.qw(),this.Uw(this.xw),this.Hw(this.xw),t=this.xw,this.xw=null)),this.K_(t)},t.prototype.Hw=function(t){for(var i=0,n=t.Nn();i<n.length;i++){var e=n[i];this.Cn(e)}},t.prototype.Uw=function(t){for(var i=this.gi.Ef(),n=0;n<i.length;n++)t.Mn(n).dn&&i[n].oo()},t.prototype.Cn=function(t){var i=this.gi.bt();switch(t.mn){case 0:i.Yl();break;case 1:i.$l(t.St);break;case 2:i.yn(t.St);break;case 3:i.kn(t.St);break;case 4:i.Ol()}},t.prototype.bf=function(t){var i=this;null!==this.xw?this.xw.xn(t):this.xw=t,this.Cw||(this.Cw=!0,this.yw=window.requestAnimationFrame((function(){if(i.Cw=!1,i.yw=0,null!==i.xw){var t=i.xw;i.xw=null,i.Rw(t)}})))},t.prototype.qw=function(){this.Ew()},t.prototype.Ew=function(){for(var t=this.gi.Ef(),i=t.length,n=this.pw.length,e=i;e<n;e++){var r=f(this.pw.pop());this.Sw.removeChild(r.W_()),r.Fd().M(this),r.p()}for(e=n;e<i;e++)(r=new In(this,t[e])).Fd().u(this.Yw.bind(this),this),this.pw.push(r),this.Sw.insertBefore(r.W_(),this.Aw.W_());for(e=0;e<i;e++){var s=t[e];(r=this.pw[e]).Y_()!==s?r.kd(s):r.yd()}this.Fw(),this.jw()},t.prototype.$w=function(t,i){var n,e,r=new Map;if(null!==t&&this.gi._t().forEach((function(i){var n=i.on().ue(t);null!==n&&r.set(i,n)})),null!==t){var s=null===(n=this.gi.bt().pi(t))||void 0===n?void 0:n.Uo;void 0!==s&&(e=s)}var o=this.jt().Tf(),h=null!==o&&o.Bf instanceof xi?o.Bf:void 0,u=null!==o&&void 0!==o.Dd?o.Dd.ir:void 0;return{rt:e,_s:null!=t?t:void 0,Kw:null!=i?i:void 0,Xw:h,Zw:r,Jw:u}},t.prototype.Yw=function(t,i){var n=this;this.ud.m((function(){return n.$w(t,i)}))},t.prototype.Bw=function(t,i){var n=this;this.wf.m((function(){return n.$w(t,i)}))},t.prototype.Fw=function(){var t=this.zi.timeScale.visible?"":"none";this.Aw.W_().style.display=t},t.prototype.zw=function(){return this.pw[0].Y_().Ga().W().visible},t.prototype.Pw=function(){return this.pw[0].Y_().Qa().W().visible},t}();function qn(t,i,n,e){var r=n.value;return{_s:i,rt:t,St:[r,r,r,r],Uo:e}}function Jn(t,i,n,e){var r=n.value,s={_s:i,rt:t,St:[r,r,r,r],Uo:e};return"color"in n&&void 0!==n.color&&(s.B=n.color),s}function Un(t){return void 0!==t.St}function Hn(t){return function(i,n,e,r){return void 0===(s=e).open&&void 0===s.value?{rt:i,_s:n,Uo:r}:t(i,n,e,r);var s}}var Zn={Candlestick:Hn((function(t,i,n,e){var r={_s:i,rt:t,St:[n.open,n.high,n.low,n.close],Uo:e};return"color"in n&&void 0!==n.color&&(r.B=n.color),"borderColor"in n&&void 0!==n.borderColor&&(r.Tt=n.borderColor),"wickColor"in n&&void 0!==n.wickColor&&(r.Ks=n.wickColor),r})),Bar:Hn((function(t,i,n,e){var r={_s:i,rt:t,St:[n.open,n.high,n.low,n.close],Uo:e};return"color"in n&&void 0!==n.color&&(r.B=n.color),r})),Area:Hn(qn),Baseline:Hn(qn),Histogram:Hn(Jn),Line:Hn(Jn)};function Qn(t){return Zn[t]}function Kn(t){return 60*t*60*1e3}function $n(t){return 60*t*1e3}var te=[{Gw:(1,1e3),qo:10},{Gw:$n(1),qo:20},{Gw:$n(5),qo:21},{Gw:$n(30),qo:22},{Gw:Kn(1),qo:30},{Gw:Kn(3),qo:31},{Gw:Kn(6),qo:32},{Gw:Kn(12),qo:33}];function ie(t,i){if(t.getUTCFullYear()!==i.getUTCFullYear())return 70;if(t.getUTCMonth()!==i.getUTCMonth())return 60;if(t.getUTCDate()!==i.getUTCDate())return 50;for(var n=te.length-1;n>=0;--n)if(Math.floor(i.getTime()/te[n].Gw)!==Math.floor(t.getTime()/te[n].Gw))return te[n].qo;return 0}function ne(t,i){if(void 0===i&&(i=0),0!==t.length){for(var n=0===i?null:t[i-1].rt.Eo,e=null!==n?new Date(1e3*n):null,r=0,s=i;s<t.length;++s){var o=t[s],h=new Date(1e3*o.rt.Eo);null!==e&&(o.jo=ie(h,e)),r+=o.rt.Eo-(n||o.rt.Eo),n=o.rt.Eo,e=h}if(0===i&&t.length>1){var u=Math.ceil(r/(t.length-1)),a=new Date(1e3*(t[0].rt.Eo-u));t[0].jo=ie(new Date(1e3*t[0].rt.Eo),a)}}}function ee(t){if(!yn(t))throw new Error("time must be of type BusinessDay");var i=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{Eo:Math.round(i.getTime()/1e3),Lo:t}}function re(t){if(!wn(t))throw new Error("time must be of type isUTCTimestamp");return{Eo:t}}function se(t){return 0===t.length?null:yn(t[0].time)?ee:re}function oe(t){return wn(t)?re(t):yn(t)?ee(t):ee(he(t))}function he(t){var i=new Date(t);if(isNaN(i.getTime()))throw new Error("Invalid date string=".concat(t,", expected format=yyyy-mm-dd"));return{day:i.getUTCDate(),month:i.getUTCMonth()+1,year:i.getUTCFullYear()}}function ue(t){L(t.time)&&(t.time=he(t.time))}function ae(t){return{_s:0,Qw:new Map,je:t}}function le(t){if(void 0!==t&&0!==t.length)return{tM:t[0].rt.Eo,iM:t[t.length-1].rt.Eo}}function fe(t){var i;return t.forEach((function(t){void 0===i&&(i=t.Uo)})),f(i)}function ce(t){void 0===t.Uo&&(t.Uo=t.time)}var pe=function(){function t(){this.nM=new Map,this.sM=new Map,this.hM=new Map,this.rM=[]}return t.prototype.p=function(){this.nM.clear(),this.sM.clear(),this.hM.clear(),this.rM=[]},t.prototype.eM=function(t,i){var n=this,e=0!==this.nM.size,r=!1,s=this.sM.get(t);if(void 0!==s)if(1===this.sM.size)e=!1,r=!0,this.nM.clear();else for(var o=0,h=this.rM;o<h.length;o++)h[o].pointData.Qw.delete(t)&&(r=!0);var u=[];if(0!==i.length){var a=i;a.forEach((function(t){return ce(t)})),function(t){t.forEach(ue)}(i);var l=c(se(i)),f=Qn(t.Hr());u=a.map((function(i){var e=l(i.time),s=n.nM.get(e.Eo);void 0===s&&(s=ae(e),n.nM.set(e.Eo,s),r=!0);var o=f(e,s._s,i,i.Uo);return s.Qw.set(t,o),o}))}e&&this.uM(),this.aM(t,u);var p=-1;if(r){var v=[];this.nM.forEach((function(t){v.push({jo:0,rt:t.je,pointData:t,Uo:fe(t.Qw)})})),v.sort((function(t,i){return t.rt.Eo-i.rt.Eo})),p=this.oM(v)}return this.lM(t,p,function(t,i){var n=le(t),e=le(i);if(void 0!==n&&void 0!==e)return{Oe:n.iM>=e.iM&&n.tM>=e.tM}}(this.sM.get(t),s))},t.prototype.Qf=function(t){return this.eM(t,[])},t.prototype.fM=function(t,i){var n=i;ce(n),ue(i);var e=c(se([i]))(i.time),r=this.hM.get(t);if(void 0!==r&&e.Eo<r.Eo)throw new Error("Cannot update oldest data, last time=".concat(r.Eo,", new time=").concat(e.Eo));var s=this.nM.get(e.Eo),o=void 0===s;void 0===s&&(s=ae(e),this.nM.set(e.Eo,s));var h=Qn(t.Hr())(e,s._s,i,n.Uo);s.Qw.set(t,h),this.cM(t,h);var u={Oe:Un(h)};if(!o)return this.lM(t,-1,u);var a={jo:0,rt:s.je,pointData:s,Uo:fe(s.Qw)},l=wt(this.rM,a.rt.Eo,(function(t,i){return t.rt.Eo<i}));this.rM.splice(l,0,a);for(var f=l;f<this.rM.length;++f)ve(this.rM[f].pointData,f);return ne(this.rM,l),this.lM(t,l,u)},t.prototype.cM=function(t,i){var n=this.sM.get(t);void 0===n&&(n=[],this.sM.set(t,n));var e=0!==n.length?n[n.length-1]:null;null===e||i.rt.Eo>e.rt.Eo?Un(i)&&n.push(i):Un(i)?n[n.length-1]=i:n.splice(-1,1),this.hM.set(t,i.rt)},t.prototype.aM=function(t,i){0!==i.length?(this.sM.set(t,i.filter(Un)),this.hM.set(t,i[i.length-1].rt)):(this.sM.delete(t),this.hM.delete(t))},t.prototype.uM=function(){for(var t=0,i=this.rM;t<i.length;t++){var n=i[t];0===n.pointData.Qw.size&&this.nM.delete(n.rt.Eo)}},t.prototype.oM=function(t){for(var i=-1,n=0;n<this.rM.length&&n<t.length;++n){var e=this.rM[n],r=t[n];if(e.rt.Eo!==r.rt.Eo){i=n;break}r.jo=e.jo,ve(r.pointData,n)}if(-1===i&&this.rM.length!==t.length&&(i=Math.min(this.rM.length,t.length)),-1===i)return-1;for(n=i;n<t.length;++n)ve(t[n].pointData,n);return ne(t,i),this.rM=t,i},t.prototype.vM=function(){if(0===this.sM.size)return null;var t=0;return this.sM.forEach((function(i){0!==i.length&&(t=Math.max(t,i[i.length-1]._s))})),t},t.prototype.lM=function(t,i,n){var e={_M:new Map,bt:{Cl:this.vM()}};if(-1!==i)this.sM.forEach((function(i,r){e._M.set(r,{xh:i,dM:r===t?n:void 0})})),this.sM.has(t)||e._M.set(t,{xh:[],dM:n}),e.bt.wM=this.rM,e.bt.MM=i;else{var r=this.sM.get(t);e._M.set(t,{xh:r||[],dM:n})}return e},t}();function ve(t,i){t._s=i,t.Qw.forEach((function(t){t._s=i}))}function de(t){return{value:t.St[3],time:t.Uo}}function ye(t){return{open:t.St[0],high:t.St[1],low:t.St[2],close:t.St[3],time:t.Uo}}var we={Area:de,Line:de,Baseline:de,Histogram:function(t){return{value:t.St[3],color:t.B,time:t.Uo}},Bar:ye,Candlestick:ye};function ge(t){return we[t]}var Me={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:""},me=function(){function t(t){this.Rr=t}return t.prototype.applyOptions=function(t){this.Rr.jr(t)},t.prototype.options=function(){return this.Rr.W()},t.prototype.bM=function(){return this.Rr},t}(),_e=function(){function t(t,i,n){this.Xn=t,this.mM=i,this.gM=n}return t.prototype.priceFormatter=function(){return this.Xn.Xe()},t.prototype.priceToCoordinate=function(t){var i=this.Xn.kt();return null===i?null:this.Xn.Ct().xt(t,i.St)},t.prototype.coordinateToPrice=function(t){var i=this.Xn.kt();return null===i?null:this.Xn.Ct().qi(t,i.St)},t.prototype.barsInLogicalRange=function(t){if(null===t)return null;var i=new sn(new tn(t.from,t.to)).Xo(),n=this.Xn.on();if(n.wi())return null;var e=n.ue(i.jn(),1),r=n.ue(i.qn(),-1),s=c(n.he()),o=c(n.an());if(null!==e&&null!==r&&e._s>r._s)return{barsBefore:t.from-s,barsAfter:o-t.to};var h={barsBefore:null===e||e._s===s?t.from-s:e._s-s,barsAfter:null===r||r._s===o?o-t.to:o-r._s};return null!==e&&null!==r&&(h.from=e.rt.Lo||e.rt.Eo,h.to=r.rt.Lo||r.rt.Eo),h},t.prototype.setData=function(t){this.Xn.Hr(),this.mM.pM(this.Xn,t)},t.prototype.update=function(t){this.Xn.Hr(),this.mM.yM(this.Xn,t)},t.prototype.dataByIndex=function(t,i){var n=this.Xn.on().ue(t,i);return null===n?null:ge(this.seriesType())(n)},t.prototype.setMarkers=function(t){var i=t.map((function(t){return x(x({},t),{originalTime:t.time,time:oe(t.time)})}));this.Xn.Re(i)},t.prototype.markers=function(){return this.Xn.We().map((function(t){var i=t.originalTime;t.time;var n=function(t,i){var n={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.indexOf(e)<0&&(n[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(e=Object.getOwnPropertySymbols(t);r<e.length;r++)i.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(t,e[r])&&(n[e[r]]=t[e[r]])}return n}(t,["originalTime","time"]);return x({time:i},n)}))},t.prototype.applyOptions=function(t){this.Xn.jr(t)},t.prototype.options=function(){return D(this.Xn.W())},t.prototype.priceScale=function(){return this.gM.priceScale(this.Xn.Ct().tu())},t.prototype.createPriceLine=function(t){var i=z(D(Me),t),n=this.Xn.ze(i);return new me(n)},t.prototype.removePriceLine=function(t){this.Xn.Pe(t.bM())},t.prototype.seriesType=function(){return this.Xn.Hr()},t}(),be=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return C(i,t),i.prototype.applyOptions=function(i){dn(i),t.prototype.applyOptions.call(this,i)},i}(_e),Se={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,drawTicks:!0,scaleMargins:{bottom:.1,top:.2}},Ce={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:R,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"},xe={width:0,height:0,layout:{background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:11,fontFamily:R},crosshair:{vertLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},horzLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},mode:1},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},overlayPriceScales:x({},Se),leftPriceScale:x(x({},Se),{visible:!1}),rightPriceScale:x(x({},Se),{visible:!0}),timeScale:{rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0},watermark:Ce,localization:{locale:An?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:!0,mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}},Ae={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Te={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},ze={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},ke={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Ee={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Le={color:"#26a69a",base:0},Oe={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},De=function(){function t(t,i){this.kM=t,this.NM=i}return t.prototype.applyOptions=function(t){this.kM.jt().Af(this.NM,t)},t.prototype.options=function(){return this._i().W()},t.prototype.width=function(){return ot(this.NM)?this.kM.Iw(this.NM):0},t.prototype._i=function(){return c(this.kM.jt().Lf(this.NM)).Ct},t}(),Ne=function(){function t(t,i){this.xM=new T,this.rl=new T,this.sw=new T,this.gi=t,this.Oa=t.bt(),this.Aw=i,this.Oa.jl().u(this.CM.bind(this)),this.Oa.ql().u(this.SM.bind(this)),this.Aw.fw().u(this.TM.bind(this))}return t.prototype.p=function(){this.Oa.jl().M(this),this.Oa.ql().M(this),this.Aw.fw().M(this),this.xM.p(),this.rl.p(),this.sw.p()},t.prototype.scrollPosition=function(){return this.Oa.Al()},t.prototype.scrollToPosition=function(t,i){i?this.Oa.Il(t,1e3):this.gi.kn(t)},t.prototype.scrollToRealTime=function(){this.Oa.Pl()},t.prototype.getVisibleRange=function(){var t,i,n=this.Oa.ml();return null===n?null:{from:null!==(t=n.from.Lo)&&void 0!==t?t:n.from.Eo,to:null!==(i=n.to.Lo)&&void 0!==i?i:n.to.Eo}},t.prototype.setVisibleRange=function(t){var i={from:oe(t.from),to:oe(t.to)},n=this.Oa.kl(i);this.gi.tc(n)},t.prototype.getVisibleLogicalRange=function(){var t=this.Oa.bl();return null===t?null:{from:t.jn(),to:t.qn()}},t.prototype.setVisibleLogicalRange=function(t){l(t.from<=t.to,"The from index cannot be after the to index."),this.gi.tc(t)},t.prototype.resetTimeScale=function(){this.gi.pn()},t.prototype.fitContent=function(){this.gi.Yl()},t.prototype.logicalToCoordinate=function(t){var i=this.gi.bt();return i.wi()?null:i.Bt(t)},t.prototype.coordinateToLogical=function(t){return this.Oa.wi()?null:this.Oa.Sl(t)},t.prototype.timeToCoordinate=function(t){var i=oe(t),n=this.Oa.nu(i,!1);return null===n?null:this.Oa.Bt(n)},t.prototype.coordinateToTime=function(t){var i,n=this.gi.bt(),e=n.Sl(t),r=n.Ui(e);return null===r?null:null!==(i=r.Lo)&&void 0!==i?i:r.Eo},t.prototype.width=function(){return this.Aw.zd().Ft},t.prototype.height=function(){return this.Aw.zd().Ot},t.prototype.subscribeVisibleTimeRangeChange=function(t){this.xM.u(t)},t.prototype.unsubscribeVisibleTimeRangeChange=function(t){this.xM._(t)},t.prototype.subscribeVisibleLogicalRangeChange=function(t){this.rl.u(t)},t.prototype.unsubscribeVisibleLogicalRangeChange=function(t){this.rl._(t)},t.prototype.subscribeSizeChange=function(t){this.sw.u(t)},t.prototype.unsubscribeSizeChange=function(t){this.sw._(t)},t.prototype.applyOptions=function(t){this.Oa.jr(t)},t.prototype.options=function(){return D(this.Oa.W())},t.prototype.CM=function(){this.xM.g()&&this.xM.m(this.getVisibleRange())},t.prototype.SM=function(){this.rl.g()&&this.rl.m(this.getVisibleLogicalRange())},t.prototype.TM=function(t){this.sw.m(t.Ft,t.Ot)},t}();function We(t){if(void 0!==t&&"custom"!==t.type){var i=t;void 0!==i.minMove&&void 0===i.precision&&(i.precision=function(t){if(t>=1)return 0;for(var i=0;i<8;i++){var n=Math.round(t);if(Math.abs(n-t)<1e-8)return i;t*=10}return i}(i.minMove))}}function Re(t){return function(t){if(O(t.handleScale)){var i=t.handleScale;t.handleScale={axisDoubleClickReset:i,axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(void 0!==t.handleScale&&O(t.handleScale.axisPressedMouseMove)){var n=t.handleScale.axisPressedMouseMove;t.handleScale.axisPressedMouseMove={time:n,price:n}}var e=t.handleScroll;O(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})}(t),t}var je=function(){function t(t,i){var n=this;this.DM=new pe,this.BM=new Map,this.AM=new Map,this.LM=new T,this.EM=new T;var e=void 0===i?D(xe):z(D(xe),Re(i));this.kM=new Yn(t,e),this.kM.Fd().u((function(t){n.LM.g()&&n.LM.m(n.FM(t()))}),this),this.kM.Vf().u((function(t){n.EM.g()&&n.EM.m(n.FM(t()))}),this);var r=this.kM.jt();this.OM=new Ne(r,this.kM.Vw())}return t.prototype.remove=function(){this.kM.Fd().M(this),this.kM.Vf().M(this),this.OM.p(),this.kM.p(),this.BM.clear(),this.AM.clear(),this.LM.p(),this.EM.p(),this.DM.p()},t.prototype.resize=function(t,i,n){this.kM.Lw(t,i,n)},t.prototype.addAreaSeries=function(t){void 0===t&&(t={}),We(t.priceFormat);var i=z(D(Oe),ke,t),n=this.kM.jt().Jf("Area",i),e=new _e(n,this,this);return this.BM.set(e,n),this.AM.set(n,e),e},t.prototype.addBaselineSeries=function(t){void 0===t&&(t={}),We(t.priceFormat);var i=z(D(Oe),D(Ee),t),n=this.kM.jt().Jf("Baseline",i),e=new _e(n,this,this);return this.BM.set(e,n),this.AM.set(n,e),e},t.prototype.addBarSeries=function(t){void 0===t&&(t={}),We(t.priceFormat);var i=z(D(Oe),Te,t),n=this.kM.jt().Jf("Bar",i),e=new _e(n,this,this);return this.BM.set(e,n),this.AM.set(n,e),e},t.prototype.addCandlestickSeries=function(t){void 0===t&&(t={}),dn(t),We(t.priceFormat);var i=z(D(Oe),Ae,t),n=this.kM.jt().Jf("Candlestick",i),e=new be(n,this,this);return this.BM.set(e,n),this.AM.set(n,e),e},t.prototype.addHistogramSeries=function(t){void 0===t&&(t={}),We(t.priceFormat);var i=z(D(Oe),Le,t),n=this.kM.jt().Jf("Histogram",i),e=new _e(n,this,this);return this.BM.set(e,n),this.AM.set(n,e),e},t.prototype.addLineSeries=function(t){void 0===t&&(t={}),We(t.priceFormat);var i=z(D(Oe),ze,t),n=this.kM.jt().Jf("Line",i),e=new _e(n,this,this);return this.BM.set(e,n),this.AM.set(n,e),e},t.prototype.removeSeries=function(t){var i=f(this.BM.get(t)),n=this.DM.Qf(i);this.kM.jt().Qf(i),this.VM(n),this.BM.delete(t),this.AM.delete(i)},t.prototype.pM=function(t,i){this.VM(this.DM.eM(t,i))},t.prototype.yM=function(t,i){this.VM(this.DM.fM(t,i))},t.prototype.subscribeClick=function(t){this.LM.u(t)},t.prototype.unsubscribeClick=function(t){this.LM._(t)},t.prototype.subscribeCrosshairMove=function(t){this.EM.u(t)},t.prototype.unsubscribeCrosshairMove=function(t){this.EM._(t)},t.prototype.priceScale=function(t){return new De(this.kM,t)},t.prototype.timeScale=function(){return this.OM},t.prototype.applyOptions=function(t){this.kM.jr(Re(t))},t.prototype.options=function(){return this.kM.W()},t.prototype.takeScreenshot=function(){return this.kM.Ww()},t.prototype.VM=function(t){var i=this.kM.jt();i.Xf(t.bt.Cl,t.bt.wM,t.bt.MM),t._M.forEach((function(t,i){return i.Z(t.xh,t.dM)})),i.Dl()},t.prototype.RM=function(t){return f(this.AM.get(t))},t.prototype.FM=function(t){var i=this,n=new Map;t.Zw.forEach((function(t,e){var r=ge(e.Hr())(t);l(function(t){return void 0!==t.open||void 0!==t.value}(r)),n.set(i.RM(e),r)}));var e=void 0===t.Xw?void 0:this.RM(t.Xw);return{time:t.rt,logical:t._s,point:t.Kw,hoveredSeries:e,hoveredMarkerId:t.Jw,seriesData:n}},t}();function Fe(t,i){var n;if(L(t)){var e=document.getElementById(t);l(null!==e,"Cannot find element in DOM with id=".concat(t)),n=e}else n=t;return new je(n,i)}function Be(){return"4.0.0-dev+202203151048"}}}]);