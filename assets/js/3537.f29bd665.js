"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3537],{3537:function(t,i,n){n.r(i),n.d(i,{ColorType:function(){return an},CrosshairMode:function(){return Y},LastPriceAnimationMode:function(){return on},LineStyle:function(){return u},LineType:function(){return o},MismatchDirection:function(){return vi},PriceLineSource:function(){return un},PriceScaleMode:function(){return Ui},TickMarkType:function(){return hn},TrackingModeExitMode:function(){return rn},createChart:function(){return As},isBusinessDay:function(){return bn},isUTCTimestamp:function(){return Mn},version:function(){return Ds}});var s=n(7855);function e(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var h=n(4578),r={allowDownsampling:!0};var o,u,a,l=function(){function t(t,i){var n=this;this._resolutionMediaQueryList=null,this._resolutionListener=function(t){return n._onResolutionChanged()},this._canvasConfiguredListeners=[],this.canvas=t,this._canvasSize={width:this.canvas.clientWidth,height:this.canvas.clientHeight},this._options=i,this._configureCanvas(),this._installResolutionListener()}return t.prototype.destroy=function(){this._canvasConfiguredListeners.length=0,this._uninstallResolutionListener(),this.canvas=null},Object.defineProperty(t.prototype,"canvasSize",{get:function(){return{width:this._canvasSize.width,height:this._canvasSize.height}},enumerable:!0,configurable:!0}),t.prototype.resizeCanvas=function(t){this._canvasSize={width:t.width,height:t.height},this._configureCanvas()},Object.defineProperty(t.prototype,"pixelRatio",{get:function(){var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");return t.devicePixelRatio>1||this._options.allowDownsampling?t.devicePixelRatio:1},enumerable:!0,configurable:!0}),t.prototype.subscribeCanvasConfigured=function(t){this._canvasConfiguredListeners.push(t)},t.prototype.unsubscribeCanvasConfigured=function(t){this._canvasConfiguredListeners=this._canvasConfiguredListeners.filter((function(i){return i!=t}))},t.prototype._configureCanvas=function(){var t=this.pixelRatio;this.canvas.style.width=this._canvasSize.width+"px",this.canvas.style.height=this._canvasSize.height+"px",this.canvas.width=this._canvasSize.width*t,this.canvas.height=this._canvasSize.height*t,this._emitCanvasConfigured()},t.prototype._emitCanvasConfigured=function(){var t=this;this._canvasConfiguredListeners.forEach((function(i){return i.call(t)}))},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");var i=t.devicePixelRatio;this._resolutionMediaQueryList=t.matchMedia("all and (resolution: "+i+"dppx)"),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){this._configureCanvas(),this._reinstallResolutionListener()},t}();function f(t,i){var n={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[i];t.setLineDash(n)}function c(t,i,n,s){t.beginPath();var e=t.lineWidth%2?.5:0;t.moveTo(n,i+e),t.lineTo(s,i+e),t.stroke()}function v(t,i){if(!t)throw new Error("Assertion failed"+(i?": "+i:""))}function d(t){if(void 0===t)throw new Error("Value is undefined");return t}function p(t){if(null===t)throw new Error("Value is null");return t}function m(t){return p(d(t))}(a=o||(o={}))[a.Simple=0]="Simple",a[a.WithSteps=1]="WithSteps",a[a.Curved=2]="Curved",function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(u||(u={}));var g={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function b(t){return t<0?0:t>255?255:Math.round(t)||0}function M(t){return t<=0||t>0?t<0?0:t>1?1:Math.round(1e4*t)/1e4:0}var w=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,y=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,N=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,C=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function _(t){(t=t.toLowerCase())in g&&(t=g[t]);var i=C.exec(t)||N.exec(t);if(i)return[b(parseInt(i[1],10)),b(parseInt(i[2],10)),b(parseInt(i[3],10)),M(i.length<5?1:parseFloat(i[4]))];var n=y.exec(t);if(n)return[b(parseInt(n[1],16)),b(parseInt(n[2],16)),b(parseInt(n[3],16)),1];var s=w.exec(t);if(s)return[b(17*parseInt(s[1],16)),b(17*parseInt(s[2],16)),b(17*parseInt(s[3],16)),1];throw new Error("Cannot parse color: "+t)}function S(t){var i,n=_(t);return{t:"rgb("+n[0]+", "+n[1]+", "+n[2]+")",i:(i=n,.199*i[0]+.687*i[1]+.114*i[2]>160?"black":"white")}}var T=function(){function t(){this.h=[]}var i=t.prototype;return i.l=function(t,i,n){var s={o:t,_:i,u:!0===n};this.h.push(s)},i.p=function(t){var i=this.h.findIndex((function(i){return t===i.o}));i>-1&&this.h.splice(i,1)},i.v=function(t){this.h=this.h.filter((function(i){return i._!==t}))},i.m=function(t,i){var n=[].concat(this.h);this.h=this.h.filter((function(t){return!t.u})),n.forEach((function(n){return n.o(t,i)}))},i.g=function(){return this.h.length>0},i.M=function(){this.h=[]},t}();function F(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];for(var e=0,h=n;e<h.length;e++){var r=h[e];for(var o in r)void 0!==r[o]&&("object"!=typeof r[o]||void 0===t[o]?t[o]=r[o]:F(t[o],r[o]))}return t}function x(t){return"number"==typeof t&&isFinite(t)}function k(t){return"number"==typeof t&&t%1==0}function E(t){return"string"==typeof t}function I(t){return"boolean"==typeof t}function O(t){var i,n,s,e=t;if(!e||"object"!=typeof e)return e;for(n in i=Array.isArray(e)?[]:{},e)e.hasOwnProperty(n)&&(s=e[n],i[n]=s&&"object"==typeof s?O(s):s);return i}function L(t){return null!==t}function R(t){return null===t?void 0:t}var V="'Trebuchet MS', Roboto, Ubuntu, sans-serif";function P(t,i,n){return void 0===i&&(i=V),(n=void 0!==n?n+" ":"")+t+"px "+i}var G=function(){function t(t){this.S={k:1,C:4,T:NaN,D:"",P:"",O:"",N:0,R:0,A:0,I:0,L:0},this.B=t}var i=t.prototype;return i.V=function(){var t=this.S,i=this.F(),n=this.W();return t.T===i&&t.P===n||(t.T=i,t.P=n,t.D=P(i,n),t.I=Math.floor(i/3.5),t.N=t.I,t.R=Math.max(Math.ceil(i/2-t.C/2),0),t.A=Math.ceil(i/2+t.C/2),t.L=Math.round(i/10)),t.O=this.j(),this.S},i.j=function(){return this.B.V().layout.textColor},i.F=function(){return this.B.V().layout.fontSize},i.W=function(){return this.B.V().layout.fontFamily},t}(),j=function(){function t(){this.$=[]}var i=t.prototype;return i.H=function(t){this.$=t},i.U=function(t,i,n,s){this.$.forEach((function(e){t.save(),e.U(t,i,n,s),t.restore()}))},t}(),Z=function(){function t(){}var i=t.prototype;return i.U=function(t,i,n,s){t.save(),t.scale(i,i),this.q(t,n,s),t.restore()},i.Y=function(t,i,n,s){t.save(),t.scale(i,i),this.X(t,n,s),t.restore()},i.X=function(t,i,n){},t}(),A=function(t){function i(){var i;return(i=t.apply(this,arguments)||this).K=null,i}(0,h.Z)(i,t);var n=i.prototype;return n.Z=function(t){this.K=t},n.q=function(t){if(null!==this.K&&null!==this.K.G){var i=this.K.G,n=this.K,s=function(s){t.beginPath();for(var e=i.to-1;e>=i.from;--e){var h=n.J[e];t.moveTo(h.tt,h.it),t.arc(h.tt,h.it,s,0,2*Math.PI)}t.fill()};t.fillStyle=n.st,s(n.nt+2),t.fillStyle=n.et,s(n.nt)}},i}(Z);function D(){return{J:[{tt:0,it:0,rt:0,ht:0}],et:"",st:"",nt:0,G:null}}var U={from:0,to:1},B=function(){function t(t,i){this.lt=new j,this.ot=[],this._t=[],this.ut=!0,this.B=t,this.ct=i,this.lt.H(this.ot)}var i=t.prototype;return i.dt=function(t){var i=this.B.ft();i.length!==this.ot.length&&(this._t=i.map(D),this.ot=this._t.map((function(t){var i=new A;return i.Z(t),i})),this.lt.H(this.ot)),this.ut=!0},i.vt=function(t,i,n){return this.ut&&(this.wt(t),this.ut=!1),this.lt},i.wt=function(t){var i=this,n=this.B.ft(),s=this.ct.bt(),e=this.B.gt();n.forEach((function(n,h){var r,o=i._t[h],u=n.Mt(s);if(null!==u&&n.St()){var a=p(n.yt());o.et=u.kt,o.nt=u.nt,o.J[0].ht=u.ht,o.J[0].it=n.Ct().xt(u.ht,a.Tt),o.st=null!==(r=u.Dt)&&void 0!==r?r:i.B.Pt(o.J[0].it/t),o.J[0].rt=s,o.J[0].tt=e.Ot(s),o.G=U}else o.G=null}))},t}(),z=function(){function t(t){this.Nt=t}return t.prototype.U=function(t,i,n,s){if(null!==this.Nt){var e=this.Nt.Rt.St,h=this.Nt.At.St;if(e||h){t.save();var r=Math.round(this.Nt.tt*i),o=Math.round(this.Nt.it*i),u=Math.ceil(this.Nt.Et*i),a=Math.ceil(this.Nt.It*i);t.lineCap="butt",e&&r>=0&&(t.lineWidth=Math.floor(this.Nt.Rt.Lt*i),t.strokeStyle=this.Nt.Rt.O,t.fillStyle=this.Nt.Rt.O,f(t,this.Nt.Rt.Bt),function(t,i,n,s){t.beginPath();var e=t.lineWidth%2?.5:0;t.moveTo(i+e,0),t.lineTo(i+e,s),t.stroke()}(t,r,0,a)),h&&o>=0&&(t.lineWidth=Math.floor(this.Nt.At.Lt*i),t.strokeStyle=this.Nt.At.O,t.fillStyle=this.Nt.At.O,f(t,this.Nt.At.Bt),c(t,o,0,u)),t.restore()}}},t}(),J=function(){function t(t){this.ut=!0,this.Vt={Rt:{Lt:1,Bt:0,O:"",St:!1},At:{Lt:1,Bt:0,O:"",St:!1},Et:0,It:0,tt:0,it:0},this.Ft=new z(this.Vt),this.zt=t}var i=t.prototype;return i.dt=function(){this.ut=!0},i.vt=function(t,i){return this.ut&&(this.wt(),this.ut=!1),this.Ft},i.wt=function(){var t=this.zt.St(),i=p(this.zt.Wt()),n=i.jt().V().crosshair,s=this.Vt;s.At.St=t&&this.zt.$t(i),s.Rt.St=t&&this.zt.Ht(),s.At.Lt=n.horzLine.width,s.At.Bt=n.horzLine.style,s.At.O=n.horzLine.color,s.Rt.Lt=n.vertLine.width,s.Rt.Bt=n.vertLine.style,s.Rt.O=n.vertLine.color,s.Et=i.Ut(),s.It=i.qt(),s.tt=this.zt.Yt(),s.it=this.zt.Xt()},t}();function K(t,i,n,s,e,h){t.fillRect(i+h,n,s-2*h,h),t.fillRect(i+h,n+e-h,s-2*h,h),t.fillRect(i,n,h,e),t.fillRect(i+s-h,n,h,e)}function W(t,i,n){t.save(),t.scale(i,i),n(),t.restore()}function q(t,i,n,s,e,h){t.save(),t.globalCompositeOperation="copy",t.fillStyle=h,t.fillRect(i,n,s,e),t.restore()}function H(t,i,n,s,e,h,r){t.save(),t.globalCompositeOperation="copy";var o=t.createLinearGradient(0,0,0,e);o.addColorStop(0,h),o.addColorStop(1,r),t.fillStyle=o,t.fillRect(i,n,s,e),t.restore()}var Y,$=function(){function t(t,i){this.Z(t,i)}var i=t.prototype;return i.Z=function(t,i){this.Nt=t,this.Kt=i},i.U=function(t,i,n,s,e,h){if(this.Nt.St){t.font=i.D;var r=this.Nt.Zt||!this.Nt.Gt?i.C:0,o=i.k,u=i.I,a=i.N,l=i.R,f=i.A,c=this.Nt.Jt,v=Math.ceil(n.Qt(t,c)),d=i.L,p=i.T+u+a,m=Math.ceil(.5*p),g=o+v+l+f+r,b=this.Kt.ti;this.Kt.ii&&(b=this.Kt.ii);var M,w,y=(b=Math.round(b))-m,N=y+p,C="right"===e,_=C?s:0,S=Math.ceil(s*h),T=_;if(t.fillStyle=this.Kt.t,t.lineWidth=1,t.lineCap="butt",c){C?(M=_-r,w=(T=_-g)+f):(T=_+g,M=_+r,w=_+o+r+l);var F=Math.max(1,Math.floor(h)),x=Math.max(1,Math.floor(o*h)),k=C?S:0,E=Math.round(y*h),I=Math.round(T*h),O=Math.round(b*h)-Math.floor(.5*h),L=O+F+(O-E),R=Math.round(M*h);t.save(),t.beginPath(),t.moveTo(k,E),t.lineTo(I,E),t.lineTo(I,L),t.lineTo(k,L),t.fill(),t.fillStyle=this.Nt.Dt,t.fillRect(C?S-x:0,E,x,L-E),this.Nt.Zt&&(t.fillStyle=this.Kt.O,t.fillRect(k,O,R-k,F)),t.textAlign="left",t.fillStyle=this.Kt.O,W(t,h,(function(){t.fillText(c,w,N-a-d)})),t.restore()}}},i.qt=function(t,i){return this.Nt.St?t.T+t.I+t.N:0},t}(),Q=function(){function t(t){this.si={ti:0,O:"#FFF",t:"#000"},this.ni={Jt:"",St:!1,Zt:!0,Gt:!1,Dt:""},this.ei={Jt:"",St:!1,Zt:!1,Gt:!0,Dt:""},this.ut=!0,this.ri=new(t||$)(this.ni,this.si),this.hi=new(t||$)(this.ei,this.si)}var i=t.prototype;return i.Jt=function(){return this.li(),this.ni.Jt},i.ti=function(){return this.li(),this.si.ti},i.dt=function(){this.ut=!0},i.qt=function(t,i){return void 0===i&&(i=!1),Math.max(this.ri.qt(t,i),this.hi.qt(t,i))},i.ai=function(){return this.si.ii||0},i.oi=function(t){this.si.ii=t},i._i=function(){return this.li(),this.ni.St||this.ei.St},i.ui=function(){return this.li(),this.ni.St},i.vt=function(t){return this.li(),this.ni.Zt=this.ni.Zt&&t.V().ticksVisible,this.ei.Zt=this.ei.Zt&&t.V().ticksVisible,this.ri.Z(this.ni,this.si),this.hi.Z(this.ei,this.si),this.ri},i.ci=function(){return this.li(),this.ri.Z(this.ni,this.si),this.hi.Z(this.ei,this.si),this.hi},i.li=function(){this.ut&&(this.ni.Zt=!0,this.ei.Zt=!1,this.di(this.ni,this.ei,this.si))},t}(),X=function(t){function i(i,n,s){var e;return(e=t.call(this)||this).zt=i,e.fi=n,e.pi=s,e}return(0,h.Z)(i,t),i.prototype.di=function(t,i,n){t.St=!1;var s=this.zt.V().horzLine;if(s.labelVisible){var e=this.fi.yt();if(this.zt.St()&&!this.fi.vi()&&null!==e){var h=S(s.labelBackgroundColor);n.t=h.t,n.O=h.i;var r=this.pi(this.fi);n.ti=r.ti,t.Jt=this.fi.mi(r.ht,e),t.St=!0}}},i}(Q),tt=/[1-9]/g,it=function(){function t(){this.Nt=null}var i=t.prototype;return i.Z=function(t){this.Nt=t},i.U=function(t,i,n){var s=this;if(null!==this.Nt&&!1!==this.Nt.St&&0!==this.Nt.Jt.length){t.font=i.D;var e=Math.round(i.wi.Qt(t,this.Nt.Jt,tt));if(!(e<=0)){t.save();var h=i.bi,r=e+2*h,o=r/2,u=this.Nt.Ut,a=this.Nt.ti,l=Math.floor(a-o)+.5;l<0?(a+=Math.abs(0-l),l=Math.floor(a-o)+.5):l+r>u&&(a-=Math.abs(u-(l+r)),l=Math.floor(a-o)+.5);var f=l+r,c=0+i.k+i.I+i.T+i.N;t.fillStyle=this.Nt.t;var v=Math.round(l*n),d=Math.round(0*n),m=Math.round(f*n),g=Math.round(c*n);if(t.fillRect(v,d,m-v,g-d),this.Nt.Zt){var b=Math.round(this.Nt.ti*n),M=d,w=Math.round((M+i.k+i.C)*n);t.fillStyle=this.Nt.O;var y=Math.max(1,Math.floor(n)),N=Math.floor(.5*n);t.fillRect(b-N,M,y,w-M)}var C=c-i.L-i.N;t.textAlign="left",t.fillStyle=this.Nt.O,W(t,n,(function(){t.fillText(p(s.Nt).Jt,l+h,C)})),t.restore()}}},t}(),nt=function(){function t(t,i,n){this.ut=!0,this.Ft=new it,this.Vt={St:!1,t:"#4c525e",O:"white",Jt:"",Ut:0,ti:NaN,Zt:!0},this.ct=t,this.gi=i,this.pi=n}var i=t.prototype;return i.dt=function(){this.ut=!0},i.vt=function(){return this.ut&&(this.wt(),this.ut=!1),this.Ft.Z(this.Vt),this.Ft},i.wt=function(){var t=this.Vt;t.St=!1;var i=this.ct.V().vertLine;if(i.labelVisible){var n=this.gi.gt();if(!n.vi()){t.Ut=n.Ut();var s=this.pi();if(s.rt){t.ti=s.ti;var e=n.Mi(this.ct.bt());t.Jt=n.Si(p(e)),t.St=!0;var h=S(i.labelBackgroundColor);t.t=h.t,t.O=h.i,t.Zt=n.V().ticksVisible}}}},t}(),st=function(){function t(){this.yi=null,this.ki=0}var i=t.prototype;return i.xi=function(){return this.ki},i.Ci=function(t){this.ki=t},i.Ct=function(){return this.yi},i.Ti=function(t){this.yi=t},i.Di=function(){return[]},i.St=function(){return!0},t}();!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet"}(Y||(Y={}));var et=function(t){function i(i,n){var s;(s=t.call(this)||this).Pi=null,s.Oi=NaN,s.Ni=0,s.Ri=!0,s.Ai=new Map,s.Ei=!1,s.Ii=NaN,s.Li=NaN,s.Bi=NaN,s.Vi=NaN,s.gi=i,s.Fi=n,s.zi=new B(i,e(s)),s.Wi=function(t){var i=s.Li,n=s.Oi;if(t===p(s.Pi).ji())return{ht:n,ti:i};var e=p(t.yt());return{ht:t.$i(i,e),ti:i}};var h=function(){return{rt:s.gi.gt().Hi(s.Ni),ti:s.Yt()}};return s.Ui=new nt(e(s),i,h),s.qi=new J(e(s)),s}(0,h.Z)(i,t);var n=i.prototype;return n.V=function(){return this.Fi},n.Yi=function(t,i){this.Bi=t,this.Vi=i},n.Xi=function(){this.Bi=NaN,this.Vi=NaN},n.Ki=function(){return this.Bi},n.Zi=function(){return this.Vi},n.Gi=function(t,i,n){this.Ei||(this.Ei=!0),this.Ri=!0,this.Ji(t,i,n)},n.bt=function(){return this.Ni},n.Yt=function(){return this.Ii},n.Xt=function(){return this.Li},n.St=function(){return this.Ri},n.Qi=function(){this.Ri=!1,this.ts(),this.Oi=NaN,this.Ii=NaN,this.Li=NaN,this.Pi=null,this.Xi()},n.ss=function(t){return null!==this.Pi?[this.qi,this.zi]:[]},n.$t=function(t){return t===this.Pi&&this.Fi.horzLine.visible},n.Ht=function(){return this.Fi.vertLine.visible},n.ns=function(t,i){this.Ri&&this.Pi===t||this.Ai.clear();var n=[];return this.Pi===t&&n.push(this.es(this.Ai,i,this.Wi)),n},n.Di=function(){return this.Ri?[this.Ui]:[]},n.Wt=function(){return this.Pi},n.rs=function(){this.qi.dt(),this.Ai.forEach((function(t){return t.dt()})),this.Ui.dt(),this.zi.dt()},n.hs=function(t){return t&&!t.ji().vi()?t.ji():null},n.Ji=function(t,i,n){this.ls(t,i,n)&&this.rs()},n.ls=function(t,i,n){var s=this.Ii,e=this.Li,h=this.Oi,r=this.Ni,o=this.Pi,u=this.hs(n);this.Ni=t,this.Ii=isNaN(t)?NaN:this.gi.gt().Ot(t),this.Pi=n;var a=null!==u?u.yt():null;return null!==u&&null!==a?(this.Oi=i,this.Li=u.xt(i,a)):(this.Oi=NaN,this.Li=NaN),s!==this.Ii||e!==this.Li||r!==this.Ni||h!==this.Oi||o!==this.Pi},n.ts=function(){var t=this.gi.ft().map((function(t){return t._s().os()})).filter(L),i=0===t.length?null:Math.max.apply(Math,t);this.Ni=null!==i?i:NaN},n.es=function(t,i,n){var s=t.get(i);return void 0===s&&(s=new X(this,i,n),t.set(i,s)),s},i}(st);function ht(t){return"left"===t||"right"===t}var rt=function(){function t(t){this.us=new Map,this.cs=[],this.ds=t}var i=t.prototype;return i.fs=function(t,i){var n=function(t,i){return void 0===t?i:{ps:Math.max(t.ps,i.ps),vs:t.vs||i.vs}}(this.us.get(t),i);this.us.set(t,n)},i.ws=function(){return this.ds},i.bs=function(t){var i=this.us.get(t);return void 0===i?{ps:this.ds}:{ps:Math.max(this.ds,i.ps),vs:i.vs}},i.gs=function(){this.cs=[{Ms:0}]},i.Ss=function(t){this.cs=[{Ms:1,Tt:t}]},i.ys=function(){this.cs=[{Ms:4}]},i.ks=function(t){this.cs.push({Ms:2,Tt:t})},i.xs=function(t){this.cs.push({Ms:3,Tt:t})},i.Cs=function(){return this.cs},i.Ts=function(t){for(var i,n=this,e=(0,s.Z)(t.cs);!(i=e()).done;){var h=i.value;this.Ds(h)}this.ds=Math.max(this.ds,t.ds),t.us.forEach((function(t,i){n.fs(i,t)}))},i.Ds=function(t){switch(t.Ms){case 0:this.gs();break;case 1:this.Ss(t.Tt);break;case 2:this.ks(t.Tt);break;case 3:this.xs(t.Tt);break;case 4:this.ys()}},t}();function ot(t,i){if(!x(t))return"n/a";if(!k(i))throw new TypeError("invalid length");if(i<0||i>16)throw new TypeError("invalid length");return 0===i?t.toString():("0000000000000000"+t.toString()).slice(-i)}var ut=function(){function t(t,i){if(i||(i=1),x(t)&&k(t)||(t=100),t<0)throw new TypeError("invalid base");this.fi=t,this.Ps=i,this.Os()}var i=t.prototype;return i.format=function(t){var i=t<0?"\u2212":"";return t=Math.abs(t),i+this.Ns(t)},i.Os=function(){if(this.Rs=0,this.fi>0&&this.Ps>0)for(var t=this.fi;t>1;)t/=10,this.Rs++},i.Ns=function(t){var i=this.fi/this.Ps,n=Math.floor(t),s="",e=void 0!==this.Rs?this.Rs:NaN;if(i>1){var h=+(Math.round(t*i)-n*i).toFixed(this.Rs);h>=i&&(h-=i,n+=1),s="."+ot(+h.toFixed(this.Rs)*this.Ps,e)}else n=Math.round(n*i)/i,e>0&&(s="."+ot(0,e));return n.toFixed(0)+s},t}(),at=function(t){function i(i){return void 0===i&&(i=100),t.call(this,i)||this}return(0,h.Z)(i,t),i.prototype.format=function(i){return t.prototype.format.call(this,i)+"%"},i}(ut),lt=function(){function t(t){this.As=t}var i=t.prototype;return i.format=function(t){var i="";return t<0&&(i="-",t=-t),t<995?i+this.Es(t):t<999995?i+this.Es(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),i+this.Es(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),i+this.Es(t/1e9)+"B")},i.Es=function(t){var i=Math.pow(10,this.As);return((t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.As).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(function(t,i){return i}))},t}();function ft(t,i,n,s){if(0!==i.length){var e=i[s.from].tt,h=i[s.from].it;t.moveTo(e,h);for(var r=s.from+1;r<s.to;++r){var o=i[r];switch(n){case 0:t.lineTo(o.tt,o.it);break;case 1:t.lineTo(o.tt,i[r-1].it),t.lineTo(o.tt,o.it);break;case 2:var u=dt(i,r-1,r),a=u[0],l=u[1];t.bezierCurveTo(a.tt,a.it,l.tt,l.it,o.tt,o.it)}}}}function ct(t,i){return{tt:t.tt-i.tt,it:t.it-i.it}}function vt(t,i){return{tt:t.tt/i,it:t.it/i}}function dt(t,i,n){var s,e,h=Math.max(0,i-1),r=Math.min(t.length-1,n+1);return[(s=t[i],e=vt(ct(t[n],t[h]),6),{tt:s.tt+e.tt,it:s.it+e.it}),ct(t[n],vt(ct(t[r],t[i]),6))]}var pt=function(t){function i(){var i;return(i=t.apply(this,arguments)||this).K=null,i}(0,h.Z)(i,t);var n=i.prototype;return n.Z=function(t){this.K=t},n.q=function(t){if(null!==this.K&&0!==this.K.J.length&&null!==this.K.G){if(t.lineCap="butt",t.lineJoin="round",t.lineWidth=this.K.Lt,f(t,this.K.Bt),t.lineWidth=1,t.beginPath(),1===this.K.J.length){var i=this.K.J[0],n=this.K.Is/2;t.moveTo(i.tt-n,this.K.Ls),t.lineTo(i.tt-n,i.it),t.lineTo(i.tt+n,i.it),t.lineTo(i.tt+n,this.K.Ls)}else t.moveTo(this.K.J[this.K.G.from].tt,this.K.Ls),t.lineTo(this.K.J[this.K.G.from].tt,this.K.J[this.K.G.from].it),ft(t,this.K.J,this.K.Bs,this.K.G),this.K.G.to>this.K.G.from&&(t.lineTo(this.K.J[this.K.G.to-1].tt,this.K.Ls),t.lineTo(this.K.J[this.K.G.from].tt,this.K.Ls));t.closePath(),t.fillStyle=this.Vs(t),t.fill()}},i}(Z),mt=function(t){function i(){return t.apply(this,arguments)||this}return(0,h.Z)(i,t),i.prototype.Vs=function(t){var i=this.K,n=t.createLinearGradient(0,0,0,i.Fs);return n.addColorStop(0,i.zs),n.addColorStop(1,i.Ws),n},i}(pt),gt=function(t){function i(){var i;return(i=t.apply(this,arguments)||this).K=null,i}(0,h.Z)(i,t);var n=i.prototype;return n.Z=function(t){this.K=t},n.q=function(t){if(null!==this.K&&0!==this.K.J.length&&null!==this.K.G)if(t.lineCap="butt",t.lineWidth=this.K.Lt,f(t,this.K.Bt),t.strokeStyle=this.js(t),t.lineJoin="round",1===this.K.J.length){t.beginPath();var i=this.K.J[0];t.moveTo(i.tt-this.K.Is/2,i.it),t.lineTo(i.tt+this.K.Is/2,i.it),void 0!==i.O&&(t.strokeStyle=i.O),t.stroke()}else this.$s(t,this.K)},n.$s=function(t,i){t.beginPath(),ft(t,i.J,i.Bs,i.G),t.stroke()},i}(Z),bt=function(t){function i(){return t.apply(this,arguments)||this}(0,h.Z)(i,t);var n=i.prototype;return n.$s=function(t,i){var n,s,e=i.J,h=i.G,r=i.Bs,o=i.et;if(0!==e.length&&null!==h){t.beginPath();var u=e[h.from];t.moveTo(u.tt,u.it);var a=null!==(n=u.O)&&void 0!==n?n:o;t.strokeStyle=a;for(var l=function(i){t.stroke(),t.beginPath(),t.strokeStyle=i,a=i},f=h.from+1;f<h.to;++f){var c=e[f],v=null!==(s=c.O)&&void 0!==s?s:o;switch(r){case 0:t.lineTo(c.tt,c.it);break;case 1:t.lineTo(c.tt,e[f-1].it),v!==a&&(l(v),t.lineTo(c.tt,e[f-1].it)),t.lineTo(c.tt,c.it);break;case 2:var d=dt(e,f-1,f),p=d[0],m=d[1];t.bezierCurveTo(p.tt,p.it,m.tt,m.it,c.tt,c.it)}1!==r&&v!==a&&(l(v),t.moveTo(c.tt,c.it))}t.stroke()}},n.js=function(){return this.K.et},i}(gt);function Mt(t,i,n,s,e){void 0===s&&(s=0),void 0===e&&(e=t.length);for(var h=e-s;0<h;){var r=h>>1,o=s+r;n(t[o],i)?(s=o+1,h-=r+1):h=r}return s}function wt(t,i,n,s,e){void 0===s&&(s=0),void 0===e&&(e=t.length);for(var h=e-s;0<h;){var r=h>>1,o=s+r;n(i,t[o])?h=r:(s=o+1,h-=r+1)}return s}function yt(t,i){return t.rt<i}function Nt(t,i){return t<i.rt}function Ct(t,i,n){var s=i.Hs(),e=i.Us(),h=Mt(t,s,yt),r=wt(t,e,Nt);if(!n)return{from:h,to:r};var o=h,u=r;return h>0&&h<t.length&&t[h].rt>=s&&(o=h-1),r>0&&r<t.length&&t[r-1].rt<=e&&(u=r+1),{from:o,to:u}}var _t=function(){function t(t,i,n){this.qs=!0,this.Ys=!0,this.Xs=!0,this.Ks=[],this.Zs=null,this.Gs=t,this.Js=i,this.Qs=n}var i=t.prototype;return i.dt=function(t){this.qs=!0,"data"===t&&(this.Ys=!0),"options"===t&&(this.Xs=!0)},i.tn=function(){this.Ys&&(this.sn(),this.Ys=!1),this.qs&&(this.nn(),this.qs=!1),this.Xs&&(this.en(),this.Xs=!1)},i.rn=function(){this.Zs=null},i.nn=function(){var t=this.Gs.Ct(),i=this.Js.gt();if(this.rn(),!i.vi()&&!t.vi()){var n=i.hn();if(null!==n&&0!==this.Gs._s().ln()){var s=this.Gs.yt();null!==s&&(this.Zs=Ct(this.Ks,n,this.Qs),this.an(t,i,s.Tt))}}},t}(),St=function(t){function i(i,n){return t.call(this,i,n,!0)||this}(0,h.Z)(i,t);var n=i.prototype;return n.an=function(t,i,n){i.on(this.Ks,R(this.Zs)),t._n(this.Ks,n,R(this.Zs))},n.un=function(t,i){return{rt:t,ht:i,tt:NaN,it:NaN}},n.en=function(){},n.sn=function(){var t=this,i=this.Gs.cn();this.Ks=this.Gs._s().dn().map((function(n){var s=n.Tt[3];return t.fn(n.pn,s,i)}))},i}(_t),Tt=function(t){function i(i,n){var s;return(s=t.call(this,i,n)||this).Ft=new j,s.vn=new mt,s.mn=new bt,s.Ft.H([s.vn,s.mn]),s}(0,h.Z)(i,t);var n=i.prototype;return n.vt=function(t,i){if(!this.Gs.St())return null;var n=this.Gs.V();return this.tn(),this.vn.Z({Bs:n.lineType,J:this.Ks,Bt:n.lineStyle,Lt:n.lineWidth,zs:n.topColor,Ws:n.bottomColor,Ls:t,Fs:t,G:this.Zs,Is:this.Js.gt().wn()}),this.mn.Z({Bs:n.lineType,J:this.Ks,et:n.lineColor,Bt:n.lineStyle,Lt:n.lineWidth,G:this.Zs,Is:this.Js.gt().wn()}),this.Ft},n.fn=function(t,i){return this.un(t,i)},i}(St),Ft=function(){function t(){this.Nt=null,this.bn=0,this.gn=0}var i=t.prototype;return i.Z=function(t){this.Nt=t},i.U=function(t,i,n,s){if(null!==this.Nt&&0!==this.Nt._s.length&&null!==this.Nt.G){this.bn=this.Mn(i),this.bn>=2&&Math.max(1,Math.floor(i))%2!=this.bn%2&&this.bn--,this.gn=this.Nt.Sn?Math.min(this.bn,Math.floor(i)):this.bn;for(var e=null,h=this.gn<=this.bn&&this.Nt.wn>=Math.floor(1.5*i),r=this.Nt.G.from;r<this.Nt.G.to;++r){var o=this.Nt._s[r];e!==o.O&&(t.fillStyle=o.O,e=o.O);var u=Math.floor(.5*this.gn),a=Math.round(o.tt*i),l=a-u,f=this.gn,c=l+f-1,v=Math.min(o.yn,o.kn),d=Math.max(o.yn,o.kn),p=Math.round(v*i)-u,m=Math.round(d*i)+u,g=Math.max(m-p,this.gn);t.fillRect(l,p,f,g);var b=Math.ceil(1.5*this.bn);if(h){if(this.Nt.xn){var M=a-b,w=Math.max(p,Math.round(o.Cn*i)-u),y=w+f-1;y>p+g-1&&(w=(y=p+g-1)-f+1),t.fillRect(M,w,l-M,y-w+1)}var N=a+b,C=Math.max(p,Math.round(o.Tn*i)-u),_=C+f-1;_>p+g-1&&(C=(_=p+g-1)-f+1),t.fillRect(c+1,C,N-c,_-C+1)}}}},i.Mn=function(t){var i=Math.floor(t);return Math.max(i,Math.floor(function(t,i){return Math.floor(.3*t*i)}(p(this.Nt).wn,t)))},t}(),xt=function(t){function i(i,n){return t.call(this,i,n,!1)||this}(0,h.Z)(i,t);var n=i.prototype;return n.an=function(t,i,n){i.on(this.Ks,R(this.Zs)),t.Dn(this.Ks,n,R(this.Zs))},n.Pn=function(t,i,n){return{rt:t,On:i.Tt[0],Nn:i.Tt[1],Rn:i.Tt[2],An:i.Tt[3],tt:NaN,Cn:NaN,yn:NaN,kn:NaN,Tn:NaN}},n.sn=function(){var t=this,i=this.Gs.cn();this.Ks=this.Gs._s().dn().map((function(n){return t.fn(n.pn,n,i)}))},i}(_t),kt=function(t){function i(){var i;return(i=t.apply(this,arguments)||this).Ft=new Ft,i}(0,h.Z)(i,t);var n=i.prototype;return n.vt=function(t,i){if(!this.Gs.St())return null;var n=this.Gs.V();this.tn();var s={_s:this.Ks,wn:this.Js.gt().wn(),xn:n.openVisible,Sn:n.thinBars,G:this.Zs};return this.Ft.Z(s),this.Ft},n.en=function(){var t=this;this.Ks.forEach((function(i){i.O=t.Gs.cn().In(i.rt).En}))},n.fn=function(t,i,n){return Object.assign(Object.assign({},this.Pn(t,i,n)),{O:n.In(t).En})},i}(xt);function Et(t,i,n){return Math.min(Math.max(t,i),n)}function It(t,i,n){return i-t<=n}function Ot(t){return t<=0?NaN:Math.log(t)/Math.log(10)}function Lt(t){var i=Math.ceil(t);return i%2!=0?i-1:i}function Rt(t){var i=Math.ceil(t);return i%2==0?i-1:i}var Vt=function(t){function i(){return t.apply(this,arguments)||this}return(0,h.Z)(i,t),i.prototype.Vs=function(t){var i=this.K,n=t.createLinearGradient(0,0,0,i.Fs),s=Et(i.Ls/i.Fs,0,1);return n.addColorStop(0,i.Ln),n.addColorStop(s,i.Bn),n.addColorStop(s,i.Vn),n.addColorStop(1,i.Fn),n},i}(pt),Pt=function(t){function i(){return t.apply(this,arguments)||this}return(0,h.Z)(i,t),i.prototype.js=function(t){var i=this.K,n=t.createLinearGradient(0,0,0,i.Fs),s=Et(i.Ls/i.Fs,0,1);return n.addColorStop(0,i.zs),n.addColorStop(s,i.zs),n.addColorStop(s,i.Ws),n.addColorStop(1,i.Ws),n},i}(gt),Gt=function(t){function i(i,n){var s;return(s=t.call(this,i,n)||this).zn=new Vt,s.Wn=new Pt,s.lt=new j,s.lt.H([s.zn,s.Wn]),s}(0,h.Z)(i,t);var n=i.prototype;return n.vt=function(t,i){if(!this.Gs.St())return null;var n=this.Gs.yt();if(null===n)return null;var s=this.Gs.V();this.tn();var e=this.Gs.Ct().xt(s.baseValue.price,n.Tt),h=this.Js.gt().wn();return this.zn.Z({J:this.Ks,Ln:s.topFillColor1,Bn:s.topFillColor2,Vn:s.bottomFillColor1,Fn:s.bottomFillColor2,Lt:s.lineWidth,Bt:s.lineStyle,Bs:s.lineType,Ls:e,Fs:t,G:this.Zs,Is:h}),this.Wn.Z({J:this.Ks,zs:s.topLineColor,Ws:s.bottomLineColor,Lt:s.lineWidth,Bt:s.lineStyle,Bs:s.lineType,Ls:e,Fs:t,G:this.Zs,Is:h}),this.lt},n.fn=function(t,i){return this.un(t,i)},i}(St),jt=function(){function t(){this.Nt=null,this.bn=0}var i=t.prototype;return i.Z=function(t){this.Nt=t},i.U=function(t,i,n,s){if(null!==this.Nt&&0!==this.Nt._s.length&&null!==this.Nt.G){this.bn=function(t,i){if(t>=2.5&&t<=4)return Math.floor(3*i);var n=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),s=Math.floor(t*n*i),e=Math.floor(t*i),h=Math.min(s,e);return Math.max(Math.floor(i),h)}(this.Nt.wn,i),this.bn>=2&&Math.floor(i)%2!=this.bn%2&&this.bn--;var e=this.Nt._s;this.Nt.jn&&this.$n(t,e,this.Nt.G,i),this.Nt.Hn&&this.Un(t,e,this.Nt.G,this.Nt.wn,i);var h=this.qn(i);(!this.Nt.Hn||this.bn>2*h)&&this.Yn(t,e,this.Nt.G,i)}},i.$n=function(t,i,n,s){if(null!==this.Nt){var e="",h=Math.min(Math.floor(s),Math.floor(this.Nt.wn*s));h=Math.max(Math.floor(s),Math.min(h,this.bn));for(var r=Math.floor(.5*h),o=null,u=n.from;u<n.to;u++){var a=i[u];a.Xn!==e&&(t.fillStyle=a.Xn,e=a.Xn);var l=Math.round(Math.min(a.Cn,a.Tn)*s),f=Math.round(Math.max(a.Cn,a.Tn)*s),c=Math.round(a.yn*s),v=Math.round(a.kn*s),d=Math.round(s*a.tt)-r,p=d+h-1;null!==o&&(d=Math.max(o+1,d),d=Math.min(d,p));var m=p-d+1;t.fillRect(d,c,m,l-c),t.fillRect(d,f+1,m,v-f),o=p}}},i.qn=function(t){var i=Math.floor(1*t);this.bn<=2*i&&(i=Math.floor(.5*(this.bn-1)));var n=Math.max(Math.floor(t),i);return this.bn<=2*n?Math.max(Math.floor(t),Math.floor(1*t)):n},i.Un=function(t,i,n,s,e){if(null!==this.Nt)for(var h="",r=this.qn(e),o=null,u=n.from;u<n.to;u++){var a=i[u];a.Dt!==h&&(t.fillStyle=a.Dt,h=a.Dt);var l=Math.round(a.tt*e)-Math.floor(.5*this.bn),f=l+this.bn-1,c=Math.round(Math.min(a.Cn,a.Tn)*e),v=Math.round(Math.max(a.Cn,a.Tn)*e);if(null!==o&&(l=Math.max(o+1,l),l=Math.min(l,f)),this.Nt.wn*e>2*r)K(t,l,c,f-l+1,v-c+1,r);else{var d=f-l+1;t.fillRect(l,c,d,v-c+1)}o=f}},i.Yn=function(t,i,n,s){if(null!==this.Nt)for(var e="",h=this.qn(s),r=n.from;r<n.to;r++){var o=i[r],u=Math.round(Math.min(o.Cn,o.Tn)*s),a=Math.round(Math.max(o.Cn,o.Tn)*s),l=Math.round(o.tt*s)-Math.floor(.5*this.bn),f=l+this.bn-1;if(o.O!==e){var c=o.O;t.fillStyle=c,e=c}this.Nt.Hn&&(l+=h,u+=h,f-=h,a-=h),u>a||t.fillRect(l,u,f-l+1,a-u+1)}},t}(),Zt=function(t){function i(){var i;return(i=t.apply(this,arguments)||this).Ft=new jt,i}(0,h.Z)(i,t);var n=i.prototype;return n.vt=function(t,i){if(!this.Gs.St())return null;var n=this.Gs.V();this.tn();var s={_s:this.Ks,wn:this.Js.gt().wn(),jn:n.wickVisible,Hn:n.borderVisible,G:this.Zs};return this.Ft.Z(s),this.Ft},n.en=function(){var t=this;this.Ks.forEach((function(i){var n=t.Gs.cn().In(i.rt);i.O=n.En,i.Xn=n.Kn,i.Dt=n.Zn}))},n.fn=function(t,i,n){var s=n.In(t);return Object.assign(Object.assign({},this.Pn(t,i,n)),{O:s.En,Xn:s.Kn,Dt:s.Zn})},i}(xt),At=function(){function t(){this.Nt=null,this.Gn=[]}var i=t.prototype;return i.Z=function(t){this.Nt=t,this.Gn=[]},i.U=function(t,i,n,s){if(null!==this.Nt&&0!==this.Nt.J.length&&null!==this.Nt.G){this.Gn.length||this.Jn(i);for(var e=Math.max(1,Math.floor(i)),h=Math.round(this.Nt.Qn*i)-Math.floor(e/2),r=h+e,o=this.Nt.G.from;o<this.Nt.G.to;o++){var u=this.Nt.J[o],a=this.Gn[o-this.Nt.G.from],l=Math.round(u.it*i),f=void 0,c=void 0;t.fillStyle=u.O,l<=h?(f=l,c=r):(f=h,c=l-Math.floor(e/2)+e),t.fillRect(a.Hs,f,a.Us-a.Hs+1,c-f)}}},i.Jn=function(t){if(null!==this.Nt&&0!==this.Nt.J.length&&null!==this.Nt.G){var i=Math.ceil(this.Nt.wn*t)<=1?0:Math.max(1,Math.floor(t)),n=Math.round(this.Nt.wn*t)-i;this.Gn=new Array(this.Nt.G.to-this.Nt.G.from);for(var s=this.Nt.G.from;s<this.Nt.G.to;s++){var e=this.Nt.J[s],h=Math.round(e.tt*t),r=void 0,o=void 0;if(n%2){var u=(n-1)/2;r=h-u,o=h+u}else{var a=n/2;r=h-a,o=h+a-1}this.Gn[s-this.Nt.G.from]={Hs:r,Us:o,te:h,ie:e.tt*t,rt:e.rt}}for(var l=this.Nt.G.from+1;l<this.Nt.G.to;l++){var f=this.Gn[l-this.Nt.G.from],c=this.Gn[l-this.Nt.G.from-1];f.rt===c.rt+1&&f.Hs-c.Us!==i+1&&(c.te>c.ie?c.Us=f.Hs-i-1:f.Hs=c.Us+i+1)}for(var v=Math.ceil(this.Nt.wn*t),d=this.Nt.G.from;d<this.Nt.G.to;d++){var p=this.Gn[d-this.Nt.G.from];p.Us<p.Hs&&(p.Us=p.Hs);var m=p.Us-p.Hs+1;v=Math.min(m,v)}if(i>0&&v<4)for(var g=this.Nt.G.from;g<this.Nt.G.to;g++){var b=this.Gn[g-this.Nt.G.from];b.Us-b.Hs+1>v&&(b.te>b.ie?b.Us-=1:b.Hs+=1)}}else this.Gn=[]},t}();function Dt(t){return{J:[],wn:t,Qn:NaN,G:null}}function Ut(t,i,n){return{rt:t,ht:i,tt:NaN,it:NaN,O:n}}var Bt=function(t){function i(i,n){var s;return(s=t.call(this,i,n,!1)||this).lt=new j,s.se=Dt(0),s.Ft=new At,s}(0,h.Z)(i,t);var n=i.prototype;return n.vt=function(t,i){return this.Gs.St()?(this.tn(),this.lt):null},n.sn=function(){var t=this.Js.gt().wn();this.se=Dt(t);for(var i,n=0,e=0,h=this.Gs.V().color,r=(0,s.Z)(this.Gs._s().dn());!(i=r()).done;){var o=i.value,u=o.Tt[3],a=void 0!==o.O?o.O:h,l=Ut(o.pn,u,a);++n<this.se.J.length?this.se.J[n]=l:this.se.J.push(l),this.Ks[e++]={rt:o.pn,tt:0}}this.Ft.Z(this.se),this.lt.H([this.Ft])},n.en=function(){},n.rn=function(){t.prototype.rn.call(this),this.se.G=null},n.an=function(t,i,n){if(null!==this.Zs){var s=i.wn(),e=p(i.hn()),h=t.xt(this.Gs.V().base,n);i.on(this.se.J),t._n(this.se.J,n),this.se.Qn=h,this.se.G=Ct(this.se.J,e,!1),this.se.wn=s,this.Ft.Z(this.se)}},i}(_t),zt=function(t){function i(i,n){var s;return(s=t.call(this,i,n)||this).mn=new bt,s}(0,h.Z)(i,t);var n=i.prototype;return n.vt=function(t,i){if(!this.Gs.St())return null;var n=this.Gs.V();this.tn();var s={J:this.Ks,et:n.color,Bt:n.lineStyle,Bs:n.lineType,Lt:n.lineWidth,G:this.Zs,Is:this.Js.gt().wn()};return this.mn.Z(s),this.mn},n.en=function(){var t=this;this.Ks.forEach((function(i){i.O=t.Gs.cn().In(i.rt).En}))},n.fn=function(t,i,n){var s=this.un(t,i);return s.O=n.In(t).En,s},i}(St),Jt=/[2-9]/g,Kt=function(){function t(t){void 0===t&&(t=50),this.ne=new Map,this.ee=0,this.re=Array.from(new Array(t))}var i=t.prototype;return i.he=function(){this.ne.clear(),this.re.fill(void 0)},i.Qt=function(t,i,n){var s=n||Jt,e=String(i).replace(s,"0"),h=this.ne.get(e);if(void 0===h){if(0===(h=t.measureText(e).width)&&0!==i.length)return 0;var r=this.re[this.ee];void 0!==r&&this.ne.delete(r),this.re[this.ee]=e,this.ee=(this.ee+1)%this.re.length,this.ne.set(e,h)}return h},t}(),Wt=function(){function t(t){this.le=null,this.S=null,this.ae="right",this.oe=0,this._e=t}var i=t.prototype;return i.ue=function(t,i,n,s){this.le=t,this.S=i,this.oe=n,this.ae=s},i.U=function(t,i){null!==this.S&&null!==this.le&&this.le.U(t,this.S,this._e,this.oe,this.ae,i)},t}(),qt=function(){function t(t,i,n){this.ce=t,this._e=new Kt(50),this.de=i,this.B=n,this.F=-1,this.Ft=new Wt(this._e)}return t.prototype.vt=function(t,i){var n=this.B.fe(this.de);if(null===n)return null;var s=n.pe(this.de)?n.ve():this.de.Ct();if(null===s)return null;var e=n.me(s);if("overlay"===e)return null;var h=this.B.we();return h.T!==this.F&&(this.F=h.T,this._e.he()),this.Ft.ue(this.ce.ci(),h,i,e),this.Ft},t}(),Ht=function(){function t(){this.Nt=null}var i=t.prototype;return i.Z=function(t){this.Nt=t},i.U=function(t,i,n,s){if(null!==this.Nt&&!1!==this.Nt.St){var e=Math.round(this.Nt.it*i);if(!(e<0||e>Math.ceil(this.Nt.qt*i))){var h=Math.ceil(this.Nt.Ut*i);t.lineCap="butt",t.strokeStyle=this.Nt.O,t.lineWidth=Math.floor(this.Nt.Lt*i),f(t,this.Nt.Bt),c(t,e,0,h)}}},t}(),Yt=function(){function t(t){this.be={Ut:0,qt:0,it:0,O:"rgba(0, 0, 0, 0)",Lt:1,Bt:0,St:!1},this.ge=new Ht,this.ut=!0,this.Gs=t,this.Js=t.jt(),this.ge.Z(this.be)}var i=t.prototype;return i.dt=function(){this.ut=!0},i.vt=function(t,i){return this.Gs.St()?(this.ut&&(this.Me(t,i),this.ut=!1),this.ge):null},t}(),$t=function(t){function i(i){return t.call(this,i)||this}return(0,h.Z)(i,t),i.prototype.Me=function(t,i){this.be.St=!1;var n=this.Gs.Ct(),s=n.Se().Se;if(2===s||3===s){var e=this.Gs.V();if(e.baseLineVisible&&this.Gs.St()){var h=this.Gs.yt();null!==h&&(this.be.St=!0,this.be.it=n.xt(h.Tt,h.Tt),this.be.Ut=i,this.be.qt=t,this.be.O=e.baseLineColor,this.be.Lt=e.baseLineWidth,this.be.Bt=e.baseLineStyle)}}},i}(Yt),Qt=function(){function t(){this.Nt=null}var i=t.prototype;return i.Z=function(t){this.Nt=t},i.ye=function(){return this.Nt},i.U=function(t,i,n,s){var e=this.Nt;if(null!==e){t.save();var h=Math.max(1,Math.floor(i)),r=h%2/2,o=Math.round(e.ie.x*i)+r,u=e.ie.y*i;t.fillStyle=e.ke,t.beginPath();var a=Math.max(2,1.5*e.xe)*i;t.arc(o,u,a,0,2*Math.PI,!1),t.fill(),t.fillStyle=e.Ce,t.beginPath(),t.arc(o,u,e.nt*i,0,2*Math.PI,!1),t.fill(),t.lineWidth=h,t.strokeStyle=e.Te,t.beginPath(),t.arc(o,u,e.nt*i+h/2,0,2*Math.PI,!1),t.stroke(),t.restore()}},t}(),Xt=[{De:0,Pe:.25,Oe:4,Ne:10,Re:.25,Ae:0,Ee:.4,Ie:.8},{De:.25,Pe:.525,Oe:10,Ne:14,Re:0,Ae:0,Ee:.8,Ie:0},{De:.525,Pe:1,Oe:14,Ne:14,Re:0,Ae:0,Ee:0,Ie:0}];function ti(t,i,n,s){return function(t,i){if("transparent"===t)return t;var n=_(t),s=n[3];return"rgba("+n[0]+", "+n[1]+", "+n[2]+", "+i*s+")"}(t,n+(s-n)*i)}function ii(t,i){for(var n,e,h=t%2600/2600,r=(0,s.Z)(Xt);!(e=r()).done;){var o=e.value;if(h>=o.De&&h<=o.Pe){n=o;break}}v(void 0!==n,"Last price animation internal logic error");var u,a,l,f=(h-n.De)/(n.Pe-n.De);return{Ce:ti(i,f,n.Re,n.Ae),Te:ti(i,f,n.Ee,n.Ie),nt:(u=f,a=n.Oe,l=n.Ne,a+(l-a)*u)}}var ni=function(){function t(t){this.Ft=new Qt,this.ut=!0,this.Le=!0,this.Be=performance.now(),this.Ve=this.Be-1,this.Fe=t}var i=t.prototype;return i.ze=function(){this.Ve=this.Be-1,this.dt()},i.We=function(){if(this.dt(),2===this.Fe.V().lastPriceAnimation){var t=performance.now(),i=this.Ve-t;if(i>0)return void(i<650&&(this.Ve+=2600));this.Be=t,this.Ve=t+2600}},i.dt=function(){this.ut=!0},i.je=function(){this.Le=!0},i.St=function(){return 0!==this.Fe.V().lastPriceAnimation},i.$e=function(){switch(this.Fe.V().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Ve}},i.vt=function(t,i){return this.ut?(this.wt(t,i),this.ut=!1,this.Le=!1):this.Le&&(this.He(),this.Le=!1),this.Ft},i.wt=function(t,i){this.Ft.Z(null);var n=this.Fe.jt().gt(),s=n.hn(),e=this.Fe.yt();if(null!==s&&null!==e){var h=this.Fe.Ue(!0);if(!h.qe&&s.Ye(h.pn)){var r={x:n.Ot(h.pn),y:this.Fe.Ct().xt(h.ht,e.Tt)},o=h.O,u=this.Fe.V().lineWidth,a=ii(this.Xe(),o);this.Ft.Z({ke:o,xe:u,Ce:a.Ce,Te:a.Te,nt:a.nt,ie:r})}}},i.He=function(){var t=this.Ft.ye();if(null!==t){var i=ii(this.Xe(),t.ke);t.Ce=i.Ce,t.Te=i.Te,t.nt=i.nt}},i.Xe=function(){return this.$e()?performance.now()-this.Be:2599},t}();function si(t,i){return Rt(Math.min(Math.max(t,12),30)*i)}function ei(t,i){switch(t){case"arrowDown":case"arrowUp":return si(i,1);case"circle":return si(i,.8);case"square":return si(i,.7)}}function hi(t){return Lt(si(t,1))}function ri(t){return Math.max(si(t,.1),3)}function oi(t,i,n,s,e){var h=ei("square",n),r=(h-1)/2,o=t-r,u=i-r;return s>=o&&s<=o+h&&e>=u&&e<=u+h}function ui(t,i,n,s,e){var h=(ei("arrowUp",e)-1)/2,r=(Rt(e/2)-1)/2;i.beginPath(),t?(i.moveTo(n-h,s),i.lineTo(n,s-h),i.lineTo(n+h,s),i.lineTo(n+r,s),i.lineTo(n+r,s+h),i.lineTo(n-r,s+h),i.lineTo(n-r,s)):(i.moveTo(n-h,s),i.lineTo(n,s+h),i.lineTo(n+h,s),i.lineTo(n+r,s),i.lineTo(n+r,s-h),i.lineTo(n-r,s-h),i.lineTo(n-r,s)),i.fill()}var ai=function(t){function i(){var i;return(i=t.apply(this,arguments)||this).Nt=null,i._e=new Kt,i.F=-1,i.W="",i.Ke="",i}(0,h.Z)(i,t);var n=i.prototype;return n.Z=function(t){this.Nt=t},n.ue=function(t,i){this.F===t&&this.W===i||(this.F=t,this.W=i,this.Ke=P(t,i),this._e.he())},n.Ze=function(t,i){if(null===this.Nt||null===this.Nt.G)return null;for(var n=this.Nt.G.from;n<this.Nt.G.to;n++){var s=this.Nt.J[n];if(fi(s,t,i))return{Ge:s.Je,Qe:s.Qe}}return null},n.q=function(t,i,n){if(null!==this.Nt&&null!==this.Nt.G){t.textBaseline="middle",t.font=this.Ke;for(var s=this.Nt.G.from;s<this.Nt.G.to;s++){var e=this.Nt.J[s];void 0!==e.Jt&&(e.Jt.Ut=this._e.Qt(t,e.Jt.tr),e.Jt.qt=this.F),li(e,t)}}},i}(Z);function li(t,i){i.fillStyle=t.O,void 0!==t.Jt&&function(t,i,n,s){t.fillText(i,n,s)}(i,t.Jt.tr,t.tt-t.Jt.Ut/2,t.Jt.it),function(t,i){if(0!==t.ln){switch(t.ir){case"arrowDown":return void ui(!1,i,t.tt,t.it,t.ln);case"arrowUp":return void ui(!0,i,t.tt,t.it,t.ln);case"circle":return void function(t,i,n,s){var e=(ei("circle",s)-1)/2;t.beginPath(),t.arc(i,n,e,0,2*Math.PI,!1),t.fill()}(i,t.tt,t.it,t.ln);case"square":return void function(t,i,n,s){var e=ei("square",s),h=(e-1)/2,r=i-h,o=n-h;t.fillRect(r,o,e,e)}(i,t.tt,t.it,t.ln)}t.ir}}(t,i)}function fi(t,i,n){return!(void 0===t.Jt||!function(t,i,n,s,e,h){var r=s/2;return e>=t&&e<=t+n&&h>=i-r&&h<=i+r}(t.tt,t.Jt.it,t.Jt.Ut,t.Jt.qt,i,n))||function(t,i,n){if(0===t.ln)return!1;switch(t.ir){case"arrowDown":case"arrowUp":return function(t,i,n,s,e,h){return oi(i,n,s,e,h)}(0,t.tt,t.it,t.ln,i,n);case"circle":return function(t,i,n,s,e){var h=2+ei("circle",n)/2,r=t-s,o=i-e;return Math.sqrt(r*r+o*o)<=h}(t.tt,t.it,t.ln,i,n);case"square":return oi(t.tt,t.it,t.ln,i,n)}}(t,i,n)}function ci(t,i,n,s,e,h,r,o,u){var a=x(n)?n:n.An,l=x(n)?n:n.Nn,f=x(n)?n:n.Rn,c=x(i.size)?Math.max(i.size,0):1,v=hi(o.wn())*c,d=v/2;switch(t.ln=v,i.position){case"inBar":return t.it=r.xt(a,u),void(void 0!==t.Jt&&(t.Jt.it=t.it+d+h+.6*e));case"aboveBar":return t.it=r.xt(l,u)-d-s.sr,void 0!==t.Jt&&(t.Jt.it=t.it-d-.6*e,s.sr+=1.2*e),void(s.sr+=v+h);case"belowBar":return t.it=r.xt(f,u)+d+s.nr,void 0!==t.Jt&&(t.Jt.it=t.it+d+h+.6*e,s.nr+=1.2*e),void(s.nr+=v+h)}i.position}var vi,di=function(){function t(t,i){this.ut=!0,this.er=!0,this.rr=!0,this.hr=null,this.Ft=new ai,this.Fe=t,this.gi=i,this.Nt={J:[],G:null}}var i=t.prototype;return i.dt=function(t){this.ut=!0,this.rr=!0,"data"===t&&(this.er=!0)},i.vt=function(t,i,n){if(!this.Fe.St())return null;this.ut&&this.tn();var s=this.gi.V().layout;return this.Ft.ue(s.fontSize,s.fontFamily),this.Ft.Z(this.Nt),this.Ft},i.lr=function(){if(this.rr){if(this.Fe.ar().length>0){var t=this.gi.gt().wn(),i=ri(t),n=1.5*hi(t)+2*i;this.hr={above:n,below:n}}else this.hr=null;this.rr=!1}return this.hr},i.tn=function(){var t=this.Fe.Ct(),i=this.gi.gt(),n=this.Fe.ar();this.er&&(this.Nt.J=n.map((function(t){return{rt:t.time,tt:0,it:0,ln:0,ir:t.shape,O:t.color,Je:t.internalId,Qe:t.id,Jt:void 0}})),this.er=!1);var s=this.gi.V().layout;this.Nt.G=null;var e=i.hn();if(null!==e){var h=this.Fe.yt();if(null!==h&&0!==this.Nt.J.length){var r=NaN,o=ri(i.wn()),u={sr:o,nr:o};this.Nt.G=Ct(this.Nt.J,e,!0);for(var a=this.Nt.G.from;a<this.Nt.G.to;a++){var l=n[a];l.time!==r&&(u.sr=o,u.nr=o,r=l.time);var f=this.Nt.J[a];f.tt=i.Ot(l.time),void 0!==l.text&&l.text.length>0&&(f.Jt={tr:l.text,it:0,Ut:0,qt:0});var c=this.Fe._r(l.time);null!==c&&ci(f,l,c,u,s.fontSize,o,t,i,h.Tt)}this.ut=!1}}},t}(),pi=function(t){function i(i){return t.call(this,i)||this}return(0,h.Z)(i,t),i.prototype.Me=function(t,i){var n=this.be;n.St=!1;var s=this.Gs.V();if(s.priceLineVisible&&this.Gs.St()){var e=this.Gs.Ue(0===s.priceLineSource);e.qe||(n.St=!0,n.it=e.ti,n.O=this.Gs.ur(e.O),n.Ut=i,n.qt=t,n.Lt=s.priceLineWidth,n.Bt=s.priceLineStyle)}},i}(Yt),mi=function(t){function i(i){var n;return(n=t.call(this)||this).zt=i,n}(0,h.Z)(i,t);var n=i.prototype;return n.di=function(t,i,n){t.St=!1,i.St=!1;var s=this.zt;if(s.St()){var e=s.V(),h=e.lastValueVisible,r=""!==s.cr(),o=0===e.seriesLastValueMode,u=s.Ue(!1);if(!u.qe){h&&(t.Jt=this.dr(u,h,o),t.St=0!==t.Jt.length),(r||o)&&(i.Jt=this.pr(u,h,r,o),i.St=i.Jt.length>0);var a=s.ur(u.O),l=S(a);n.t=l.t,n.O=l.i,n.ti=u.ti,i.Dt=s.jt().Pt(u.ti/s.Ct().qt()),t.Dt=a}}},n.pr=function(t,i,n,s){var e="",h=this.zt.cr();return n&&0!==h.length&&(e+=h+" "),i&&s&&(e+=this.zt.Ct().vr()?t.mr:t.wr),e.trim()},n.dr=function(t,i,n){return i?n?this.zt.Ct().vr()?t.wr:t.mr:t.Jt:""},i}(Q),gi=function(){function t(t,i){this.br=t,this.gr=i}var i=t.prototype;return i.Mr=function(t){return null!==t&&this.br===t.br&&this.gr===t.gr},i.Sr=function(){return new t(this.br,this.gr)},i.yr=function(){return this.br},i.kr=function(){return this.gr},i.Cr=function(){return this.gr-this.br},i.vi=function(){return this.gr===this.br||Number.isNaN(this.gr)||Number.isNaN(this.br)},i.Ts=function(i){return null===i?this:new t(Math.min(this.yr(),i.yr()),Math.max(this.kr(),i.kr()))},i.Tr=function(t){if(x(t)&&0!=this.gr-this.br){var i=.5*(this.gr+this.br),n=this.gr-i,s=this.br-i;n*=t,s*=t,this.gr=i+n,this.br=i+s}},i.Dr=function(t){x(t)&&(this.gr+=t,this.br+=t)},i.Pr=function(){return{minValue:this.br,maxValue:this.gr}},t.Or=function(i){return null===i?null:new t(i.minValue,i.maxValue)},t}(),bi=function(){function t(t,i){this.Nr=t,this.Rr=i||null}var i=t.prototype;return i.Ar=function(){return this.Nr},i.Er=function(){return this.Rr},i.Pr=function(){return null===this.Nr?null:{priceRange:this.Nr.Pr(),margins:this.Rr||void 0}},t.Or=function(i){return null===i?null:new t(gi.Or(i.priceRange),i.margins)},t}(),Mi=function(t){function i(i,n){var s;return(s=t.call(this,i)||this).Ir=n,s}return(0,h.Z)(i,t),i.prototype.Me=function(t,i){var n=this.be;n.St=!1;var s=this.Ir.V();if(this.Gs.St()&&s.lineVisible){var e=this.Ir.Lr();null!==e&&(n.St=!0,n.it=e,n.O=s.color,n.Ut=i,n.qt=t,n.Lt=s.lineWidth,n.Bt=s.lineStyle)}},i}(Yt),wi=function(t){function i(i,n){var s;return(s=t.call(this)||this).Fe=i,s.Ir=n,s}(0,h.Z)(i,t);var n=i.prototype;return n.di=function(t,i,n){t.St=!1,i.St=!1;var s=this.Ir.V(),e=s.axisLabelVisible,h=""!==s.title,r=this.Fe;if(e&&r.St()){var o=this.Ir.Lr();if(null!==o){h&&(i.Jt=s.title,i.St=!0),i.Dt=r.jt().Pt(o/r.Ct().qt()),t.Jt=this.Br(s.price),t.St=!0;var u=S(s.color);n.t=u.t,n.O=u.i,n.ti=o}}},n.Br=function(t){var i=this.Fe.yt();return null===i?"":this.Fe.Ct().mi(t,i.Tt)},i}(Q),yi=function(){function t(t,i){this.Fe=t,this.Fi=i,this.Vr=new Mi(t,this),this.ce=new wi(t,this),this.Fr=new qt(this.ce,t,t.jt())}var i=t.prototype;return i.zr=function(t){F(this.Fi,t),this.dt(),this.Fe.jt().Wr()},i.V=function(){return this.Fi},i.ss=function(){return[this.Vr,this.Fr]},i.jr=function(){return this.ce},i.dt=function(){this.Vr.dt(),this.ce.dt()},i.Lr=function(){var t=this.Fe,i=t.Ct();if(t.jt().gt().vi()||i.vi())return null;var n=t.yt();return null===n?null:i.xt(this.Fi.price,n.Tt)},t}(),Ni=function(t){function i(i){var n;return(n=t.call(this)||this).gi=i,n}return(0,h.Z)(i,t),i.prototype.jt=function(){return this.gi},i}(st),Ci={En:"",Zn:"",Kn:""},_i=function(){function t(t){this.Fe=t}var i=t.prototype;return i.In=function(t,i){var n=this.Fe.$r(),s=this.Fe.V();switch(n){case"Line":return this.Hr(s,t,i);case"Area":return this.Ur(s);case"Baseline":return this.qr(s,t,i);case"Bar":return this.Yr(s,t,i);case"Candlestick":return this.Xr(s,t,i);case"Histogram":return this.Kr(s,t,i)}throw new Error("Unknown chart style")},i.Yr=function(t,i,n){var s=Object.assign({},Ci),e=t.upColor,h=t.downColor,r=e,o=h,u=p(this.Zr(i,n)),a=m(u.Tt[0])<=m(u.Tt[3]);return void 0!==u.O?(s.En=u.O,s.Zn=u.O):(s.En=a?e:h,s.Zn=a?r:o),s},i.Xr=function(t,i,n){var s,e,h,r=Object.assign({},Ci),o=t.upColor,u=t.downColor,a=t.borderUpColor,l=t.borderDownColor,f=t.wickUpColor,c=t.wickDownColor,v=p(this.Zr(i,n)),d=m(v.Tt[0])<=m(v.Tt[3]);return r.En=null!==(s=v.O)&&void 0!==s?s:d?o:u,r.Zn=null!==(e=v.Dt)&&void 0!==e?e:d?a:l,r.Kn=null!==(h=v.Xn)&&void 0!==h?h:d?f:c,r},i.Ur=function(t){return Object.assign(Object.assign({},Ci),{En:t.lineColor})},i.qr=function(t,i,n){var s=p(this.Zr(i,n)).Tt[3]>=t.baseValue.price;return Object.assign(Object.assign({},Ci),{En:s?t.topLineColor:t.bottomLineColor})},i.Hr=function(t,i,n){var s,e=p(this.Zr(i,n));return Object.assign(Object.assign({},Ci),{En:null!==(s=e.O)&&void 0!==s?s:t.color})},i.Kr=function(t,i,n){var s=Object.assign({},Ci),e=p(this.Zr(i,n));return s.En=void 0!==e.O?e.O:t.color,s},i.Zr=function(t,i){return void 0!==i?i.Tt:this.Fe._s().Gr(t)},t}();!function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"}(vi||(vi={}));var Si=function(){function t(){this.Jr=[],this.Qr=new Map,this.th=new Map}var i=t.prototype;return i.ih=function(){return this.ln()>0?this.Jr[this.Jr.length-1]:null},i.sh=function(){return this.ln()>0?this.nh(0):null},i.os=function(){return this.ln()>0?this.nh(this.Jr.length-1):null},i.ln=function(){return this.Jr.length},i.vi=function(){return 0===this.ln()},i.Ye=function(t){return null!==this.eh(t,0)},i.Gr=function(t){return this.rh(t)},i.rh=function(t,i){void 0===i&&(i=0);var n=this.eh(t,i);return null===n?null:Object.assign(Object.assign({},this.hh(n)),{pn:this.nh(n)})},i.dn=function(){return this.Jr},i.lh=function(t,i,n){if(this.vi())return null;for(var e,h=null,r=(0,s.Z)(n);!(e=r()).done;){var o=e.value;h=Ti(h,this.ah(t,i,o))}return h},i.Z=function(t){this.th.clear(),this.Qr.clear(),this.Jr=t},i.nh=function(t){return this.Jr[t].pn},i.hh=function(t){return this.Jr[t]},i.eh=function(t,i){var n=this.oh(t);if(null===n&&0!==i)switch(i){case-1:return this._h(t);case 1:return this.uh(t);default:throw new TypeError("Unknown search mode")}return n},i._h=function(t){var i=this.dh(t);return i>0&&(i-=1),i!==this.Jr.length&&this.nh(i)<t?i:null},i.uh=function(t){var i=this.fh(t);return i!==this.Jr.length&&t<this.nh(i)?i:null},i.oh=function(t){var i=this.dh(t);return i===this.Jr.length||t<this.Jr[i].pn?null:i},i.dh=function(t){return Mt(this.Jr,t,(function(t,i){return t.pn<i}))},i.fh=function(t){return wt(this.Jr,t,(function(t,i){return i.pn>t}))},i.ph=function(t,i,n){for(var s=null,e=t;e<i;e++){var h=this.Jr[e].Tt[n];Number.isNaN(h)||(null===s?s={mh:h,wh:h}:(h<s.mh&&(s.mh=h),h>s.wh&&(s.wh=h)))}return s},i.ah=function(t,i,n){if(this.vi())return null;var s=null,e=p(this.sh()),h=p(this.os()),r=Math.max(t,e),o=Math.min(i,h),u=30*Math.ceil(r/30),a=Math.max(u,30*Math.floor(o/30)),l=this.dh(r),f=this.fh(Math.min(o,u,i));s=Ti(s,this.ph(l,f,n));var c=this.Qr.get(n);void 0===c&&(c=new Map,this.Qr.set(n,c));for(var v=Math.max(u+1,r);v<a;v+=30){var d=Math.floor(v/30),m=c.get(d);if(void 0===m){var g=this.dh(30*d),b=this.fh(30*(d+1)-1);m=this.ph(g,b,n),c.set(d,m)}s=Ti(s,m)}var M=this.dh(a),w=this.fh(o);return s=Ti(s,this.ph(M,w,n))},t}();function Ti(t,i){return null===t?i:null===i?t:{mh:Math.min(t.mh,i.mh),wh:Math.max(t.wh,i.wh)}}var Fi=function(t){function i(i,n,s){var h;(h=t.call(this,i)||this).Nt=new Si,h.Vr=new pi(e(h)),h.bh=[],h.gh=new $t(e(h)),h.Mh=null,h.Sh=null,h.yh=[],h.kh=[],h.xh=null,h.Fi=n,h.Ch=s;var r=new mi(e(h));return h.Ai=[r],h.Fr=new qt(r,e(h),i),"Area"!==s&&"Line"!==s&&"Baseline"!==s||(h.Mh=new ni(e(h))),h.Th(),h.Dh(),h}(0,h.Z)(i,t);var n=i.prototype;return n.M=function(){null!==this.xh&&clearTimeout(this.xh)},n.ur=function(t){return this.Fi.priceLineColor||t},n.Ue=function(t){var i={qe:!0},n=this.Ct();if(this.jt().gt().vi()||n.vi()||this.Nt.vi())return i;var s,e,h=this.jt().gt().hn(),r=this.yt();if(null===h||null===r)return i;if(t){var o=this.Nt.ih();if(null===o)return i;s=o,e=o.pn}else{var u=this.Nt.rh(h.Us(),-1);if(null===u)return i;if(null===(s=this.Nt.Gr(u.pn)))return i;e=u.pn}var a=s.Tt[3],l=this.cn().In(e,{Tt:s}),f=n.xt(a,r.Tt);return{qe:!1,ht:a,Jt:n.mi(a,r.Tt),mr:n.Ph(a),wr:n.Oh(a,r.Tt),O:l.En,ti:f,pn:e}},n.cn=function(){return null!==this.Sh||(this.Sh=new _i(this)),this.Sh},n.V=function(){return this.Fi},n.zr=function(t){var i=t.priceScaleId;void 0!==i&&i!==this.Fi.priceScaleId&&this.jt().Nh(this,i),F(this.Fi,t),void 0!==t.priceFormat&&(this.Th(),this.jt().Rh()),this.jt().Ah(this),this.jt().Eh(),this.qi.dt("options")},n.Z=function(t,i){this.Nt.Z(t),this.Ih(),this.qi.dt("data"),this.zi.dt("data"),null!==this.Mh&&(i&&i.Lh?this.Mh.We():0===t.length&&this.Mh.ze());var n=this.jt().fe(this);this.jt().Bh(n),this.jt().Ah(this),this.jt().Eh(),this.jt().Wr()},n.Vh=function(t){this.yh=t,this.Ih();var i=this.jt().fe(this);this.zi.dt("data"),this.jt().Bh(i),this.jt().Ah(this),this.jt().Eh(),this.jt().Wr()},n.Fh=function(){return this.yh},n.ar=function(){return this.kh},n.zh=function(t){var i=new yi(this,t);return this.bh.push(i),this.jt().Ah(this),i},n.Wh=function(t){var i=this.bh.indexOf(t);-1!==i&&this.bh.splice(i,1),this.jt().Ah(this)},n.$r=function(){return this.Ch},n.yt=function(){var t=this.jh();return null===t?null:{Tt:t.Tt[3],$h:t.rt}},n.jh=function(){var t=this.jt().gt().hn();if(null===t)return null;var i=t.Hs();return this.Nt.rh(i,1)},n._s=function(){return this.Nt},n._r=function(t){var i=this.Nt.Gr(t);return null===i?null:"Bar"===this.Ch||"Candlestick"===this.Ch?{On:i.Tt[0],Nn:i.Tt[1],Rn:i.Tt[2],An:i.Tt[3]}:i.Tt[3]},n.Hh=function(t){var i=this,n=this.Mh;return null!==n&&n.St()?(null===this.xh&&n.$e()&&(this.xh=setTimeout((function(){i.xh=null,i.jt().Uh()}),0)),n.je(),[n]):[]},n.ss=function(){var t=[];this.qh()||t.push(this.gh),t.push(this.qi,this.Vr,this.Fr,this.zi);for(var i,n=(0,s.Z)(this.bh);!(i=n()).done;){var e=i.value;t.push.apply(t,e.ss())}return t},n.ns=function(t,i){if(i!==this.yi&&!this.qh())return[];for(var n,e=[].concat(this.Ai),h=(0,s.Z)(this.bh);!(n=h()).done;){var r=n.value;e.push(r.jr())}return e},n.Yh=function(t,i){var n=this;if(void 0!==this.Fi.autoscaleInfoProvider){var s=this.Fi.autoscaleInfoProvider((function(){var s=n.Xh(t,i);return null===s?null:s.Pr()}));return bi.Or(s)}return this.Xh(t,i)},n.Kh=function(){return this.Fi.priceFormat.minMove},n.Zh=function(){return this.Gh},n.rs=function(){var t;this.qi.dt(),this.zi.dt();for(var i,n=(0,s.Z)(this.Ai);!(i=n()).done;){i.value.dt()}for(var e,h=(0,s.Z)(this.bh);!(e=h()).done;){e.value.dt()}this.Vr.dt(),this.gh.dt(),null===(t=this.Mh)||void 0===t||t.dt()},n.Ct=function(){return p(t.prototype.Ct.call(this))},n.Mt=function(t){if("Line"!==this.Ch&&"Area"!==this.Ch&&"Baseline"!==this.Ch||!this.Fi.crosshairMarkerVisible)return null;var i=this.Nt.Gr(t);return null===i?null:{ht:i.Tt[3],nt:this.Jh(),Dt:this.Qh(),kt:this.tl(t)}},n.cr=function(){return this.Fi.title},n.St=function(){return this.Fi.visible},n.qh=function(){return!ht(this.Ct().il())},n.Xh=function(t,i){if(!k(t)||!k(i)||this.Nt.vi())return null;var n="Line"===this.Ch||"Area"===this.Ch||"Baseline"===this.Ch||"Histogram"===this.Ch?[3]:[2,1],s=this.Nt.lh(t,i,n),e=null!==s?new gi(s.mh,s.wh):null;if("Histogram"===this.$r()){var h=this.Fi.base,r=new gi(h,h);e=null!==e?e.Ts(r):r}return new bi(e,this.zi.lr())},n.Jh=function(){switch(this.Ch){case"Line":case"Area":case"Baseline":return this.Fi.crosshairMarkerRadius}return 0},n.Qh=function(){switch(this.Ch){case"Line":case"Area":case"Baseline":var t=this.Fi.crosshairMarkerBorderColor;if(0!==t.length)return t}return null},n.tl=function(t){switch(this.Ch){case"Line":case"Area":case"Baseline":var i=this.Fi.crosshairMarkerBackgroundColor;if(0!==i.length)return i}return this.cn().In(t).En},n.Th=function(){switch(this.Fi.priceFormat.type){case"custom":this.Gh={format:this.Fi.priceFormat.formatter};break;case"volume":this.Gh=new lt(this.Fi.priceFormat.precision);break;case"percent":this.Gh=new at(this.Fi.priceFormat.precision);break;default:var t=Math.pow(10,this.Fi.priceFormat.precision);this.Gh=new ut(t,this.Fi.priceFormat.minMove*t)}null!==this.yi&&this.yi.sl()},n.Ih=function(){var t=this,i=this.jt().gt();if(i.vi()||0===this.Nt.ln())this.kh=[];else{var n=p(this.Nt.sh());this.kh=this.yh.map((function(s,e){var h=p(i.nl(s.time,!0)),r=h<n?1:-1;return{time:p(t.Nt.rh(h,r)).pn,position:s.position,shape:s.shape,color:s.color,id:s.id,internalId:e,text:s.text,size:s.size}}))}},n.Dh=function(){switch(this.zi=new di(this,this.jt()),this.Ch){case"Bar":this.qi=new kt(this,this.jt());break;case"Candlestick":this.qi=new Zt(this,this.jt());break;case"Line":this.qi=new zt(this,this.jt());break;case"Area":this.qi=new Tt(this,this.jt());break;case"Baseline":this.qi=new Gt(this,this.jt());break;case"Histogram":this.qi=new Bt(this,this.jt());break;default:throw Error("Unknown chart style assigned: "+this.Ch)}},i}(Ni),xi=function(){function t(t){this.Fi=t}return t.prototype.el=function(t,i,n){var s=t;if(0===this.Fi.mode)return s;var e=n.ji(),h=e.yt();if(null===h)return s;var r=e.xt(t,h),o=n.rl().filter((function(t){return t instanceof Fi})).reduce((function(t,s){if(n.pe(s)||!s.St())return t;var e=s.Ct(),h=s._s();if(e.vi()||!h.Ye(i))return t;var r=h.Gr(i);if(null===r)return t;var o=m(s.yt());return t.concat([e.xt(r.Tt[3],o.Tt)])}),[]);if(0===o.length)return s;o.sort((function(t,i){return Math.abs(t-r)-Math.abs(i-r)}));var u=o[0];return s=e.$i(u,h)},t}(),ki=function(){function t(){this.Nt=null}var i=t.prototype;return i.Z=function(t){this.Nt=t},i.U=function(t,i,n,e){var h=this;if(null!==this.Nt){var r=Math.max(1,Math.floor(i));t.lineWidth=r;var o=Math.ceil(this.Nt.It*i),u=Math.ceil(this.Nt.Et*i);!function(t,i){t.save(),t.lineWidth%2&&t.translate(.5,.5),i(),t.restore()}(t,(function(){var n=p(h.Nt);if(n.hl){t.strokeStyle=n.ll,f(t,n.al),t.beginPath();for(var e,a=(0,s.Z)(n.ol);!(e=a()).done;){var l=e.value,c=Math.round(l._l*i);t.moveTo(c,-r),t.lineTo(c,o+r)}t.stroke()}if(n.ul){t.strokeStyle=n.cl,f(t,n.dl),t.beginPath();for(var v,d=(0,s.Z)(n.fl);!(v=d()).done;){var m=v.value,g=Math.round(m._l*i);t.moveTo(-r,g),t.lineTo(u+r,g)}t.stroke()}}))}},t}(),Ei=function(){function t(t){this.Ft=new ki,this.ut=!0,this.Pi=t}var i=t.prototype;return i.dt=function(){this.ut=!0},i.vt=function(t,i){if(this.ut){var n=this.Pi.jt().V().grid,s={It:t,Et:i,ul:n.horzLines.visible,hl:n.vertLines.visible,cl:n.horzLines.color,ll:n.vertLines.color,dl:n.horzLines.style,al:n.vertLines.style,fl:this.Pi.ji().pl(),ol:this.Pi.jt().gt().pl()||[]};this.Ft.Z(s),this.ut=!1}return this.Ft},t}(),Ii=function(){function t(t){this.qi=new Ei(t)}return t.prototype.vl=function(){return this.qi},t}(),Oi={ml:4,wl:1e-4};function Li(t,i){var n=100*(t-i)/i;return i<0?-n:n}function Ri(t,i){var n=Li(t.yr(),i),s=Li(t.kr(),i);return new gi(n,s)}function Vi(t,i){var n=100*(t-i)/i+100;return i<0?-n:n}function Pi(t,i){var n=Vi(t.yr(),i),s=Vi(t.kr(),i);return new gi(n,s)}function Gi(t,i){var n=Math.abs(t);if(n<1e-15)return 0;var s=Ot(n+i.wl)+i.ml;return t<0?-s:s}function ji(t,i){var n=Math.abs(t);if(n<1e-15)return 0;var s=Math.pow(10,n-i.ml)-i.wl;return t<0?-s:s}function Zi(t,i){if(null===t)return null;var n=Gi(t.yr(),i),s=Gi(t.kr(),i);return new gi(n,s)}function Ai(t,i){if(null===t)return null;var n=ji(t.yr(),i),s=ji(t.kr(),i);return new gi(n,s)}function Di(t){if(null===t)return Oi;var i=Math.abs(t.kr()-t.yr());if(i>=1||i<1e-15)return Oi;var n=Math.ceil(Math.abs(Math.log10(i))),s=Oi.ml+n;return{ml:s,wl:1/Math.pow(10,s)}}var Ui,Bi=function(){function t(t,i){if(this.bl=t,this.gl=i,function(t){if(t<0)return!1;for(var i=t;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.bl))this.Ml=[2,2.5,2];else{this.Ml=[];for(var n=this.bl;1!==n;){if(n%2==0)this.Ml.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.Ml.push(2,2.5),n/=5}if(this.Ml.length>100)throw new Error("something wrong with base")}}}return t.prototype.Sl=function(t,i,n){for(var s,e=0===this.bl?0:1/this.bl,h=Math.pow(10,Math.max(0,Math.ceil(Ot(t-i)))),r=0,o=this.gl[0];;){var u=It(h,e,1e-14)&&h>e+1e-14,a=It(h,n*o,1e-14),l=It(h,1,1e-14);if(!(u&&a&&l))break;h/=o,o=this.gl[++r%this.gl.length]}if(h<=e+1e-14&&(h=e),h=Math.max(1,h),this.Ml.length>0&&(s=h,1,1e-14,Math.abs(s-1)<1e-14))for(r=0,o=this.Ml[0];It(h,n*o,1e-14)&&h>e+1e-14;)h/=o,o=this.Ml[++r%this.Ml.length];return h},t}(),zi=function(){function t(t,i,n,s){this.yl=[],this.fi=t,this.bl=i,this.kl=n,this.xl=s}var i=t.prototype;return i.Sl=function(t,i){if(t<i)throw new Error("high < low");var n=this.fi.qt(),s=(t-i)*this.Cl()/n,e=new Bi(this.bl,[2,2.5,2]),h=new Bi(this.bl,[2,2,2.5]),r=new Bi(this.bl,[2.5,2,2]),o=[];return o.push(e.Sl(t,i,s),h.Sl(t,i,s),r.Sl(t,i,s)),function(t){if(t.length<1)throw Error("array is empty");for(var i=t[0],n=1;n<t.length;++n)t[n]<i&&(i=t[n]);return i}(o)},i.Tl=function(){var t=this.fi,i=t.yt();if(null!==i){var n=t.qt(),s=this.kl(n-1,i),e=this.kl(0,i),h=this.fi.V().entireTextOnly?this.Dl()/2:0,r=h,o=n-1-h,u=Math.max(s,e),a=Math.min(s,e);if(u!==a){for(var l=this.Sl(u,a),f=u%l,c=u>=a?1:-1,v=null,d=0,p=u-(f+=f<0?l:0);p>a;p-=l){var m=this.xl(p,i,!0);null!==v&&Math.abs(m-v)<this.Cl()||m<r||m>o||(d<this.yl.length?(this.yl[d]._l=m,this.yl[d].Pl=t.Ol(p)):this.yl.push({_l:m,Pl:t.Ol(p)}),d++,v=m,t.Nl()&&(l=this.Sl(p*c,a)))}this.yl.length=d}else this.yl=[]}else this.yl=[]},i.pl=function(){return this.yl},i.Dl=function(){return this.fi.T()},i.Cl=function(){return Math.ceil(2.5*this.Dl())},t}();function Ji(t){return t.slice().sort((function(t,i){return p(t.xi())-p(i.xi())}))}!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(Ui||(Ui={}));var Ki=new at,Wi=new ut(100,1),qi=function(){function t(t,i,n,s){this.Rl=0,this.Al=null,this.Nr=null,this.El=null,this.Il={Ll:!1,Bl:null},this.Vl=0,this.Fl=0,this.zl=new T,this.Wl=new T,this.jl=[],this.$l=null,this.Hl=null,this.Ul=null,this.ql=null,this.Gh=Wi,this.Yl=Di(null),this.Xl=t,this.Fi=i,this.Kl=n,this.Zl=s,this.Gl=new zi(this,100,this.Jl.bind(this),this.Ql.bind(this))}var i=t.prototype;return i.il=function(){return this.Xl},i.V=function(){return this.Fi},i.zr=function(t){if(F(this.Fi,t),this.sl(),void 0!==t.mode&&this.ta({Se:t.mode}),void 0!==t.scaleMargins){var i=d(t.scaleMargins.top),n=d(t.scaleMargins.bottom);if(i<0||i>1)throw new Error("Invalid top margin - expect value between 0 and 1, given="+i);if(n<0||n>1||i+n>1)throw new Error("Invalid bottom margin - expect value between 0 and 1, given="+n);if(i+n>1)throw new Error("Invalid margins - sum of margins must be less than 1, given="+(i+n));this.ia(),this.Hl=null}},i.sa=function(){return this.Fi.autoScale},i.Nl=function(){return 1===this.Fi.mode},i.vr=function(){return 2===this.Fi.mode},i.na=function(){return 3===this.Fi.mode},i.Se=function(){return{vs:this.Fi.autoScale,ea:this.Fi.invertScale,Se:this.Fi.mode}},i.ta=function(t){var i=this.Se(),n=null;void 0!==t.vs&&(this.Fi.autoScale=t.vs),void 0!==t.Se&&(this.Fi.mode=t.Se,2!==t.Se&&3!==t.Se||(this.Fi.autoScale=!0),this.Il.Ll=!1),1===i.Se&&t.Se!==i.Se&&(function(t,i){if(null===t)return!1;var n=ji(t.yr(),i),s=ji(t.kr(),i);return isFinite(n)&&isFinite(s)}(this.Nr,this.Yl)?null!==(n=Ai(this.Nr,this.Yl))&&this.ra(n):this.Fi.autoScale=!0),1===t.Se&&t.Se!==i.Se&&(null!==(n=Zi(this.Nr,this.Yl))&&this.ra(n));var s=i.Se!==this.Fi.mode;s&&(2===i.Se||this.vr())&&this.sl(),s&&(3===i.Se||this.na())&&this.sl(),void 0!==t.ea&&i.ea!==t.ea&&(this.Fi.invertScale=t.ea,this.ha()),this.Wl.m(i,this.Se())},i.la=function(){return this.Wl},i.T=function(){return this.Kl.fontSize},i.qt=function(){return this.Rl},i.aa=function(t){this.Rl!==t&&(this.Rl=t,this.ia(),this.Hl=null)},i.oa=function(){if(this.Al)return this.Al;var t=this.qt()-this._a()-this.ua();return this.Al=t,t},i.Ar=function(){return this.ca(),this.Nr},i.ra=function(t,i){var n=this.Nr;(i||null===n&&null!==t||null!==n&&!n.Mr(t))&&(this.Hl=null,this.Nr=t)},i.vi=function(){return this.ca(),0===this.Rl||!this.Nr||this.Nr.vi()},i.da=function(t){return this.ea()?t:this.qt()-1-t},i.xt=function(t,i){return this.vr()?t=Li(t,i):this.na()&&(t=Vi(t,i)),this.Ql(t,i)},i._n=function(t,i,n){this.ca();for(var s=this.ua(),e=p(this.Ar()),h=e.yr(),r=e.kr(),o=this.oa()-1,u=this.ea(),a=o/(r-h),l=void 0===n?0:n.from,f=void 0===n?t.length:n.to,c=this.fa(),v=l;v<f;v++){var d=t[v],m=d.ht;if(!isNaN(m)){var g=m;null!==c&&(g=c(d.ht,i));var b=s+a*(g-h),M=u?b:this.Rl-1-b;d.it=M}}},i.Dn=function(t,i,n){this.ca();for(var s=this.ua(),e=p(this.Ar()),h=e.yr(),r=e.kr(),o=this.oa()-1,u=this.ea(),a=o/(r-h),l=void 0===n?0:n.from,f=void 0===n?t.length:n.to,c=this.fa(),v=l;v<f;v++){var d=t[v],m=d.On,g=d.Nn,b=d.Rn,M=d.An;null!==c&&(m=c(d.On,i),g=c(d.Nn,i),b=c(d.Rn,i),M=c(d.An,i));var w=s+a*(m-h),y=u?w:this.Rl-1-w;d.Cn=y,w=s+a*(g-h),y=u?w:this.Rl-1-w,d.yn=y,w=s+a*(b-h),y=u?w:this.Rl-1-w,d.kn=y,w=s+a*(M-h),y=u?w:this.Rl-1-w,d.Tn=y}},i.$i=function(t,i){var n=this.Jl(t,i);return this.pa(n,i)},i.pa=function(t,i){var n=t;return this.vr()?n=function(t,i){return i<0&&(t=-t),t/100*i+i}(n,i):this.na()&&(n=function(t,i){return t-=100,i<0&&(t=-t),t/100*i+i}(n,i)),n},i.rl=function(){return this.jl},i.va=function(){if(this.$l)return this.$l;for(var t=[],i=0;i<this.jl.length;i++){var n=this.jl[i];null===n.xi()&&n.Ci(i+1),t.push(n)}return t=Ji(t),this.$l=t,this.$l},i.ma=function(t){-1===this.jl.indexOf(t)&&(this.jl.push(t),this.sl(),this.wa())},i.ba=function(t){var i=this.jl.indexOf(t);if(-1===i)throw new Error("source is not attached to scale");this.jl.splice(i,1),0===this.jl.length&&(this.ta({vs:!0}),this.ra(null)),this.sl(),this.wa()},i.yt=function(){for(var t,i=null,n=(0,s.Z)(this.jl);!(t=n()).done;){var e=t.value.yt();null!==e&&(null===i||e.$h<i.$h)&&(i=e)}return null===i?null:i.Tt},i.ea=function(){return this.Fi.invertScale},i.pl=function(){var t=null===this.yt();if(null!==this.Hl&&(t||this.Hl.ga===t))return this.Hl.pl;this.Gl.Tl();var i=this.Gl.pl();return this.Hl={pl:i,ga:t},this.zl.m(),i},i.Ma=function(){return this.zl},i.Sa=function(t){this.vr()||this.na()||null===this.Ul&&null===this.El&&(this.vi()||(this.Ul=this.Rl-t,this.El=p(this.Ar()).Sr()))},i.ya=function(t){if(!this.vr()&&!this.na()&&null!==this.Ul){this.ta({vs:!1}),(t=this.Rl-t)<0&&(t=0);var i=(this.Ul+.2*(this.Rl-1))/(t+.2*(this.Rl-1)),n=p(this.El).Sr();i=Math.max(i,.1),n.Tr(i),this.ra(n)}},i.ka=function(){this.vr()||this.na()||(this.Ul=null,this.El=null)},i.xa=function(t){this.sa()||null===this.ql&&null===this.El&&(this.vi()||(this.ql=t,this.El=p(this.Ar()).Sr()))},i.Ca=function(t){if(!this.sa()&&null!==this.ql){var i=p(this.Ar()).Cr()/(this.oa()-1),n=t-this.ql;this.ea()&&(n*=-1);var s=n*i,e=p(this.El).Sr();e.Dr(s),this.ra(e,!0),this.Hl=null}},i.Ta=function(){this.sa()||null!==this.ql&&(this.ql=null,this.El=null)},i.Zh=function(){return this.Gh||this.sl(),this.Gh},i.mi=function(t,i){switch(this.Fi.mode){case 2:return this.Zh().format(Li(t,i));case 3:return this.Zh().format(Vi(t,i));default:return this.Br(t)}},i.Ol=function(t){switch(this.Fi.mode){case 2:case 3:return this.Zh().format(t);default:return this.Br(t)}},i.Ph=function(t){return this.Br(t,p(this.Da()).Zh())},i.Oh=function(t,i){return t=Li(t,i),Ki.format(t)},i.Pa=function(){return this.jl},i.Oa=function(t){this.Il={Bl:t,Ll:!1}},i.rs=function(){this.jl.forEach((function(t){return t.rs()}))},i.sl=function(){this.Hl=null;var t=this.Da(),i=100;null!==t&&(i=Math.round(1/t.Kh())),this.Gh=Wi,this.vr()?(this.Gh=Ki,i=100):this.na()?(this.Gh=new ut(100,1),i=100):null!==t&&(this.Gh=t.Zh()),this.Gl=new zi(this,i,this.Jl.bind(this),this.Ql.bind(this)),this.Gl.Tl()},i.wa=function(){this.$l=null},i.Da=function(){return this.jl[0]||null},i._a=function(){return this.ea()?this.Fi.scaleMargins.bottom*this.qt()+this.Fl:this.Fi.scaleMargins.top*this.qt()+this.Vl},i.ua=function(){return this.ea()?this.Fi.scaleMargins.top*this.qt()+this.Vl:this.Fi.scaleMargins.bottom*this.qt()+this.Fl},i.ca=function(){this.Il.Ll||(this.Il.Ll=!0,this.Na())},i.ia=function(){this.Al=null},i.Ql=function(t,i){if(this.ca(),this.vi())return 0;t=this.Nl()&&t?Gi(t,this.Yl):t;var n=p(this.Ar()),s=this.ua()+(this.oa()-1)*(t-n.yr())/n.Cr();return this.da(s)},i.Jl=function(t,i){if(this.ca(),this.vi())return 0;var n=this.da(t),s=p(this.Ar()),e=s.yr()+s.Cr()*((n-this.ua())/(this.oa()-1));return this.Nl()?ji(e,this.Yl):e},i.ha=function(){this.Hl=null,this.Gl.Tl()},i.Na=function(){var t=this.Il.Bl;if(null!==t){for(var i,n,e,h=null,r=this.Pa(),o=0,u=0,a=(0,s.Z)(r);!(i=a()).done;){var l=i.value;if(l.St()){var f=l.yt();if(null!==f){var c=l.Yh(t.Hs(),t.Us()),v=c&&c.Ar();if(null!==v){switch(this.Fi.mode){case 1:v=Zi(v,this.Yl);break;case 2:v=Ri(v,f.Tt);break;case 3:v=Pi(v,f.Tt)}if(h=null===h?v:h.Ts(p(v)),null!==c){var d=c.Er();null!==d&&(o=Math.max(o,d.above),u=Math.max(o,d.below))}}}}}if(o===this.Vl&&u===this.Fl||(this.Vl=o,this.Fl=u,this.Hl=null,this.ia()),null!==h){if(h.yr()===h.kr()){var m=this.Da(),g=5*(null===m||this.vr()||this.na()?1:m.Kh());this.Nl()&&(h=Ai(h,this.Yl)),h=new gi(h.yr()-g,h.kr()+g),this.Nl()&&(h=Zi(h,this.Yl))}if(this.Nl()){var b=Ai(h,this.Yl),M=Di(b);if(n=M,e=this.Yl,n.ml!==e.ml||n.wl!==e.wl){var w=null!==this.El?Ai(this.El,this.Yl):null;this.Yl=M,h=Zi(b,M),null!==w&&(this.El=Zi(w,M))}}this.ra(h)}else null===this.Nr&&(this.ra(new gi(-.5,.5)),this.Yl=Di(null));this.Il.Ll=!0}},i.fa=function(){var t=this;return this.vr()?Li:this.na()?Vi:this.Nl()?function(i){return Gi(i,t.Yl)}:null},i.Br=function(t,i){return void 0===this.Zl.priceFormatter?(void 0===i&&(i=this.Zh()),i.format(t)):this.Zl.priceFormatter(t)},t}(),Hi=function(){function t(t,i){this.jl=[],this.Ra=new Map,this.Rl=0,this.oe=0,this.Aa=1e3,this.$l=null,this.Ea=new T,this.Ia=t,this.gi=i,this.La=new Ii(this);var n=i.V();this.Ba=this.Va("left",n.leftPriceScale),this.Fa=this.Va("right",n.rightPriceScale),this.Ba.la().l(this.za.bind(this,this.Ba),this),this.Fa.la().l(this.za.bind(this,this.Fa),this),this.Wa(n)}var i=t.prototype;return i.Wa=function(t){if(t.leftPriceScale&&this.Ba.zr(t.leftPriceScale),t.rightPriceScale&&this.Fa.zr(t.rightPriceScale),t.localization&&(this.Ba.sl(),this.Fa.sl()),t.overlayPriceScales)for(var i=0,n=Array.from(this.Ra.values());i<n.length;i++){var s=p(n[i][0].Ct());s.zr(t.overlayPriceScales),t.localization&&s.sl()}},i.ja=function(t){switch(t){case"left":return this.Ba;case"right":return this.Fa}return this.Ra.has(t)?d(this.Ra.get(t))[0].Ct():null},i.M=function(){this.jt().$a().v(this),this.Ba.la().v(this),this.Fa.la().v(this),this.jl.forEach((function(t){t.M&&t.M()})),this.Ea.m()},i.Ha=function(){return this.Aa},i.Ua=function(t){this.Aa=t},i.jt=function(){return this.gi},i.Ut=function(){return this.oe},i.qt=function(){return this.Rl},i.qa=function(t){this.oe=t,this.Ya()},i.aa=function(t){var i=this;this.Rl=t,this.Ba.aa(t),this.Fa.aa(t),this.jl.forEach((function(n){if(i.pe(n)){var s=n.Ct();null!==s&&s.aa(t)}})),this.Ya()},i.rl=function(){return this.jl},i.pe=function(t){var i=t.Ct();return null===i||this.Ba!==i&&this.Fa!==i},i.ma=function(t,i,n){var s=void 0!==n?n:this.Ka().Xa+1;this.Za(t,i,s)},i.ba=function(t){var i=this.jl.indexOf(t);v(-1!==i,"removeDataSource: invalid data source"),this.jl.splice(i,1);var n=p(t.Ct()).il();if(this.Ra.has(n)){var s=d(this.Ra.get(n)),e=s.indexOf(t);-1!==e&&(s.splice(e,1),0===s.length&&this.Ra.delete(n))}var h=t.Ct();h&&h.rl().indexOf(t)>=0&&h.ba(t),null!==h&&(h.wa(),this.Ga(h)),this.$l=null},i.me=function(t){return t===this.Ba?"left":t===this.Fa?"right":"overlay"},i.Ja=function(){return this.Ba},i.Qa=function(){return this.Fa},i.io=function(t,i){t.Sa(i)},i.so=function(t,i){t.ya(i),this.Ya()},i.no=function(t){t.ka()},i.eo=function(t,i){t.xa(i)},i.ro=function(t,i){t.Ca(i),this.Ya()},i.ho=function(t){t.Ta()},i.Ya=function(){this.jl.forEach((function(t){t.rs()}))},i.ji=function(){var t=null;return this.gi.V().rightPriceScale.visible&&0!==this.Fa.rl().length?t=this.Fa:this.gi.V().leftPriceScale.visible&&0!==this.Ba.rl().length?t=this.Ba:0!==this.jl.length&&(t=this.jl[0].Ct()),null===t&&(t=this.Fa),t},i.ve=function(){var t=null;return this.gi.V().rightPriceScale.visible?t=this.Fa:this.gi.V().leftPriceScale.visible&&(t=this.Ba),t},i.Ga=function(t){null!==t&&t.sa()&&this.lo(t)},i.ao=function(t){var i=this.Ia.hn();t.ta({vs:!0}),null!==i&&t.Oa(i),this.Ya()},i.oo=function(){this.lo(this.Ba),this.lo(this.Fa)},i._o=function(){var t=this;this.Ga(this.Ba),this.Ga(this.Fa),this.jl.forEach((function(i){t.pe(i)&&t.Ga(i.Ct())})),this.Ya(),this.gi.Wr()},i.va=function(){return null===this.$l&&(this.$l=Ji(this.jl)),this.$l},i.uo=function(){return this.Ea},i.co=function(){return this.La},i.lo=function(t){var i=t.Pa();if(i&&i.length>0&&!this.Ia.vi()){var n=this.Ia.hn();null!==n&&t.Oa(n)}t.rs()},i.Ka=function(){var t=this.va();if(0===t.length)return{do:0,Xa:0};for(var i=0,n=0,s=0;s<t.length;s++){var e=t[s].xi();null!==e&&(e<i&&(i=e),e>n&&(n=e))}return{do:i,Xa:n}},i.Za=function(t,i,n){var s=this.ja(i);if(null===s&&(s=this.Va(i,this.gi.V().overlayPriceScales)),this.jl.push(t),!ht(i)){var e=this.Ra.get(i)||[];e.push(t),this.Ra.set(i,e)}s.ma(t),t.Ti(s),t.Ci(n),this.Ga(s),this.$l=null},i.za=function(t,i,n){i.Se!==n.Se&&this.lo(t)},i.Va=function(t,i){var n=Object.assign({visible:!0,autoScale:!0},O(i)),s=new qi(t,n,this.gi.V().layout,this.gi.V().localization);return s.aa(this.qt()),s},t}(),Yi=function(t){return t.getUTCFullYear()};var $i=function(){function t(t,i){void 0===t&&(t="yyyy-MM-dd"),void 0===i&&(i="default"),this.fo=t,this.po=i}return t.prototype.vo=function(t){return function(t,i,n){return i.replace(/yyyy/g,function(t){return ot(Yi(t),4)}(t)).replace(/yy/g,function(t){return ot(Yi(t)%100,2)}(t)).replace(/MMMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"long"})}(t,n)).replace(/MMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"short"})}(t,n)).replace(/MM/g,function(t){return ot(function(t){return t.getUTCMonth()+1}(t),2)}(t)).replace(/dd/g,function(t){return ot(function(t){return t.getUTCDate()}(t),2)}(t))}(t,this.fo,this.po)},t}(),Qi=function(){function t(t){this.mo=t||"%h:%m:%s"}return t.prototype.vo=function(t){return this.mo.replace("%h",ot(t.getUTCHours(),2)).replace("%m",ot(t.getUTCMinutes(),2)).replace("%s",ot(t.getUTCSeconds(),2))},t}(),Xi={wo:"yyyy-MM-dd",bo:"%h:%m:%s",Mo:" ",So:"default"},tn=function(){function t(t){void 0===t&&(t={});var i=Object.assign(Object.assign({},Xi),t);this.yo=new $i(i.wo,i.So),this.ko=new Qi(i.bo),this.xo=i.Mo}return t.prototype.vo=function(t){return""+this.yo.vo(t)+this.xo+this.ko.vo(t)},t}(),nn=function(){function t(t,i){void 0===i&&(i=50),this.Co=0,this.To=1,this.Do=1,this.ne=new Map,this.Po=new Map,this.Oo=t,this.No=i}return t.prototype.vo=function(t){var i=t.rt,n=void 0===i.Ro?new Date(1e3*i.Ao).getTime():new Date(Date.UTC(i.Ro.year,i.Ro.month-1,i.Ro.day)).getTime(),s=this.ne.get(n);if(void 0!==s)return s.Eo;if(this.Co===this.No){var e=this.Po.get(this.Do);this.Po.delete(this.Do),this.ne.delete(d(e)),this.Do++,this.Co--}var h=this.Oo(t);return this.ne.set(n,{Eo:h,Io:this.To}),this.Po.set(this.To,n),this.Co++,this.To++,h},t}(),sn=function(){function t(t,i){v(t<=i,"right should be >= left"),this.Lo=t,this.Bo=i}var i=t.prototype;return i.Hs=function(){return this.Lo},i.Us=function(){return this.Bo},i.Vo=function(){return this.Bo-this.Lo+1},i.Ye=function(t){return this.Lo<=t&&t<=this.Bo},i.Mr=function(t){return this.Lo===t.Hs()&&this.Bo===t.Us()},t}();function en(t,i){return null===t||null===i?t===i:t.Mr(i)}var hn,rn,on,un,an,ln=function(){function t(){this.Fo=new Map,this.ne=null}var i=t.prototype;return i.zo=function(t,i){this.Wo(i),this.ne=null;for(var n=i;n<t.length;++n){var s=t[n],e=this.Fo.get(s.jo);void 0===e&&(e=[],this.Fo.set(s.jo,e)),e.push({pn:n,rt:s.rt,$o:s.jo,Ho:s.Ho})}},i.Uo=function(t,i){var n=Math.ceil(i/t);return null!==this.ne&&this.ne.qo===n||(this.ne={pl:this.Yo(n),qo:n}),this.ne.pl},i.Wo=function(t){if(0!==t){var i=[];this.Fo.forEach((function(n,s){t<=n[0].pn?i.push(s):n.splice(Mt(n,t,(function(i){return i.pn<t})),1/0)}));for(var n=0,s=i;n<s.length;n++){var e=s[n];this.Fo.delete(e)}}else this.Fo.clear()},i.Yo=function(t){for(var i,n=[],e=(0,s.Z)(Array.from(this.Fo.keys()).sort((function(t,i){return i-t})));!(i=e()).done;){var h=i.value;if(this.Fo.get(h)){var r=n;n=[];for(var o=r.length,u=0,a=d(this.Fo.get(h)),l=a.length,f=1/0,c=-1/0,v=0;v<l;v++){for(var p=a[v],m=p.pn;u<o;){var g=r[u],b=g.pn;if(!(b<m)){f=b;break}u++,n.push(g),c=b,f=1/0}f-m>=t&&m-c>=t&&(n.push(p),c=m)}for(;u<o;u++)n.push(r[u])}}return n},t}(),fn=function(){function t(t){this.Xo=t}var i=t.prototype;return i.Ko=function(){return null===this.Xo?null:new sn(Math.floor(this.Xo.Hs()),Math.ceil(this.Xo.Us()))},i.Zo=function(){return this.Xo},t.Go=function(){return new t(null)},t}();!function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(hn||(hn={}));var cn=function(){function t(t,i,n){this.oe=0,this.Jo=null,this.Qo=[],this.ql=null,this.Ul=null,this.t_=new ln,this.i_=new Map,this.s_=fn.Go(),this.n_=!0,this.e_=new T,this.r_=new T,this.h_=new T,this.l_=null,this.a_=null,this.o_=[],this.Fi=i,this.Zl=n,this.__=i.rightOffset,this.u_=i.barSpacing,this.gi=t,this.c_()}var i=t.prototype;return i.V=function(){return this.Fi},i.d_=function(t){F(this.Zl,t),this.f_(),this.c_()},i.zr=function(t,i){var n;F(this.Fi,t),this.Fi.fixLeftEdge&&this.p_(),this.Fi.fixRightEdge&&this.v_(),void 0!==t.barSpacing&&this.gi.ks(t.barSpacing),void 0!==t.rightOffset&&this.gi.xs(t.rightOffset),void 0!==t.minBarSpacing&&this.gi.ks(null!==(n=t.barSpacing)&&void 0!==n?n:this.u_),this.f_(),this.c_(),this.h_.m()},i.Hi=function(t){var i,n;return null!==(n=null===(i=this.Qo[t])||void 0===i?void 0:i.rt)&&void 0!==n?n:null},i.Mi=function(t){var i;return null!==(i=this.Qo[t])&&void 0!==i?i:null},i.nl=function(t,i){if(this.Qo.length<1)return null;if(t.Ao>this.Qo[this.Qo.length-1].rt.Ao)return i?this.Qo.length-1:null;var n=Mt(this.Qo,t.Ao,(function(t,i){return t.rt.Ao<i}));return t.Ao<this.Qo[n].rt.Ao?i?n:null:n},i.vi=function(){return 0===this.oe||0===this.Qo.length||null===this.Jo},i.hn=function(){return this.m_(),this.s_.Ko()},i.w_=function(){return this.m_(),this.s_.Zo()},i.b_=function(){var t=this.hn();if(null===t)return null;var i={from:t.Hs(),to:t.Us()};return this.g_(i)},i.g_=function(t){var i=Math.round(t.from),n=Math.round(t.to),s=p(this.M_()),e=p(this.S_());return{from:p(this.Hi(Math.max(s,i))),to:p(this.Hi(Math.min(e,n)))}},i.y_=function(t){return{from:p(this.nl(t.from,!0)),to:p(this.nl(t.to,!0))}},i.Ut=function(){return this.oe},i.qa=function(t){if(isFinite(t)&&!(t<=0)&&this.oe!==t){var i=this.w_(),n=this.oe;if(this.oe=t,this.n_=!0,this.Fi.lockVisibleTimeRangeOnResize&&0!==n){var s=this.u_*t/n;this.u_=s}if(this.Fi.fixLeftEdge&&null!==i&&i.Hs()<=0){var e=n-t;this.__-=Math.round(e/this.u_)+1,this.n_=!0}this.k_(),this.x_()}},i.Ot=function(t){if(this.vi()||!k(t))return 0;var i=this.C_()+this.__-t;return this.oe-(i+.5)*this.u_-1},i.on=function(t,i){for(var n=this.C_(),s=void 0===i?0:i.from,e=void 0===i?t.length:i.to,h=s;h<e;h++){var r=t[h].rt,o=n+this.__-r,u=this.oe-(o+.5)*this.u_-1;t[h].tt=u}},i.T_=function(t){return Math.ceil(this.D_(t))},i.xs=function(t){this.n_=!0,this.__=t,this.x_(),this.gi.P_(),this.gi.Wr()},i.wn=function(){return this.u_},i.ks=function(t){this.O_(t),this.x_(),this.gi.P_(),this.gi.Wr()},i.N_=function(){return this.__},i.pl=function(){if(this.vi())return null;if(null!==this.a_)return this.a_;for(var t,i=this.u_,n=5*(this.gi.V().layout.fontSize+4),e=Math.round(n/i),h=p(this.hn()),r=Math.max(h.Hs(),h.Hs()-e),o=Math.max(h.Us(),h.Us()-e),u=this.t_.Uo(i,n),a=this.M_()+e,l=this.S_()-e,f=this.R_(),c=this.Fi.fixLeftEdge||f,v=this.Fi.fixRightEdge||f,d=0,m=(0,s.Z)(u);!(t=m()).done;){var g=t.value;if(r<=g.pn&&g.pn<=o){var b=void 0;d<this.o_.length?((b=this.o_[d])._l=this.Ot(g.pn),b.Pl=this.A_(g),b.$o=g.$o):(b={E_:!1,_l:this.Ot(g.pn),Pl:this.A_(g),$o:g.$o},this.o_.push(b)),this.u_>n/2&&!f?b.E_=!1:b.E_=c&&g.pn<=a||v&&g.pn>=l,d++}}return this.o_.length=d,this.a_=this.o_,this.o_},i.I_=function(){this.n_=!0,this.ks(this.Fi.barSpacing),this.xs(this.Fi.rightOffset)},i.L_=function(t){this.n_=!0,this.Jo=t,this.x_(),this.p_()},i.B_=function(t,i){var n=this.D_(t),s=this.wn(),e=s+i*(s/10);this.ks(e),this.Fi.rightBarStaysOnScroll||this.xs(this.N_()+(n-this.D_(t)))},i.Sa=function(t){this.ql&&this.Ta(),null===this.Ul&&null===this.l_&&(this.vi()||(this.Ul=t,this.V_()))},i.ya=function(t){if(null!==this.l_){var i=Et(this.oe-t,0,this.oe),n=Et(this.oe-p(this.Ul),0,this.oe);0!==i&&0!==n&&this.ks(this.l_.wn*i/n)}},i.ka=function(){null!==this.Ul&&(this.Ul=null,this.F_())},i.xa=function(t){null===this.ql&&null===this.l_&&(this.vi()||(this.ql=t,this.V_()))},i.Ca=function(t){if(null!==this.ql){var i=(this.ql-t)/this.wn();this.__=p(this.l_).N_+i,this.n_=!0,this.x_()}},i.Ta=function(){null!==this.ql&&(this.ql=null,this.F_())},i.z_=function(){this.W_(this.Fi.rightOffset)},i.W_=function(t,i){var n=this;if(void 0===i&&(i=400),!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw new RangeError("animationDuration (optional) must be finite positive number");var s=this.__,e=performance.now();!function h(){var r=(performance.now()-e)/i,o=r>=1,u=o?t:s+(t-s)*r;n.xs(u),o||setTimeout(h,20)}()},i.dt=function(t,i){this.n_=!0,this.Qo=t,this.t_.zo(t,i),this.x_()},i.j_=function(){return this.e_},i.H_=function(){return this.r_},i.U_=function(){return this.h_},i.C_=function(){return this.Jo||0},i.q_=function(t){var i=t.Vo();this.O_(this.oe/i),this.__=t.Us()-this.C_(),this.x_(),this.n_=!0,this.gi.P_(),this.gi.Wr()},i.Y_=function(){var t=this.M_(),i=this.S_();null!==t&&null!==i&&this.q_(new sn(t,i+this.Fi.rightOffset))},i.X_=function(t){var i=new sn(t.from,t.to);this.q_(i)},i.Si=function(t){return void 0!==this.Zl.timeFormatter?this.Zl.timeFormatter(t.Ho):this.K_.vo(new Date(1e3*t.rt.Ao))},i.R_=function(){var t=this.gi.V(),i=t.handleScroll,n=t.handleScale;return!(i.horzTouchDrag||i.mouseWheel||i.pressedMouseMove||i.vertTouchDrag||n.axisDoubleClickReset||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)},i.M_=function(){return 0===this.Qo.length?null:0},i.S_=function(){return 0===this.Qo.length?null:this.Qo.length-1},i.Z_=function(t){return(this.oe-1-t)/this.u_},i.D_=function(t){var i=this.Z_(t),n=this.C_()+this.__-i;return Math.round(1e6*n)/1e6},i.O_=function(t){var i=this.u_;this.u_=t,this.k_(),i!==this.u_&&(this.n_=!0,this.G_())},i.m_=function(){if(this.n_)if(this.n_=!1,this.vi())this.J_(fn.Go());else{var t=this.C_(),i=this.oe/this.u_,n=this.__+t,s=new sn(n-i+1,n);this.J_(new fn(s))}},i.k_=function(){var t=this.Q_();if(this.u_<t&&(this.u_=t,this.n_=!0),0!==this.oe){var i=.5*this.oe;this.u_>i&&(this.u_=i,this.n_=!0)}},i.Q_=function(){return this.Fi.fixLeftEdge&&this.Fi.fixRightEdge&&0!==this.Qo.length?this.oe/this.Qo.length:this.Fi.minBarSpacing},i.x_=function(){var t=this.tu();this.__>t&&(this.__=t,this.n_=!0);var i=this.iu();null!==i&&this.__<i&&(this.__=i,this.n_=!0)},i.iu=function(){var t=this.M_(),i=this.Jo;return null===t||null===i?null:t-i-1+(this.Fi.fixLeftEdge?this.oe/this.u_:Math.min(2,this.Qo.length))},i.tu=function(){return this.Fi.fixRightEdge?0:this.oe/this.u_-Math.min(2,this.Qo.length)},i.V_=function(){this.l_={wn:this.wn(),N_:this.N_()}},i.F_=function(){this.l_=null},i.A_=function(t){var i=this,n=this.i_.get(t.$o);return void 0===n&&(n=new nn((function(t){return i.su(t)})),this.i_.set(t.$o,n)),n.vo(t)},i.su=function(t){var i=function(t,i,n){switch(t){case 0:case 10:return i?n?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return i?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.$o,this.Fi.timeVisible,this.Fi.secondsVisible);return void 0!==this.Fi.tickMarkFormatter?this.Fi.tickMarkFormatter(t.Ho,i,this.Zl.locale):function(t,i,n){var s={};switch(i){case 0:s.year="numeric";break;case 1:s.month="short";break;case 2:s.day="numeric";break;case 3:s.hour12=!1,s.hour="2-digit",s.minute="2-digit";break;case 4:s.hour12=!1,s.hour="2-digit",s.minute="2-digit",s.second="2-digit"}var e=void 0===t.Ro?new Date(1e3*t.Ao):new Date(Date.UTC(t.Ro.year,t.Ro.month-1,t.Ro.day));return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()).toLocaleString(n,s)}(t.rt,i,this.Zl.locale)},i.J_=function(t){var i=this.s_;this.s_=t,en(i.Ko(),this.s_.Ko())||this.e_.m(),en(i.Zo(),this.s_.Zo())||this.r_.m(),this.G_()},i.G_=function(){this.a_=null},i.f_=function(){this.G_(),this.i_.clear()},i.c_=function(){var t=this.Zl.dateFormat;this.Fi.timeVisible?this.K_=new tn({wo:t,bo:this.Fi.secondsVisible?"%h:%m:%s":"%h:%m",Mo:"   ",So:this.Zl.locale}):this.K_=new $i(t,this.Zl.locale)},i.p_=function(){if(this.Fi.fixLeftEdge){var t=this.M_();if(null!==t){var i=this.hn();if(null!==i){var n=i.Hs()-t;if(n<0){var s=this.__-n-1;this.xs(s)}this.k_()}}}},i.v_=function(){this.x_(),this.k_()},t}(),vn=function(t){function i(i){var n;return(n=t.call(this)||this).nu=new Map,n.Nt=i,n}(0,h.Z)(i,t);var n=i.prototype;return n.q=function(t){},n.X=function(t){if(this.Nt.St){t.save();for(var i,n=0,e=(0,s.Z)(this.Nt.eu);!(i=e()).done;){var h=i.value;if(0!==h.Jt.length){t.font=h.D;var r=this.ru(t,h.Jt);r>this.Nt.Ut?h.B_=this.Nt.Ut/r:h.B_=1,n+=h.hu*h.B_}}var o=0;switch(this.Nt.lu){case"top":o=0;break;case"center":o=Math.max((this.Nt.qt-n)/2,0);break;case"bottom":o=Math.max(this.Nt.qt-n,0)}t.fillStyle=this.Nt.O;for(var u,a=(0,s.Z)(this.Nt.eu);!(u=a()).done;){var l=u.value;t.save();var f=0;switch(this.Nt.au){case"left":t.textAlign="left",f=l.hu/2;break;case"center":t.textAlign="center",f=this.Nt.Ut/2;break;case"right":t.textAlign="right",f=this.Nt.Ut-1-l.hu/2}t.translate(f,o),t.textBaseline="top",t.font=l.D,t.scale(l.B_,l.B_),t.fillText(l.Jt,0,l.ou),t.restore(),o+=l.hu*l.B_}t.restore()}},n.ru=function(t,i){var n=this._u(t.font),s=n.get(i);return void 0===s&&(s=t.measureText(i).width,n.set(i,s)),s},n._u=function(t){var i=this.nu.get(t);return void 0===i&&(i=new Map,this.nu.set(t,i)),i},i}(Z),dn=function(){function t(t){this.ut=!0,this.Vt={St:!1,O:"",qt:0,Ut:0,eu:[],lu:"center",au:"center"},this.Ft=new vn(this.Vt),this.zt=t}var i=t.prototype;return i.dt=function(){this.ut=!0},i.vt=function(t,i){return this.ut&&(this.wt(t,i),this.ut=!1),this.Ft},i.wt=function(t,i){var n=this.zt.V(),s=this.Vt;s.St=n.visible,s.St&&(s.O=n.color,s.Ut=i,s.qt=t,s.au=n.horzAlign,s.lu=n.vertAlign,s.eu=[{Jt:n.text,D:P(n.fontSize,n.fontFamily,n.fontStyle),hu:1.2*n.fontSize,ou:0,B_:0}])},t}(),pn=function(t){function i(i,n){var s;return(s=t.call(this)||this).Fi=n,s.qi=new dn(e(s)),s}(0,h.Z)(i,t);var n=i.prototype;return n.ns=function(){return[]},n.ss=function(){return[this.qi]},n.V=function(){return this.Fi},n.rs=function(){this.qi.dt()},i}(st);!function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"}(rn||(rn={}));var mn=function(){function t(t,i){this.uu=[],this.cu=[],this.oe=0,this.du=null,this.fu=null,this.pu=new T,this.vu=new T,this.mu=null,this.wu=t,this.Fi=i,this.bu=new G(this),this.Ia=new cn(this,i.timeScale,this.Fi.localization),this.ct=new et(this,i.crosshair),this.gu=new xi(i.crosshair),this.Mu=new pn(this,i.watermark),this.Su(),this.uu[0].Ua(2e3),this.yu=this.ku(0),this.xu=this.ku(1)}var i=t.prototype;return i.Rh=function(){this.Cu(new rt(3))},i.Wr=function(){this.Cu(new rt(2))},i.Uh=function(){this.Cu(new rt(1))},i.Ah=function(t){var i=this.Tu(t);this.Cu(i)},i.Du=function(){return this.fu},i.Pu=function(t){var i=this.fu;this.fu=t,null!==i&&this.Ah(i.Ou),null!==t&&this.Ah(t.Ou)},i.V=function(){return this.Fi},i.zr=function(t){F(this.Fi,t),this.uu.forEach((function(i){return i.Wa(t)})),void 0!==t.timeScale&&this.Ia.zr(t.timeScale),void 0!==t.localization&&this.Ia.d_(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.pu.m(),this.yu=this.ku(0),this.xu=this.ku(1),this.Rh()},i.Nu=function(t,i){if("left"!==t)if("right"!==t){var n=this.Ru(t);null!==n&&(n.Ct.zr(i),this.pu.m())}else this.zr({rightPriceScale:i});else this.zr({leftPriceScale:i})},i.Ru=function(t){for(var i,n=(0,s.Z)(this.uu);!(i=n()).done;){var e=i.value,h=e.ja(t);if(null!==h)return{Wt:e,Ct:h}}return null},i.gt=function(){return this.Ia},i.Au=function(){return this.uu},i.Eu=function(){return this.Mu},i.Iu=function(){return this.ct},i.Lu=function(){return this.vu},i.Bu=function(t,i){t.aa(i),this.P_()},i.qa=function(t){this.oe=t,this.Ia.qa(this.oe),this.uu.forEach((function(i){return i.qa(t)})),this.P_()},i.Su=function(t){var i=new Hi(this.Ia,this);void 0!==t?this.uu.splice(t,0,i):this.uu.push(i);var n=void 0===t?this.uu.length-1:t,s=new rt(3);return s.fs(n,{ps:0,vs:!0}),this.Cu(s),i},i.io=function(t,i,n){t.io(i,n)},i.so=function(t,i,n){t.so(i,n),this.Eh(),this.Cu(this.Vu(t,2))},i.no=function(t,i){t.no(i),this.Cu(this.Vu(t,2))},i.eo=function(t,i,n){i.sa()||t.eo(i,n)},i.ro=function(t,i,n){i.sa()||(t.ro(i,n),this.Eh(),this.Cu(this.Vu(t,2)))},i.ho=function(t,i){i.sa()||(t.ho(i),this.Cu(this.Vu(t,2)))},i.ao=function(t,i){t.ao(i),this.Cu(this.Vu(t,2))},i.Fu=function(t){this.Ia.Sa(t)},i.zu=function(t,i){var n=this.gt();if(!n.vi()&&0!==i){var s=n.Ut();t=Math.max(1,Math.min(t,s)),n.B_(t,i),this.P_()}},i.Wu=function(t){this.ju(0),this.$u(t),this.Hu()},i.Uu=function(t){this.Ia.ya(t),this.P_()},i.qu=function(){this.Ia.ka(),this.Wr()},i.ju=function(t){this.du=t,this.Ia.xa(t)},i.$u=function(t){var i=!1;return null!==this.du&&Math.abs(t-this.du)>20&&(this.du=null,i=!0),this.Ia.Ca(t),this.P_(),i},i.Hu=function(){this.Ia.Ta(),this.Wr(),this.du=null},i.ft=function(){return this.cu},i.Yu=function(t,i,n){this.ct.Yi(t,i);var s=NaN,e=this.Ia.T_(t),h=this.Ia.hn();null!==h&&(e=Math.min(Math.max(h.Hs(),e),h.Us()));var r=n.ji(),o=r.yt();null!==o&&(s=r.$i(i,o)),s=this.gu.el(s,e,n),this.ct.Gi(e,s,n),this.Uh(),this.vu.m(this.ct.bt(),{x:t,y:i})},i.Xu=function(){this.Iu().Qi(),this.Uh(),this.vu.m(null,null)},i.Eh=function(){var t=this.ct.Wt();if(null!==t){var i=this.ct.Ki(),n=this.ct.Zi();this.Yu(i,n,t)}this.ct.rs()},i.Ku=function(t,i,n){var s=this.Ia.Hi(0);void 0!==i&&void 0!==n&&this.Ia.dt(i,n);var e=this.Ia.Hi(0),h=this.Ia.C_(),r=this.Ia.hn();if(null!==r&&null!==s&&null!==e){var o=r.Ye(h),u=s.Ao>e.Ao,a=null!==t&&t>h&&!u,l=o&&this.Ia.V().shiftVisibleRangeOnNewBar;if(a&&!l){var f=t-h;this.Ia.xs(this.Ia.N_()-f)}}this.Ia.L_(t)},i.Bh=function(t){null!==t&&t._o()},i.fe=function(t){var i=this.uu.find((function(i){return i.va().includes(t)}));return void 0===i?null:i},i.P_=function(){this.Mu.rs(),this.uu.forEach((function(t){return t._o()})),this.Eh()},i.M=function(){this.uu.forEach((function(t){return t.M()})),this.uu.length=0,this.Fi.localization.priceFormatter=void 0,this.Fi.localization.timeFormatter=void 0},i.Zu=function(){return this.bu},i.we=function(){return this.bu.V()},i.$a=function(){return this.pu},i.Gu=function(t,i){var n=this.uu[0],s=this.Ju(i,t,n);return this.cu.push(s),1===this.cu.length?this.Rh():this.Wr(),s},i.Qu=function(t){var i=this.fe(t),n=this.cu.indexOf(t);v(-1!==n,"Series not found"),this.cu.splice(n,1),p(i).ba(t),t.M&&t.M()},i.Nh=function(t,i){var n=p(this.fe(t));n.ba(t);var s=this.Ru(i);if(null===s){var e=t.xi();n.ma(t,i,e)}else{var h=s.Wt===n?t.xi():void 0;s.Wt.ma(t,i,h)}},i.Y_=function(){var t=new rt(2);t.gs(),this.Cu(t)},i.tc=function(t){var i=new rt(2);i.Ss(t),this.Cu(i)},i.ys=function(){var t=new rt(2);t.ys(),this.Cu(t)},i.ks=function(t){var i=new rt(2);i.ks(t),this.Cu(i)},i.xs=function(t){var i=new rt(2);i.xs(t),this.Cu(i)},i.ic=function(){return this.Fi.rightPriceScale.visible?"right":"left"},i.sc=function(){return this.xu},i.nc=function(){return this.yu},i.Pt=function(t){var i=this.xu,n=this.yu;if(i===n)return i;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.mu||this.mu.zs!==n||this.mu.Ws!==i)this.mu={zs:n,Ws:i,ec:new Map};else{var s=this.mu.ec.get(t);if(void 0!==s)return s}var e=function(t,i,n){var s=_(t),e=s[0],h=s[1],r=s[2],o=s[3],u=_(i),a=u[0],l=u[1],f=u[2],c=u[3],v=[b(e+n*(a-e)),b(h+n*(l-h)),b(r+n*(f-r)),M(o+n*(c-o))];return"rgba("+v[0]+", "+v[1]+", "+v[2]+", "+v[3]+")"}(n,i,t/100);return this.mu.ec.set(t,e),e},i.Vu=function(t,i){var n=new rt(i);if(null!==t){var s=this.uu.indexOf(t);n.fs(s,{ps:i})}return n},i.Tu=function(t,i){return void 0===i&&(i=2),this.Vu(this.fe(t),i)},i.Cu=function(t){this.wu&&this.wu(t),this.uu.forEach((function(t){return t.co().vl().dt()}))},i.Ju=function(t,i,n){var s=new Fi(this,t,i),e=void 0!==t.priceScaleId?t.priceScaleId:this.ic();return n.ma(s,e),ht(e)||s.zr(t),s},i.ku=function(t){var i=this.Fi.layout;return"gradient"===i.background.type?0===t?i.background.topColor:i.background.bottomColor:i.background.color},t}();function gn(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}function bn(t){return!x(t)&&!E(t)}function Mn(t){return x(t)}!function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"}(on||(on={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(un||(un={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(an||(an={}));var wn=function(){function t(t,i){this.Et=t,this.It=i}return t.prototype.Mr=function(t){return this.Et===t.Et&&this.It===t.It},t}();function yn(t){return t.ownerDocument&&t.ownerDocument.defaultView&&t.ownerDocument.defaultView.devicePixelRatio||1}function Nn(t){var i=p(t.getContext("2d"));return i.setTransform(1,0,0,1,0,0),i}function Cn(t,i){var n=t.createElement("canvas"),s=yn(n);return n.style.width=i.Et+"px",n.style.height=i.It+"px",n.width=i.Et*s,n.height=i.It*s,n}function _n(t,i){var n=p(t.ownerDocument).createElement("canvas");t.appendChild(n);var s,e=(void 0===(s={allowDownsampling:!1})&&(s=r),new l(n,s));return e.resizeCanvas({width:i.Et,height:i.It}),e}function Sn(t,i){return t.rc-i.rc}function Tn(t,i,n){var s=(t.rc-i.rc)/(t.rt-i.rt);return Math.sign(s)*Math.min(Math.abs(s),n)}var Fn=function(){function t(t,i,n,s){this.hc=null,this.lc=null,this.ac=null,this.oc=null,this._c=null,this.uc=0,this.cc=0,this.dc=!1,this.fc=t,this.vc=i,this.mc=n,this.Ps=s}var i=t.prototype;return i.wc=function(t,i){if(null!==this.hc){if(this.hc.rt===i)return void(this.hc.rc=t);if(Math.abs(this.hc.rc-t)<this.Ps)return}this.oc=this.ac,this.ac=this.lc,this.lc=this.hc,this.hc={rt:i,rc:t}},i.De=function(t,i){if(null!==this.hc&&null!==this.lc&&!(i-this.hc.rt>50)){var n=0,s=Tn(this.hc,this.lc,this.vc),e=Sn(this.hc,this.lc),h=[s],r=[e];if(n+=e,null!==this.ac){var o=Tn(this.lc,this.ac,this.vc);if(Math.sign(o)===Math.sign(s)){var u=Sn(this.lc,this.ac);if(h.push(o),r.push(u),n+=u,null!==this.oc){var a=Tn(this.ac,this.oc,this.vc);if(Math.sign(a)===Math.sign(s)){var l=Sn(this.ac,this.oc);h.push(a),r.push(l),n+=l}}}}for(var f=0,c=0;c<h.length;++c)f+=r[c]/n*h[c];Math.abs(f)<this.fc||(this._c={rc:t,rt:i},this.cc=f,this.uc=function(t,i){var n=Math.log(i);return Math.log(1*n/-t)/n}(Math.abs(f),this.mc))}},i.bc=function(t){var i=p(this._c),n=t-i.rt;return i.rc+this.cc*(Math.pow(this.mc,n)-1)/Math.log(this.mc)},i.gc=function(t){return null===this._c||this.Mc(t)===this.uc},i.Sc=function(){return this.dc},i.yc=function(){this.dc=!0},i.Mc=function(t){var i=t-p(this._c).rt;return Math.min(i,this.uc)},t}(),xn="undefined"!=typeof window;function kn(){return!!xn&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function En(){return!!xn&&/iPhone|iPad|iPod/.test(window.navigator.platform)}var In=function(){function t(t,i,n){var s=this;this.kc=0,this.xc=null,this.Cc={tt:Number.NEGATIVE_INFINITY,it:Number.POSITIVE_INFINITY},this.Tc=0,this.Dc=null,this.Pc={tt:Number.NEGATIVE_INFINITY,it:Number.POSITIVE_INFINITY},this.Oc=null,this.Nc=!1,this.Rc=null,this.Ac=null,this.Ec=!1,this.Ic=!1,this.Lc=!1,this.Bc=null,this.Vc=null,this.Fc=null,this.zc=null,this.Wc=null,this.jc=null,this.$c=null,this.Hc=0,this.Uc=!1,this.qc=!1,this.Yc=!1,this.Xc=0,this.Kc=null,this.Zc=!En(),this.Gc=function(t){s.Jc(t)},this.Qc=function(t){if(s.td(t)){var i=s.sd(t);if(++s.Tc,s.Dc&&s.Tc>1)s.ed(Rn(t),s.Pc).nd<30&&!s.Lc&&s.rd(i,s.ld.hd),s.ad()}else{var n=s.sd(t);if(++s.kc,s.xc&&s.kc>1)s.ed(Rn(t),s.Cc).nd<5&&!s.Ic&&s.od(n,s.ld._d),s.ud()}},this.dd=t,this.ld=i,this.Fi=n,this.fd()}var i=t.prototype;return i.M=function(){null!==this.Bc&&(this.Bc(),this.Bc=null),null!==this.Vc&&(this.Vc(),this.Vc=null),null!==this.zc&&(this.zc(),this.zc=null),null!==this.Wc&&(this.Wc(),this.Wc=null),null!==this.jc&&(this.jc(),this.jc=null),null!==this.Fc&&(this.Fc(),this.Fc=null),this.pd(),this.ud()},i.vd=function(t){var i=this;this.zc&&this.zc();var n=this.md.bind(this);if(this.zc=function(){i.dd.removeEventListener("mousemove",n)},this.dd.addEventListener("mousemove",n),!this.td(t)){var s=this.sd(t);this.od(s,this.ld.wd),this.Zc=!0}},i.ud=function(){null!==this.xc&&clearTimeout(this.xc),this.kc=0,this.xc=null,this.Cc={tt:Number.NEGATIVE_INFINITY,it:Number.POSITIVE_INFINITY}},i.ad=function(){null!==this.Dc&&clearTimeout(this.Dc),this.Tc=0,this.Dc=null,this.Pc={tt:Number.NEGATIVE_INFINITY,it:Number.POSITIVE_INFINITY}},i.md=function(t){if(!this.Yc&&null===this.Ac&&!this.td(t)){var i=this.sd(t);this.od(i,this.ld.bd),this.Zc=!0}},i.gd=function(t){var i=Pn(t.changedTouches,p(this.Kc));if(null!==i&&(this.Xc=Vn(t),null===this.$c&&!this.qc)){this.Uc=!0;var n=this.ed(Rn(i),p(this.Ac)),s=n.Md,e=n.Sd,h=n.nd;if(this.Ec||!(h<5)){if(!this.Ec){var r=.5*s,o=e>=r&&!this.Fi.yd(),u=r>e&&!this.Fi.kd();o||u||(this.qc=!0),this.Ec=!0,this.Lc=!0,this.pd(),this.ad()}if(!this.qc){var a=this.sd(t,i);this.rd(a,this.ld.xd),Ln(t)}}}},i.Cd=function(t){if(0===t.button&&(this.ed(Rn(t),p(this.Rc)).nd>=5&&(this.Ic=!0,this.ud()),this.Ic)){var i=this.sd(t);this.od(i,this.ld.Td)}},i.ed=function(t,i){var n=Math.abs(i.tt-t.tt),s=Math.abs(i.it-t.it);return{Md:n,Sd:s,nd:n+s}},i.Dd=function(t){var i=Pn(t.changedTouches,p(this.Kc));if(null===i&&0===t.touches.length&&(i=t.changedTouches[0]),null!==i){this.Kc=null,this.Xc=Vn(t),this.pd(),this.Ac=null,this.jc&&(this.jc(),this.jc=null);var n=this.sd(t,i);if(this.rd(n,this.ld.Pd),++this.Tc,this.Dc&&this.Tc>1)this.ed(Rn(i),this.Pc).nd<30&&!this.Lc&&this.rd(n,this.ld.hd),this.ad();else this.Lc||(this.rd(n,this.ld.Od),this.ld.Od&&Ln(t));0===this.Tc&&Ln(t),0===t.touches.length&&this.Nc&&(this.Nc=!1,Ln(t))}},i.Jc=function(t){if(0===t.button){var i=this.sd(t);if(this.Rc=null,this.Yc=!1,this.Wc&&(this.Wc(),this.Wc=null),kn()&&this.dd.ownerDocument.documentElement.removeEventListener("mouseleave",this.Gc),!this.td(t))if(this.od(i,this.ld.Nd),++this.kc,this.xc&&this.kc>1){this.ed(Rn(t),this.Cc).nd<5&&!this.Ic&&this.od(i,this.ld._d),this.ud()}else this.Ic||this.od(i,this.ld.Rd)}},i.pd=function(){null!==this.Oc&&(clearTimeout(this.Oc),this.Oc=null)},i.Ad=function(t){if(null===this.Kc){var i=t.changedTouches[0];this.Kc=i.identifier,this.Xc=Vn(t);var n=this.dd.ownerDocument.documentElement;this.Lc=!1,this.Ec=!1,this.qc=!1,this.Ac=Rn(i),this.jc&&(this.jc(),this.jc=null);var s=this.gd.bind(this),e=this.Dd.bind(this);this.jc=function(){n.removeEventListener("touchmove",s),n.removeEventListener("touchend",e)},n.addEventListener("touchmove",s,{passive:!1}),n.addEventListener("touchend",e,{passive:!1}),this.pd(),this.Oc=setTimeout(this.Ed.bind(this,t),240);var h=this.sd(t,i);this.rd(h,this.ld.Id),this.Dc||(this.Tc=0,this.Dc=setTimeout(this.ad.bind(this),500),this.Pc=Rn(i))}},i.Ld=function(t){if(0===t.button){var i=this.dd.ownerDocument.documentElement;kn()&&i.addEventListener("mouseleave",this.Gc),this.Ic=!1,this.Rc=Rn(t),this.Wc&&(this.Wc(),this.Wc=null);var n=this.Cd.bind(this),s=this.Jc.bind(this);if(this.Wc=function(){i.removeEventListener("mousemove",n),i.removeEventListener("mouseup",s)},i.addEventListener("mousemove",n),i.addEventListener("mouseup",s),this.Yc=!0,!this.td(t)){var e=this.sd(t);this.od(e,this.ld.Bd),this.xc||(this.kc=0,this.xc=setTimeout(this.ud.bind(this),500),this.Cc=Rn(t))}}},i.fd=function(){var t=this;this.dd.addEventListener("mouseenter",this.vd.bind(this)),this.dd.addEventListener("touchcancel",this.pd.bind(this));var i=this.dd.ownerDocument,n=function(i){t.ld.Vd&&(i.target&&t.dd.contains(i.target)||t.ld.Vd())};this.Vc=function(){i.removeEventListener("touchstart",n)},this.Bc=function(){i.removeEventListener("mousedown",n)},i.addEventListener("mousedown",n),i.addEventListener("touchstart",n,{passive:!0}),En()&&(this.Fc=function(){t.dd.removeEventListener("dblclick",t.Qc)},this.dd.addEventListener("dblclick",this.Qc)),this.dd.addEventListener("mouseleave",this.Fd.bind(this)),this.dd.addEventListener("touchstart",this.Ad.bind(this),{passive:!0}),function(t){xn&&void 0!==window.chrome&&t.addEventListener("mousedown",(function(t){if(1===t.button)return t.preventDefault(),!1}))}(this.dd),this.dd.addEventListener("mousedown",this.Ld.bind(this)),this.zd(),this.dd.addEventListener("touchmove",(function(){}),{passive:!1})},i.zd=function(){var t=this;void 0===this.ld.Wd&&void 0===this.ld.jd&&void 0===this.ld.$d||(this.dd.addEventListener("touchstart",(function(i){return t.Hd(i.touches)}),{passive:!0}),this.dd.addEventListener("touchmove",(function(i){if(2===i.touches.length&&null!==t.$c&&void 0!==t.ld.jd){var n=On(i.touches[0],i.touches[1])/t.Hc;t.ld.jd(t.$c,n),Ln(i)}}),{passive:!1}),this.dd.addEventListener("touchend",(function(i){t.Hd(i.touches)})))},i.Hd=function(t){1===t.length&&(this.Uc=!1),2!==t.length||this.Uc||this.Nc?this.Ud():this.qd(t)},i.qd=function(t){var i=this.dd.getBoundingClientRect()||{left:0,top:0};this.$c={tt:(t[0].clientX-i.left+(t[1].clientX-i.left))/2,it:(t[0].clientY-i.top+(t[1].clientY-i.top))/2},this.Hc=On(t[0],t[1]),void 0!==this.ld.Wd&&this.ld.Wd(),this.pd()},i.Ud=function(){null!==this.$c&&(this.$c=null,void 0!==this.ld.$d&&this.ld.$d())},i.Fd=function(t){if(this.zc&&this.zc(),!this.td(t)&&this.Zc){var i=this.sd(t);this.od(i,this.ld.Yd),this.Zc=!En()}},i.Ed=function(t){var i=Pn(t.touches,p(this.Kc));if(null!==i){var n=this.sd(t,i);this.rd(n,this.ld.Xd),this.Lc=!0,this.Nc=!0}},i.td=function(t){return t.sourceCapabilities&&void 0!==t.sourceCapabilities.firesTouchEvents?t.sourceCapabilities.firesTouchEvents:Vn(t)<this.Xc+500},i.rd=function(t,i){i&&i.call(this.ld,t)},i.od=function(t,i){i&&i.call(this.ld,t)},i.sd=function(t,i){var n=i||t,s=this.dd.getBoundingClientRect()||{left:0,top:0};return{Kd:n.clientX,Zd:n.clientY,Gd:n.pageX,Jd:n.pageY,Qd:n.screenX,tf:n.screenY,if:n.clientX-s.left,sf:n.clientY-s.top,nf:t.ctrlKey,ef:t.altKey,rf:t.shiftKey,hf:t.metaKey,lf:!t.type.startsWith("mouse")&&"contextmenu"!==t.type&&"click"!==t.type,af:t.type,_f:n.target,uf:t.view,cf:function(){"touchstart"!==t.type&&Ln(t)}}},t}();function On(t,i){var n=t.clientX-i.clientX,s=t.clientY-i.clientY;return Math.sqrt(n*n+s*s)}function Ln(t){t.cancelable&&t.preventDefault()}function Rn(t){return{tt:t.pageX,it:t.pageY}}function Vn(t){return t.timeStamp||performance.now()}function Pn(t,i){for(var n=0;n<t.length;++n)if(t[n].identifier===i)return t[n];return null}var Gn=function(){function t(t,i,n,s){this._e=new Kt(200),this.F=0,this.df="",this.Ke="",this.re=[],this.ff=new Map,this.F=t,this.df=i,this.Ke=P(t,n,s)}var i=t.prototype;return i.M=function(){this._e.he(),this.re=[],this.ff.clear()},i.pf=function(t,i,n,s,e){var h=this.vf(t,i);if("left"!==e){var r=yn(t.canvas);n-=Math.floor(h.mf*r)}s-=Math.floor(h.qt/2),t.drawImage(h.wf,n,s,h.Ut,h.qt)},i.vf=function(t,i){var n,s=this;if(this.ff.has(i))n=d(this.ff.get(i));else{if(this.re.length>=200){var e=d(this.re.shift());this.ff.delete(e)}var h=yn(t.canvas),r=Math.ceil(this.F/4.5),o=Math.round(this.F/10),u=Math.ceil(this._e.Qt(t,i)),a=Lt(Math.round(u+2*r)),l=Lt(this.F+2*r),f=Cn(document,new wn(a,l));n={Jt:i,mf:Math.round(Math.max(1,u)),Ut:Math.ceil(a*h),qt:Math.ceil(l*h),wf:f},0!==u&&(this.re.push(n.Jt),this.ff.set(n.Jt,n)),W(t=Nn(n.wf),h,(function(){t.font=s.Ke,t.fillStyle=s.df,t.fillText(i,0,l-r-o)}))}return n},t}(),jn=function(){function t(t,i,n,s){var e=this;this.fi=null,this.bf=null,this.gf=!1,this.Mf=new Kt(50),this.Sf=new Gn(11,"#000"),this.df=null,this.Ke=null,this.yf=0,this.kf=!1,this.xf=function(){e.Cf(e.bu.V()),e.kf||e.Pi.Tf().jt().Wr()},this.Df=function(){e.kf||e.Pi.Tf().jt().Wr()},this.Pi=t,this.Fi=i,this.bu=n,this.Pf="left"===s,this.Of=document.createElement("div"),this.Of.style.height="100%",this.Of.style.overflow="hidden",this.Of.style.width="25px",this.Of.style.left="0",this.Of.style.position="relative",this.Nf=_n(this.Of,new wn(16,16)),this.Nf.subscribeCanvasConfigured(this.xf);var h=this.Nf.canvas;h.style.position="absolute",h.style.zIndex="1",h.style.left="0",h.style.top="0",this.Rf=_n(this.Of,new wn(16,16)),this.Rf.subscribeCanvasConfigured(this.Df);var r=this.Rf.canvas;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0";var o={Bd:this.Af.bind(this),Id:this.Af.bind(this),Td:this.Ef.bind(this),xd:this.Ef.bind(this),Vd:this.If.bind(this),Nd:this.Lf.bind(this),Pd:this.Lf.bind(this),_d:this.Bf.bind(this),hd:this.Bf.bind(this),wd:this.Vf.bind(this),Yd:this.Ff.bind(this)};this.zf=new In(this.Rf.canvas,o,{yd:function(){return!1},kd:function(){return!0}})}var i=t.prototype;return i.M=function(){this.zf.M(),this.Rf.unsubscribeCanvasConfigured(this.Df),this.Rf.destroy(),this.Nf.unsubscribeCanvasConfigured(this.xf),this.Nf.destroy(),null!==this.fi&&this.fi.Ma().v(this),this.fi=null,this.Sf.M()},i.Wf=function(){return this.Of},i.et=function(){return p(this.fi).V().borderColor},i.jf=function(){return this.Fi.textColor},i.T=function(){return this.Fi.fontSize},i.$f=function(){return P(this.T(),this.Fi.fontFamily)},i.Hf=function(){var t=this.bu.V(),i=this.df!==t.O,n=this.Ke!==t.D;return(i||n)&&(this.Cf(t),this.df=t.O),n&&(this.Mf.he(),this.Ke=t.D),t},i.Uf=function(){if(null===this.fi)return 0;var t=0,i=this.Hf(),n=Nn(this.Nf.canvas),s=this.fi.pl();n.font=this.$f(),s.length>0&&(t=Math.max(this.Mf.Qt(n,s[0].Pl),this.Mf.Qt(n,s[s.length-1].Pl)));for(var e=this.qf(),h=e.length;h--;){var r=this.Mf.Qt(n,e[h].Jt());r>t&&(t=r)}var o=this.fi.yt();if(null!==o&&null!==this.bf){var u=this.fi.$i(1,o),a=this.fi.$i(this.bf.It-2,o);t=Math.max(t,this.Mf.Qt(n,this.fi.mi(Math.floor(Math.min(u,a))+.11111111111111,o)),this.Mf.Qt(n,this.fi.mi(Math.ceil(Math.max(u,a))-.11111111111111,o)))}var l=t||34,f=Math.ceil(i.k+i.C+i.R+i.A+l);return f+=f%2},i.Yf=function(t){if(t.Et<0||t.It<0)throw new Error("Try to set invalid size to PriceAxisWidget "+JSON.stringify(t));null!==this.bf&&this.bf.Mr(t)||(this.bf=t,this.kf=!0,this.Nf.resizeCanvas({width:t.Et,height:t.It}),this.Rf.resizeCanvas({width:t.Et,height:t.It}),this.kf=!1,this.Of.style.width=t.Et+"px",this.Of.style.height=t.It+"px",this.Of.style.minWidth=t.Et+"px")},i.Xf=function(){return p(this.bf).Et},i.Ti=function(t){this.fi!==t&&(null!==this.fi&&this.fi.Ma().v(this),this.fi=t,t.Ma().l(this.zl.bind(this),this))},i.Ct=function(){return this.fi},i.he=function(){var t=this.Pi.Kf();this.Pi.Tf().jt().ao(t,p(this.Ct()))},i.Zf=function(t){if(null!==this.bf){if(1!==t){var i=Nn(this.Nf.canvas);this.Gf(),this.Jf(i,this.Nf.pixelRatio),this.Un(i,this.Nf.pixelRatio),this.Qf(i,this.Nf.pixelRatio),this.tp(i,this.Nf.pixelRatio)}var n=Nn(this.Rf.canvas),s=this.bf.Et,e=this.bf.It;W(n,this.Rf.pixelRatio,(function(){n.clearRect(0,0,s,e)})),this.ip(n,this.Rf.pixelRatio)}},i.sp=function(){return this.Nf.canvas},i.dt=function(){var t;null===(t=this.fi)||void 0===t||t.pl()},i.Af=function(t){if(null!==this.fi&&!this.fi.vi()&&this.Pi.Tf().V().handleScale.axisPressedMouseMove.price){var i=this.Pi.Tf().jt(),n=this.Pi.Kf();this.gf=!0,i.io(n,this.fi,t.sf)}},i.Ef=function(t){if(null!==this.fi&&this.Pi.Tf().V().handleScale.axisPressedMouseMove.price){var i=this.Pi.Tf().jt(),n=this.Pi.Kf(),s=this.fi;i.so(n,s,t.sf)}},i.If=function(){if(null!==this.fi&&this.Pi.Tf().V().handleScale.axisPressedMouseMove.price){var t=this.Pi.Tf().jt(),i=this.Pi.Kf(),n=this.fi;this.gf&&(this.gf=!1,t.no(i,n))}},i.Lf=function(t){if(null!==this.fi&&this.Pi.Tf().V().handleScale.axisPressedMouseMove.price){var i=this.Pi.Tf().jt(),n=this.Pi.Kf();this.gf=!1,i.no(n,this.fi)}},i.Bf=function(t){this.Pi.Tf().V().handleScale.axisDoubleClickReset&&this.he()},i.Vf=function(t){null!==this.fi&&(!this.Pi.Tf().jt().V().handleScale.axisPressedMouseMove.price||this.fi.vr()||this.fi.na()||this.np(1))},i.Ff=function(t){this.np(0)},i.qf=function(){var t=this,i=[],n=null===this.fi?void 0:this.fi;return function(s){for(var e=0;e<s.length;++e)for(var h=s[e].ns(t.Pi.Kf(),n),r=0;r<h.length;r++)i.push(h[r])}(this.Pi.Kf().va()),i},i.Jf=function(t,i){var n=this;if(null!==this.bf){var s=this.bf.Et,e=this.bf.It;W(t,i,(function(){var i=n.Pi.Kf().jt(),h=i.nc(),r=i.sc();h===r?q(t,0,0,s,e,h):H(t,0,0,s,e,h,r)}))}},i.Un=function(t,i){if(null!==this.bf&&null!==this.fi&&this.fi.V().borderVisible){t.save(),t.fillStyle=this.et();var n,s=Math.max(1,Math.floor(this.Hf().k*i));n=this.Pf?Math.floor(this.bf.Et*i)-s:0,t.fillRect(n,0,s,Math.ceil(this.bf.It*i)),t.restore()}},i.Qf=function(t,i){if(null!==this.bf&&null!==this.fi){var n=this.fi.pl();t.save(),t.strokeStyle=this.et(),t.font=this.$f(),t.fillStyle=this.et();var e=this.Hf(),h=this.Pf?Math.floor((this.bf.Et-e.C)*i-e.k*i):Math.floor(e.k*i),r=this.Pf?Math.round(h-e.R*i):Math.round(h+e.C*i+e.R*i),o=this.Pf?"right":"left",u=Math.max(1,Math.floor(i)),a=Math.floor(.5*i),l=this.fi.V();if(l.borderVisible&&l.ticksVisible){var f=Math.round(e.C*i);t.beginPath();for(var c,v=(0,s.Z)(n);!(c=v()).done;){var d=c.value;t.rect(h,Math.round(d._l*i)-a,f,u)}t.fill()}t.fillStyle=this.jf();for(var p,m=(0,s.Z)(n);!(p=m()).done;){var g=p.value;this.Sf.pf(t,g.Pl,r,Math.round(g._l*i),o)}t.restore()}},i.Gf=function(){if(null!==this.bf&&null!==this.fi){var t=this.bf.It/2,i=[],n=this.fi.va().slice(),s=this.Pi.Kf(),e=this.Hf();this.fi===s.ve()&&this.Pi.Kf().va().forEach((function(t){s.pe(t)&&n.push(t)}));var h=this.fi.rl()[0],r=this.fi;n.forEach((function(n){var e=n.ns(s,r);e.forEach((function(t){t.oi(null),t._i()&&i.push(t)})),h===n&&e.length>0&&(t=e[0].ti())}));var o=i.filter((function(i){return i.ti()<=t})),u=i.filter((function(i){return i.ti()>t}));if(o.sort((function(t,i){return i.ti()-t.ti()})),o.length&&u.length&&u.push(o[0]),u.sort((function(t,i){return t.ti()-i.ti()})),i.forEach((function(t){return t.oi(t.ti())})),this.fi.V().alignLabels){for(var a=1;a<o.length;a++){var l=o[a],f=o[a-1],c=f.qt(e,!1),v=l.ti(),d=f.ai();v>d-c&&l.oi(d-c)}for(var p=1;p<u.length;p++){var m=u[p],g=u[p-1],b=g.qt(e,!0),M=m.ti(),w=g.ai();M<w+b&&m.oi(w+b)}}}},i.tp=function(t,i){var n=this;if(null!==this.bf){t.save();var s=this.bf,e=this.qf(),h=this.Hf(),r=this.Pf?"right":"left";e.forEach((function(e){if(e.ui()){var o=e.vt(p(n.fi));t.save(),o.U(t,h,n.Mf,s.Et,r,i),t.restore()}})),t.restore()}},i.ip=function(t,i){var n=this;if(null!==this.bf&&null!==this.fi){t.save();var s=this.bf,e=this.Pi.Tf().jt(),h=[],r=this.Pi.Kf(),o=e.Iu().ns(r,this.fi);o.length&&h.push(o);var u=this.Hf(),a=this.Pf?"right":"left";h.forEach((function(e){e.forEach((function(e){t.save(),e.vt(p(n.fi)).U(t,u,n.Mf,s.Et,a,i),t.restore()}))})),t.restore()}},i.np=function(t){this.Of.style.cursor=1===t?"ns-resize":"default"},i.zl=function(){var t=this.Uf();this.yf<t&&this.Pi.Tf().jt().Rh(),this.yf=t},i.Cf=function(t){this.Sf.M(),this.Sf=new Gn(t.T,t.O,t.P)},t}();function Zn(t,i,n,s,e){t.Y&&t.Y(i,n,s,e)}function An(t,i,n,s,e){t.U(i,n,s,e)}function Dn(t,i){return t.ss(i)}function Un(t,i){return void 0!==t.Hh?t.Hh(i):[]}var Bn=function(){function t(t,i){var n=this;this.bf=new wn(0,0),this.ep=null,this.rp=null,this.hp=null,this.lp=!1,this.ap=new T,this.op=0,this._p=!1,this.up=null,this.cp=!1,this.dp=null,this.fp=null,this.kf=!1,this.xf=function(){n.kf||null===n.pp||n.gi().Wr()},this.Df=function(){n.kf||null===n.pp||n.gi().Wr()},this.vp=t,this.pp=i,this.pp.uo().l(this.mp.bind(this),this,!0),this.wp=document.createElement("td"),this.wp.style.padding="0",this.wp.style.position="relative";var s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.bp=document.createElement("td"),this.bp.style.padding="0",this.gp=document.createElement("td"),this.gp.style.padding="0",this.wp.appendChild(s),this.Nf=_n(s,new wn(16,16)),this.Nf.subscribeCanvasConfigured(this.xf);var e=this.Nf.canvas;e.style.position="absolute",e.style.zIndex="1",e.style.left="0",e.style.top="0",this.Rf=_n(s,new wn(16,16)),this.Rf.subscribeCanvasConfigured(this.Df);var h=this.Rf.canvas;h.style.position="absolute",h.style.zIndex="2",h.style.left="0",h.style.top="0",this.Mp=document.createElement("tr"),this.Mp.appendChild(this.bp),this.Mp.appendChild(this.wp),this.Mp.appendChild(this.gp),this.Sp(),this.zf=new In(this.Rf.canvas,this,{yd:function(){return null===n.up&&!n.vp.V().handleScroll.vertTouchDrag},kd:function(){return null===n.up&&!n.vp.V().handleScroll.horzTouchDrag}})}var i=t.prototype;return i.M=function(){null!==this.ep&&this.ep.M(),null!==this.rp&&this.rp.M(),this.Rf.unsubscribeCanvasConfigured(this.Df),this.Rf.destroy(),this.Nf.unsubscribeCanvasConfigured(this.xf),this.Nf.destroy(),null!==this.pp&&this.pp.uo().v(this),this.zf.M()},i.Kf=function(){return p(this.pp)},i.yp=function(i){null!==this.pp&&this.pp.uo().v(this),this.pp=i,null!==this.pp&&this.pp.uo().l(t.prototype.mp.bind(this),this,!0),this.Sp()},i.Tf=function(){return this.vp},i.Wf=function(){return this.Mp},i.Sp=function(){if(null!==this.pp&&(this.kp(),0!==this.gi().ft().length)){if(null!==this.ep){var t=this.pp.Ja();this.ep.Ti(p(t))}if(null!==this.rp){var i=this.pp.Qa();this.rp.Ti(p(i))}}},i.xp=function(){null!==this.ep&&this.ep.dt(),null!==this.rp&&this.rp.dt()},i.Ha=function(){return null!==this.pp?this.pp.Ha():0},i.Ua=function(t){this.pp&&this.pp.Ua(t)},i.wd=function(t){if(this.pp){this.Cp();var i=t.if,n=t.sf;this.Tp(i,n)}},i.Bd=function(t){this.Cp(),this.Dp(),this.Tp(t.if,t.sf)},i.bd=function(t){if(this.pp){this.Cp();var i=t.if,n=t.sf;this.Tp(i,n);var s=this.Ze(i,n);this.gi().Pu(s&&{Ou:s.Ou,Pp:s.Pp})}},i.Rd=function(t){if(null!==this.pp){this.Cp();var i=t.if,n=t.sf;if(this.ap.g()){var s=this.gi().Iu().bt();this.ap.m(s,{x:i,y:n})}}},i.Td=function(t){this.Cp(),this.Op(t),this.Tp(t.if,t.sf)},i.Nd=function(t){null!==this.pp&&(this.Cp(),this._p=!1,this.Np(t))},i.Xd=function(t){if(this._p=!0,null===this.up){var i={x:t.if,y:t.sf};this.Rp(i,i)}},i.Yd=function(t){null!==this.pp&&(this.Cp(),this.pp.jt().Pu(null),this.Ap())},i.Ep=function(){return this.ap},i.Wd=function(){this.op=1,this.Ip()},i.jd=function(t,i){if(this.vp.V().handleScale.pinch){var n=5*(i-this.op);this.op=i,this.gi().zu(t.tt,n)}},i.Id=function(t){if(this._p=!1,this.cp=null!==this.up,this.Dp(),null!==this.up){var i=this.gi().Iu();this.dp={x:i.Yt(),y:i.Xt()},this.up={x:t.if,y:t.sf}}},i.xd=function(t){if(null!==this.pp){var i=t.if,n=t.sf;if(null===this.up)this.Op(t);else{this.cp=!1;var s=p(this.dp),e=s.x+(i-this.up.x),h=s.y+(n-this.up.y);this.Tp(e,h)}}},i.Pd=function(t){0===this.Tf().V().trackingMode.exitMode&&(this.cp=!0),this.Lp(),this.Np(t)},i.Ze=function(t,i){var n=this.pp;if(null===n)return null;for(var e,h=n.va(),r=(0,s.Z)(h);!(e=r()).done;){var o=e.value,u=this.Bp(o.ss(n),t,i);if(null!==u)return{Ou:o,uf:u.uf,Pp:u.Pp}}return null},i.Vp=function(t,i){p("left"===i?this.ep:this.rp).Yf(new wn(t,this.bf.It))},i.Fp=function(){return this.bf},i.Yf=function(t){if(t.Et<0||t.It<0)throw new Error("Try to set invalid size to PaneWidget "+JSON.stringify(t));this.bf.Mr(t)||(this.bf=t,this.kf=!0,this.Nf.resizeCanvas({width:t.Et,height:t.It}),this.Rf.resizeCanvas({width:t.Et,height:t.It}),this.kf=!1,this.wp.style.width=t.Et+"px",this.wp.style.height=t.It+"px")},i.zp=function(){var t=p(this.pp);t.Ga(t.Ja()),t.Ga(t.Qa());for(var i,n=(0,s.Z)(t.rl());!(i=n()).done;){var e=i.value;if(t.pe(e)){var h=e.Ct();null!==h&&t.Ga(h),e.rs()}}},i.sp=function(){return this.Nf.canvas},i.Zf=function(t){if(0!==t&&null!==this.pp){if(t>1&&this.zp(),null!==this.ep&&this.ep.Zf(t),null!==this.rp&&this.rp.Zf(t),1!==t){var i=Nn(this.Nf.canvas);i.save(),this.Jf(i,this.Nf.pixelRatio),this.pp&&(this.Wp(i,this.Nf.pixelRatio),this.jp(i,this.Nf.pixelRatio),this.$p(i,this.Nf.pixelRatio,Dn)),i.restore()}var n=Nn(this.Rf.canvas);n.clearRect(0,0,Math.ceil(this.bf.Et*this.Rf.pixelRatio),Math.ceil(this.bf.It*this.Rf.pixelRatio)),this.$p(n,this.Nf.pixelRatio,Un),this.Hp(n,this.Rf.pixelRatio)}},i.Up=function(){return this.ep},i.qp=function(){return this.rp},i.mp=function(){null!==this.pp&&this.pp.uo().v(this),this.pp=null},i.Jf=function(t,i){var n=this;W(t,i,(function(){var i=n.gi(),s=i.nc(),e=i.sc();s===e?q(t,0,0,n.bf.Et,n.bf.It,e):H(t,0,0,n.bf.Et,n.bf.It,s,e)}))},i.Wp=function(t,i){var n=p(this.pp),s=n.co().vl().vt(n.qt(),n.Ut());null!==s&&(t.save(),s.U(t,i,!1),t.restore())},i.jp=function(t,i){var n=this.gi().Eu();this.Yp(t,i,Dn,Zn,n),this.Yp(t,i,Dn,An,n)},i.Hp=function(t,i){this.Yp(t,i,Dn,An,this.gi().Iu())},i.$p=function(t,i,n){for(var e,h=p(this.pp).va(),r=(0,s.Z)(h);!(e=r()).done;){var o=e.value;this.Yp(t,i,n,Zn,o)}for(var u,a=(0,s.Z)(h);!(u=a()).done;){var l=u.value;this.Yp(t,i,n,An,l)}},i.Yp=function(t,i,n,e,h){for(var r,o=p(this.pp),u=n(h,o),a=o.qt(),l=o.Ut(),f=o.jt().Du(),c=null!==f&&f.Ou===h,v=null!==f&&c&&void 0!==f.Pp?f.Pp.Ge:void 0,d=(0,s.Z)(u);!(r=d()).done;){var m=r.value.vt(a,l);null!==m&&(t.save(),e(m,t,i,c,v),t.restore())}},i.Bp=function(t,i,n){for(var e,h=(0,s.Z)(t);!(e=h()).done;){var r=e.value,o=r.vt(this.bf.It,this.bf.Et);if(null!==o&&o.Ze){var u=o.Ze(i,n);if(null!==u)return{uf:r,Pp:u}}}return null},i.kp=function(){if(null!==this.pp){var t=this.vp,i=this.pp.Ja().V().visible,n=this.pp.Qa().V().visible;i||null===this.ep||(this.bp.removeChild(this.ep.Wf()),this.ep.M(),this.ep=null),n||null===this.rp||(this.gp.removeChild(this.rp.Wf()),this.rp.M(),this.rp=null);var s=t.jt().Zu();i&&null===this.ep&&(this.ep=new jn(this,t.V().layout,s,"left"),this.bp.appendChild(this.ep.Wf())),n&&null===this.rp&&(this.rp=new jn(this,t.V().layout,s,"right"),this.gp.appendChild(this.rp.Wf()))}},i.Xp=function(t){return t.lf&&this._p||null!==this.up},i.Kp=function(t){return Math.max(0,Math.min(t,this.bf.Et-1))},i.Zp=function(t){return Math.max(0,Math.min(t,this.bf.It-1))},i.Tp=function(t,i){this.gi().Yu(this.Kp(t),this.Zp(i),p(this.pp))},i.Ap=function(){this.gi().Xu()},i.Lp=function(){this.cp&&(this.up=null,this.Ap())},i.Rp=function(t,i){this.up=t,this.cp=!1,this.Tp(i.x,i.y);var n=this.gi().Iu();this.dp={x:n.Yt(),y:n.Xt()}},i.gi=function(){return this.vp.jt()},i.Gp=function(){var t=this.gi(),i=this.Kf(),n=i.ji();t.ho(i,n),t.Hu(),this.hp=null,this.lp=!1},i.Np=function(t){var i=this;if(this.lp){var n=performance.now();if(null!==this.fp&&this.fp.De(t.if,n),null===this.fp||this.fp.gc(n))this.Gp();else{var s=this.gi(),e=s.gt(),h=this.fp;requestAnimationFrame((function t(){if(!h.Sc()){var n=performance.now(),r=h.gc(n);if(!h.Sc()){var o=e.N_();s.$u(h.bc(n)),o===e.N_()&&(r=!0,i.fp=null)}r?i.Gp():requestAnimationFrame(t)}}))}}},i.Cp=function(){this.up=null},i.Dp=function(){if(this.pp){if(this.Ip(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)p(document.activeElement).blur();else{var t=document.getSelection();null!==t&&t.removeAllRanges()}!this.pp.ji().vi()&&this.gi().gt().vi()}},i.Op=function(t){if(null!==this.pp){var i=this.gi();if(!i.gt().vi()){var n=this.vp.V(),s=n.handleScroll,e=n.kineticScroll;if(s.pressedMouseMove&&!t.lf||(s.horzTouchDrag||s.vertTouchDrag)&&t.lf){var h=this.pp.ji(),r=performance.now();null!==this.hp||this.Xp(t)||(this.hp={x:t.Kd,y:t.Zd,Ao:r,if:t.if,sf:t.sf}),null!==this.fp&&this.fp.wc(t.if,r),null===this.hp||this.lp||this.hp.x===t.Kd&&this.hp.y===t.Zd||(null===this.fp&&(t.lf&&e.touch||!t.lf&&e.mouse)&&(this.fp=new Fn(.2,7,.997,15),this.fp.wc(this.hp.if,this.hp.Ao),this.fp.wc(t.if,r)),h.vi()||i.eo(this.pp,h,t.sf),i.ju(t.if),this.lp=!0),this.lp&&(h.vi()||i.ro(this.pp,h,t.sf),i.$u(t.if))}}}},i.Ip=function(){var t=performance.now(),i=null===this.fp||this.fp.gc(t);null!==this.fp&&(i||this.Gp()),null!==this.fp&&(this.fp.yc(),this.fp=null)},t}(),zn=function(){function t(t,i,n,s,e){var h=this;this.ut=!0,this.bf=new wn(0,0),this.xf=function(){return h.Zf(3)},this.Pf="left"===t,this.bu=n.Zu,this.Fi=i,this.Jp=s,this.Qp=e,this.Of=document.createElement("div"),this.Of.style.width="25px",this.Of.style.height="100%",this.Of.style.overflow="hidden",this.Nf=_n(this.Of,new wn(16,16)),this.Nf.subscribeCanvasConfigured(this.xf)}var i=t.prototype;return i.M=function(){this.Nf.unsubscribeCanvasConfigured(this.xf),this.Nf.destroy()},i.Wf=function(){return this.Of},i.Fp=function(){return this.bf},i.Yf=function(t){if(t.Et<0||t.It<0)throw new Error("Try to set invalid size to PriceAxisStub "+JSON.stringify(t));this.bf.Mr(t)||(this.bf=t,this.Nf.resizeCanvas({width:t.Et,height:t.It}),this.Of.style.width=t.Et+"px",this.Of.style.minWidth=t.Et+"px",this.Of.style.height=t.It+"px",this.ut=!0)},i.Zf=function(t){if((!(t<3)||this.ut)&&0!==this.bf.Et&&0!==this.bf.It){this.ut=!1;var i=Nn(this.Nf.canvas);this.Jf(i,this.Nf.pixelRatio),this.Un(i,this.Nf.pixelRatio)}},i.sp=function(){return this.Nf.canvas},i.Un=function(t,i){if(this.Jp()){var n=this.bf.Et;t.save(),t.fillStyle=this.Fi.timeScale.borderColor;var s=Math.floor(this.bu.V().k*i),e=this.Pf?Math.round(n*i)-s:0;t.fillRect(e,0,s,s),t.restore()}},i.Jf=function(t,i){var n=this;W(t,i,(function(){q(t,0,0,n.bf.Et,n.bf.It,n.Qp())}))},t}();function Jn(t,i){return t.$o>i.$o?t:i}var Kn=function(){function t(t){var i=this;this.tv=null,this.iv=null,this.S=null,this.sv=!1,this.bf=new wn(0,0),this.nv=new T,this.Mf=new Kt(5),this.kf=!1,this.xf=function(){i.kf||i.vp.jt().Wr()},this.Df=function(){i.kf||i.vp.jt().Wr()},this.vp=t,this.Fi=t.V().layout,this.ev=document.createElement("tr"),this.rv=document.createElement("td"),this.rv.style.padding="0",this.hv=document.createElement("td"),this.hv.style.padding="0",this.Of=document.createElement("td"),this.Of.style.height="25px",this.Of.style.padding="0",this.lv=document.createElement("div"),this.lv.style.width="100%",this.lv.style.height="100%",this.lv.style.position="relative",this.lv.style.overflow="hidden",this.Of.appendChild(this.lv),this.Nf=_n(this.lv,new wn(16,16)),this.Nf.subscribeCanvasConfigured(this.xf);var n=this.Nf.canvas;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Rf=_n(this.lv,new wn(16,16)),this.Rf.subscribeCanvasConfigured(this.Df);var s=this.Rf.canvas;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.ev.appendChild(this.rv),this.ev.appendChild(this.Of),this.ev.appendChild(this.hv),this.av(),this.vp.jt().$a().l(this.av.bind(this),this),this.zf=new In(this.Rf.canvas,this,{yd:function(){return!0},kd:function(){return!1}})}var i=t.prototype;return i.M=function(){this.zf.M(),null!==this.tv&&this.tv.M(),null!==this.iv&&this.iv.M(),this.Rf.unsubscribeCanvasConfigured(this.Df),this.Rf.destroy(),this.Nf.unsubscribeCanvasConfigured(this.xf),this.Nf.destroy()},i.Wf=function(){return this.ev},i.ov=function(){return this.tv},i._v=function(){return this.iv},i.Bd=function(t){if(!this.sv){this.sv=!0;var i=this.vp.jt();!i.gt().vi()&&this.vp.V().handleScale.axisPressedMouseMove.time&&i.Fu(t.if)}},i.Id=function(t){this.Bd(t)},i.Vd=function(){var t=this.vp.jt();!t.gt().vi()&&this.sv&&(this.sv=!1,this.vp.V().handleScale.axisPressedMouseMove.time&&t.qu())},i.Td=function(t){var i=this.vp.jt();!i.gt().vi()&&this.vp.V().handleScale.axisPressedMouseMove.time&&i.Uu(t.if)},i.xd=function(t){this.Td(t)},i.Nd=function(){this.sv=!1;var t=this.vp.jt();t.gt().vi()&&!this.vp.V().handleScale.axisPressedMouseMove.time||t.qu()},i.Pd=function(){this.Nd()},i._d=function(){this.vp.V().handleScale.axisDoubleClickReset&&this.vp.jt().ys()},i.hd=function(){this._d()},i.wd=function(){this.vp.jt().V().handleScale.axisPressedMouseMove.time&&this.np(1)},i.Yd=function(){this.np(0)},i.Fp=function(){return this.bf},i.uv=function(){return this.nv},i.cv=function(t,i,n){this.bf&&this.bf.Mr(t)||(this.bf=t,this.kf=!0,this.Nf.resizeCanvas({width:t.Et,height:t.It}),this.Rf.resizeCanvas({width:t.Et,height:t.It}),this.kf=!1,this.Of.style.width=t.Et+"px",this.Of.style.height=t.It+"px",this.nv.m(t)),null!==this.tv&&this.tv.Yf(new wn(i,t.It)),null!==this.iv&&this.iv.Yf(new wn(n,t.It))},i.dv=function(){var t=this.fv();return Math.ceil(t.k+t.C+t.T+t.I+t.N)},i.dt=function(){this.vp.jt().gt().pl()},i.sp=function(){return this.Nf.canvas},i.Zf=function(t){if(0!==t){if(1!==t){var i=Nn(this.Nf.canvas);this.Jf(i,this.Nf.pixelRatio),this.Un(i,this.Nf.pixelRatio),this.Qf(i,this.Nf.pixelRatio),null!==this.tv&&this.tv.Zf(t),null!==this.iv&&this.iv.Zf(t)}var n=Nn(this.Rf.canvas),s=this.Rf.pixelRatio;n.clearRect(0,0,Math.ceil(this.bf.Et*s),Math.ceil(this.bf.It*s)),this.pv([this.vp.jt().Iu()],n,s)}},i.Jf=function(t,i){var n=this;W(t,i,(function(){q(t,0,0,n.bf.Et,n.bf.It,n.vp.jt().sc())}))},i.Un=function(t,i){if(this.vp.V().timeScale.borderVisible){t.save(),t.fillStyle=this.vv();var n=Math.max(1,Math.floor(this.fv().k*i));t.fillRect(0,0,Math.ceil(this.bf.Et*i),n),t.restore()}},i.Qf=function(t,i){var n=this,e=this.vp.jt().gt(),h=e.pl();if(h&&0!==h.length){var r=h.reduce(Jn,h[0]).$o;r>30&&r<50&&(r=30),t.save(),t.strokeStyle=this.vv();var o=this.fv(),u=o.k+o.C+o.I+o.T-o.L;t.textAlign="center",t.fillStyle=this.vv();var a=Math.floor(this.fv().k*i),l=Math.max(1,Math.floor(i)),f=Math.floor(.5*i),c=e.V();if(c.borderVisible&&c.ticksVisible){t.beginPath();for(var v=Math.round(o.C*i),d=h.length;d--;){var p=Math.round(h[d]._l*i);t.rect(p-f,a,l,v)}t.fill()}t.fillStyle=this.j(),W(t,i,(function(){t.font=n.mv();for(var i,e=(0,s.Z)(h);!(i=e()).done;){var o=i.value;if(o.$o<r){var a=o.E_?n.wv(t,o._l,o.Pl):o._l;t.fillText(o.Pl,a,u)}}t.font=n.bv();for(var l,f=(0,s.Z)(h);!(l=f()).done;){var c=l.value;if(c.$o>=r){var v=c.E_?n.wv(t,c._l,c.Pl):c._l;t.fillText(c.Pl,v,u)}}})),t.restore()}},i.wv=function(t,i,n){var s=this.Mf.Qt(t,n),e=s/2,h=Math.floor(i-e)+.5;return h<0?i+=Math.abs(0-h):h+s>this.bf.Et&&(i-=Math.abs(this.bf.Et-(h+s))),i},i.pv=function(t,i,n){for(var e,h=this.fv(),r=(0,s.Z)(t);!(e=r()).done;)for(var o,u=e.value,a=(0,s.Z)(u.Di());!(o=a()).done;){var l=o.value;i.save(),l.vt().U(i,h,n),i.restore()}},i.vv=function(){return this.vp.V().timeScale.borderColor},i.j=function(){return this.Fi.textColor},i.F=function(){return this.Fi.fontSize},i.mv=function(){return P(this.F(),this.Fi.fontFamily)},i.bv=function(){return P(this.F(),this.Fi.fontFamily,"bold")},i.fv=function(){null===this.S&&(this.S={k:1,L:NaN,I:NaN,N:NaN,bi:NaN,C:3,T:NaN,D:"",wi:new Kt});var t=this.S,i=this.mv();if(t.D!==i){var n=this.F();t.T=n,t.D=i,t.I=Math.ceil(n/2.5),t.N=t.I,t.bi=Math.ceil(n/2),t.L=Math.round(this.F()/5),t.wi.he()}return this.S},i.np=function(t){this.Of.style.cursor=1===t?"ew-resize":"default"},i.av=function(){var t=this.vp.jt(),i=t.V();i.leftPriceScale.visible||null===this.tv||(this.rv.removeChild(this.tv.Wf()),this.tv.M(),this.tv=null),i.rightPriceScale.visible||null===this.iv||(this.hv.removeChild(this.iv.Wf()),this.iv.M(),this.iv=null);var n={Zu:this.vp.jt().Zu()},s=function(){return i.leftPriceScale.borderVisible&&t.gt().V().borderVisible},e=function(){return t.sc()};i.leftPriceScale.visible&&null===this.tv&&(this.tv=new zn("left",i,n,s,e),this.rv.appendChild(this.tv.Wf())),i.rightPriceScale.visible&&null===this.iv&&(this.iv=new zn("right",i,n,s,e),this.hv.appendChild(this.iv.Wf()))},t}(),Wn=function(){function t(t,i){var n;this.gv=[],this.Mv=0,this.Rl=0,this.oe=0,this.Sv=0,this.yv=0,this.kv=null,this.xv=!1,this.ap=new T,this.vu=new T,this.Fi=i,this.ev=document.createElement("div"),this.ev.classList.add("tv-lightweight-charts"),this.ev.style.overflow="hidden",this.ev.style.width="100%",this.ev.style.height="100%",(n=this.ev).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.Cv=document.createElement("table"),this.Cv.setAttribute("cellspacing","0"),this.ev.appendChild(this.Cv),this.Tv=this.Dv.bind(this),this.ev.addEventListener("wheel",this.Tv,{passive:!1}),this.gi=new mn(this.wu.bind(this),this.Fi),this.jt().Lu().l(this.Pv.bind(this),this),this.Ov=new Kn(this),this.Cv.appendChild(this.Ov.Wf());var s=this.Fi.width,e=this.Fi.height;if(0===s||0===e){var h=t.getBoundingClientRect();0===s&&(s=Math.floor(h.width),s-=s%2),0===e&&(e=Math.floor(h.height),e-=e%2)}this.Nv(s,e),this.Rv(),t.appendChild(this.ev),this.Av(),this.gi.gt().U_().l(this.gi.Rh.bind(this.gi),this),this.gi.$a().l(this.gi.Rh.bind(this.gi),this)}var i=t.prototype;return i.jt=function(){return this.gi},i.V=function(){return this.Fi},i.Ev=function(){return this.gv},i.Iv=function(){return this.Ov},i.M=function(){this.ev.removeEventListener("wheel",this.Tv),0!==this.Mv&&window.cancelAnimationFrame(this.Mv),this.gi.Lu().v(this),this.gi.gt().U_().v(this),this.gi.$a().v(this),this.gi.M();for(var t,i=(0,s.Z)(this.gv);!(t=i()).done;){var n=t.value;this.Cv.removeChild(n.Wf()),n.Ep().v(this),n.M()}this.gv=[],p(this.Ov).M(),null!==this.ev.parentElement&&this.ev.parentElement.removeChild(this.ev),this.vu.M(),this.ap.M()},i.Nv=function(t,i,n){if(void 0===n&&(n=!1),this.Rl!==i||this.oe!==t){this.Rl=i,this.oe=t;var s=i+"px",e=t+"px";p(this.ev).style.height=s,p(this.ev).style.width=e,this.Cv.style.height=s,this.Cv.style.width=e,n?this.Lv(new rt(3)):this.gi.Rh()}},i.Zf=function(t){void 0===t&&(t=new rt(3));for(var i=0;i<this.gv.length;i++)this.gv[i].Zf(t.bs(i).ps);this.Fi.timeScale.visible&&this.Ov.Zf(t.ws())},i.zr=function(t){this.gi.zr(t),this.Av();var i=t.width||this.oe,n=t.height||this.Rl;this.Nv(i,n)},i.Ep=function(){return this.ap},i.Lu=function(){return this.vu},i.Bv=function(){var t=this;null!==this.kv&&(this.Lv(this.kv),this.kv=null);var i=this.gv[0],n=Cn(document,new wn(this.oe,this.Rl)),s=Nn(n),e=yn(n);return W(s,e,(function(){var n=0,e=0,h=function(i){for(var h=0;h<t.gv.length;h++){var r=t.gv[h],o=r.Fp().It,u=p("left"===i?r.Up():r.qp()),a=u.sp();s.drawImage(a,n,e,u.Xf(),o),e+=o}};t.Vv()&&(h("left"),n=p(i.Up()).Xf()),e=0;for(var r=0;r<t.gv.length;r++){var o=t.gv[r],u=o.Fp(),a=o.sp();s.drawImage(a,n,e,u.Et,u.It),e+=u.It}n+=i.Fp().Et,t.Fv()&&(e=0,h("right"));var l=function(i){var h=p("left"===i?t.Ov.ov():t.Ov._v()),r=h.Fp(),o=h.sp();s.drawImage(o,n,e,r.Et,r.It)};if(t.Fi.timeScale.visible){n=0,t.Vv()&&(l("left"),n=p(i.Up()).Xf());var f=t.Ov.Fp(),c=t.Ov.sp();s.drawImage(c,n,e,f.Et,f.It),t.Fv()&&(n+=i.Fp().Et,l("right"),s.restore())}})),n},i.zv=function(t){return("left"!==t||this.Vv())&&("right"!==t||this.Fv())?0===this.gv.length?0:p("left"===t?this.gv[0].Up():this.gv[0].qp()).Xf():0},i.Wv=function(){for(var t,i=0,n=0,e=0,h=(0,s.Z)(this.gv);!(t=h()).done;){var r=t.value;this.Vv()&&(n=Math.max(n,p(r.Up()).Uf())),this.Fv()&&(e=Math.max(e,p(r.qp()).Uf())),i+=r.Ha()}var o=this.oe,u=this.Rl,a=Math.max(o-n-e,0),l=this.Fi.timeScale.visible,f=l?this.Ov.dv():0;f%2&&(f+=1);for(var c=0+f,v=u<c?0:u-c,d=v/i,m=0,g=0;g<this.gv.length;++g){var b=this.gv[g];b.yp(this.gi.Au()[g]);var M,w;w=g===this.gv.length-1?v-m:Math.round(b.Ha()*d),m+=M=Math.max(w,2),b.Yf(new wn(a,M)),this.Vv()&&b.Vp(n,"left"),this.Fv()&&b.Vp(e,"right"),b.Kf()&&this.gi.Bu(b.Kf(),M)}this.Ov.cv(new wn(l?a:0,f),l?n:0,l?e:0),this.gi.qa(a),this.Sv!==n&&(this.Sv=n),this.yv!==e&&(this.yv=e)},i.Dv=function(t){var i=t.deltaX/100,n=-t.deltaY/100;if(0!==i&&this.Fi.handleScroll.mouseWheel||0!==n&&this.Fi.handleScale.mouseWheel){switch(t.cancelable&&t.preventDefault(),t.deltaMode){case t.DOM_DELTA_PAGE:i*=120,n*=120;break;case t.DOM_DELTA_LINE:i*=32,n*=32}if(0!==n&&this.Fi.handleScale.mouseWheel){var s=Math.sign(n)*Math.min(1,Math.abs(n)),e=t.clientX-this.ev.getBoundingClientRect().left;this.jt().zu(e,s)}0!==i&&this.Fi.handleScroll.mouseWheel&&this.jt().Wu(-80*i)}},i.Lv=function(t){var i,n=t.ws();3===n&&this.jv(),3!==n&&2!==n||(this.$v(t),this.Hv(t),this.Ov.dt(),this.gv.forEach((function(t){t.xp()})),3===(null===(i=this.kv)||void 0===i?void 0:i.ws())&&(this.kv.Ts(t),this.jv(),this.$v(this.kv),this.Hv(this.kv),t=this.kv,this.kv=null)),this.Zf(t)},i.Hv=function(t){for(var i,n=t.Cs(),e=(0,s.Z)(n);!(i=e()).done;){var h=i.value;this.Ds(h)}},i.$v=function(t){for(var i=this.gi.Au(),n=0;n<i.length;n++)t.bs(n).vs&&i[n].oo()},i.Ds=function(t){var i=this.gi.gt();switch(t.Ms){case 0:i.Y_();break;case 1:i.X_(t.Tt);break;case 2:i.ks(t.Tt);break;case 3:i.xs(t.Tt);break;case 4:i.I_()}},i.wu=function(t){var i=this;null!==this.kv?this.kv.Ts(t):this.kv=t,this.xv||(this.xv=!0,this.Mv=window.requestAnimationFrame((function(){if(i.xv=!1,i.Mv=0,null!==i.kv){var t=i.kv;i.kv=null,i.Lv(t)}})))},i.jv=function(){this.Rv()},i.Rv=function(){for(var t=this.gi.Au(),i=t.length,n=this.gv.length,s=i;s<n;s++){var e=d(this.gv.pop());this.Cv.removeChild(e.Wf()),e.Ep().v(this),e.M()}for(var h=n;h<i;h++){var r=new Bn(this,t[h]);r.Ep().l(this.Uv.bind(this),this),this.gv.push(r),this.Cv.insertBefore(r.Wf(),this.Ov.Wf())}for(var o=0;o<i;o++){var u=t[o],a=this.gv[o];a.Kf()!==u?a.yp(u):a.Sp()}this.Av(),this.Wv()},i.qv=function(t,i){var n,s,e=new Map;if(null!==t&&this.gi.ft().forEach((function(i){var n=i._s().rh(t);null!==n&&e.set(i,n)})),null!==t){var h=null===(n=this.gi.gt().Mi(t))||void 0===n?void 0:n.Ho;void 0!==h&&(s=h)}var r=this.jt().Du(),o=null!==r&&r.Ou instanceof Fi?r.Ou:void 0,u=null!==r&&void 0!==r.Pp?r.Pp.Qe:void 0;return{rt:s,pn:null!=t?t:void 0,Yv:null!=i?i:void 0,Xv:o,Kv:e,Zv:u}},i.Uv=function(t,i){var n=this;this.ap.m((function(){return n.qv(t,i)}))},i.Pv=function(t,i){var n=this;this.vu.m((function(){return n.qv(t,i)}))},i.Av=function(){var t=this.Fi.timeScale.visible?"":"none";this.Ov.Wf().style.display=t},i.Vv=function(){return this.gv[0].Kf().Ja().V().visible},i.Fv=function(){return this.gv[0].Kf().Qa().V().visible},t}();function qn(t,i,n,s){var e=n.value;return{pn:i,rt:t,Tt:[e,e,e,e],Ho:s}}function Hn(t,i,n,s){var e=n.value,h={pn:i,rt:t,Tt:[e,e,e,e],Ho:s};return"color"in n&&void 0!==n.color&&(h.O=n.color),h}function Yn(t){return void 0!==t.Tt}function $n(t){return function(i,n,s,e){return void 0===(h=s).open&&void 0===h.value?{rt:i,pn:n,Ho:e}:t(i,n,s,e);var h}}var Qn={Candlestick:$n((function(t,i,n,s){var e={pn:i,rt:t,Tt:[n.open,n.high,n.low,n.close],Ho:s};return"color"in n&&void 0!==n.color&&(e.O=n.color),"borderColor"in n&&void 0!==n.borderColor&&(e.Dt=n.borderColor),"wickColor"in n&&void 0!==n.wickColor&&(e.Xn=n.wickColor),e})),Bar:$n((function(t,i,n,s){var e={pn:i,rt:t,Tt:[n.open,n.high,n.low,n.close],Ho:s};return"color"in n&&void 0!==n.color&&(e.O=n.color),e})),Area:$n(qn),Baseline:$n(qn),Histogram:$n(Hn),Line:$n(Hn)};function Xn(t){return Qn[t]}function ts(t){return 60*t*60*1e3}function is(t){return 60*t*1e3}var ns=[{Gv:(1,1e3),$o:10},{Gv:is(1),$o:20},{Gv:is(5),$o:21},{Gv:is(30),$o:22},{Gv:ts(1),$o:30},{Gv:ts(3),$o:31},{Gv:ts(6),$o:32},{Gv:ts(12),$o:33}];function ss(t,i){if(t.getUTCFullYear()!==i.getUTCFullYear())return 70;if(t.getUTCMonth()!==i.getUTCMonth())return 60;if(t.getUTCDate()!==i.getUTCDate())return 50;for(var n=ns.length-1;n>=0;--n)if(Math.floor(i.getTime()/ns[n].Gv)!==Math.floor(t.getTime()/ns[n].Gv))return ns[n].$o;return 0}function es(t,i){if(void 0===i&&(i=0),0!==t.length){for(var n=0===i?null:t[i-1].rt.Ao,s=null!==n?new Date(1e3*n):null,e=0,h=i;h<t.length;++h){var r=t[h],o=new Date(1e3*r.rt.Ao);null!==s&&(r.jo=ss(o,s)),e+=r.rt.Ao-(n||r.rt.Ao),n=r.rt.Ao,s=o}if(0===i&&t.length>1){var u=Math.ceil(e/(t.length-1)),a=new Date(1e3*(t[0].rt.Ao-u));t[0].jo=ss(new Date(1e3*t[0].rt.Ao),a)}}}function hs(t){if(!bn(t))throw new Error("time must be of type BusinessDay");var i=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{Ao:Math.round(i.getTime()/1e3),Ro:t}}function rs(t){if(!Mn(t))throw new Error("time must be of type isUTCTimestamp");return{Ao:t}}function os(t){return 0===t.length?null:bn(t[0].time)?hs:rs}function us(t){return Mn(t)?rs(t):bn(t)?hs(t):hs(as(t))}function as(t){var i=new Date(t);if(isNaN(i.getTime()))throw new Error("Invalid date string="+t+", expected format=yyyy-mm-dd");return{day:i.getUTCDate(),month:i.getUTCMonth()+1,year:i.getUTCFullYear()}}function ls(t){E(t.time)&&(t.time=as(t.time))}function fs(t){return{pn:0,Jv:new Map,$h:t}}function cs(t){if(void 0!==t&&0!==t.length)return{Qv:t[0].rt.Ao,tm:t[t.length-1].rt.Ao}}function vs(t){var i;return t.forEach((function(t){void 0===i&&(i=t.Ho)})),d(i)}function ds(t){void 0===t.Ho&&(t.Ho=t.time)}var ps=function(){function t(){this.im=new Map,this.sm=new Map,this.nm=new Map,this.rm=[]}var i=t.prototype;return i.M=function(){this.im.clear(),this.sm.clear(),this.nm.clear(),this.rm=[]},i.hm=function(t,i){var n=this,e=0!==this.im.size,h=!1,r=this.sm.get(t);if(void 0!==r)if(1===this.sm.size)e=!1,h=!0,this.im.clear();else for(var o,u=(0,s.Z)(this.rm);!(o=u()).done;){o.value.pointData.Jv.delete(t)&&(h=!0)}var a=[];if(0!==i.length){var l=i;l.forEach((function(t){return ds(t)})),function(t){t.forEach(ls)}(i);var f=p(os(i)),c=Xn(t.$r());a=l.map((function(i){var s=f(i.time),e=n.im.get(s.Ao);void 0===e&&(e=fs(s),n.im.set(s.Ao,e),h=!0);var r=c(s,e.pn,i,i.Ho);return e.Jv.set(t,r),r}))}e&&this.lm(),this.am(t,a);var v=-1;if(h){var d=[];this.im.forEach((function(t){d.push({jo:0,rt:t.$h,pointData:t,Ho:vs(t.Jv)})})),d.sort((function(t,i){return t.rt.Ao-i.rt.Ao})),v=this.om(d)}return this._m(t,v,function(t,i){var n=cs(t),s=cs(i);if(void 0!==n&&void 0!==s)return{Lh:n.tm>=s.tm&&n.Qv>=s.Qv}}(this.sm.get(t),r))},i.Qu=function(t){return this.hm(t,[])},i.um=function(t,i){var n=i;ds(n),ls(i);var s=p(os([i]))(i.time),e=this.nm.get(t);if(void 0!==e&&s.Ao<e.Ao)throw new Error("Cannot update oldest data, last time="+e.Ao+", new time="+s.Ao);var h=this.im.get(s.Ao),r=void 0===h;void 0===h&&(h=fs(s),this.im.set(s.Ao,h));var o=Xn(t.$r())(s,h.pn,i,n.Ho);h.Jv.set(t,o),this.dm(t,o);var u={Lh:Yn(o)};if(!r)return this._m(t,-1,u);var a={jo:0,rt:h.$h,pointData:h,Ho:vs(h.Jv)},l=Mt(this.rm,a.rt.Ao,(function(t,i){return t.rt.Ao<i}));this.rm.splice(l,0,a);for(var f=l;f<this.rm.length;++f)ms(this.rm[f].pointData,f);return es(this.rm,l),this._m(t,l,u)},i.dm=function(t,i){var n=this.sm.get(t);void 0===n&&(n=[],this.sm.set(t,n));var s=0!==n.length?n[n.length-1]:null;null===s||i.rt.Ao>s.rt.Ao?Yn(i)&&n.push(i):Yn(i)?n[n.length-1]=i:n.splice(-1,1),this.nm.set(t,i.rt)},i.am=function(t,i){0!==i.length?(this.sm.set(t,i.filter(Yn)),this.nm.set(t,i[i.length-1].rt)):(this.sm.delete(t),this.nm.delete(t))},i.lm=function(){for(var t,i=(0,s.Z)(this.rm);!(t=i()).done;){var n=t.value;0===n.pointData.Jv.size&&this.im.delete(n.rt.Ao)}},i.om=function(t){for(var i=-1,n=0;n<this.rm.length&&n<t.length;++n){var s=this.rm[n],e=t[n];if(s.rt.Ao!==e.rt.Ao){i=n;break}e.jo=s.jo,ms(e.pointData,n)}if(-1===i&&this.rm.length!==t.length&&(i=Math.min(this.rm.length,t.length)),-1===i)return-1;for(var h=i;h<t.length;++h)ms(t[h].pointData,h);return es(t,i),this.rm=t,i},i.fm=function(){if(0===this.sm.size)return null;var t=0;return this.sm.forEach((function(i){0!==i.length&&(t=Math.max(t,i[i.length-1].pn))})),t},i._m=function(t,i,n){var s={pm:new Map,gt:{C_:this.fm()}};if(-1!==i)this.sm.forEach((function(i,e){s.pm.set(e,{ye:i,vm:e===t?n:void 0})})),this.sm.has(t)||s.pm.set(t,{ye:[],vm:n}),s.gt.wm=this.rm,s.gt.bm=i;else{var e=this.sm.get(t);s.pm.set(t,{ye:e||[],vm:n})}return s},t}();function ms(t,i){t.pn=i,t.Jv.forEach((function(t){t.pn=i}))}function gs(t){return{value:t.Tt[3],time:t.Ho}}function bs(t){return{open:t.Tt[0],high:t.Tt[1],low:t.Tt[2],close:t.Tt[3],time:t.Ho}}var Ms={Area:gs,Line:gs,Baseline:gs,Histogram:function(t){return{value:t.Tt[3],color:t.O,time:t.Ho}},Bar:bs,Candlestick:bs};function ws(t){return Ms[t]}var ys={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:""},Ns=function(){function t(t){this.Ir=t}var i=t.prototype;return i.applyOptions=function(t){this.Ir.zr(t)},i.options=function(){return this.Ir.V()},i.gm=function(){return this.Ir},t}(),Cs=function(){function t(t,i,n){this.Gs=t,this.Mm=i,this.Sm=n}var i=t.prototype;return i.priceFormatter=function(){return this.Gs.Zh()},i.priceToCoordinate=function(t){var i=this.Gs.yt();return null===i?null:this.Gs.Ct().xt(t,i.Tt)},i.coordinateToPrice=function(t){var i=this.Gs.yt();return null===i?null:this.Gs.Ct().$i(t,i.Tt)},i.barsInLogicalRange=function(t){if(null===t)return null;var i=new fn(new sn(t.from,t.to)).Ko(),n=this.Gs._s();if(n.vi())return null;var s=n.rh(i.Hs(),1),e=n.rh(i.Us(),-1),h=p(n.sh()),r=p(n.os());if(null!==s&&null!==e&&s.pn>e.pn)return{barsBefore:t.from-h,barsAfter:r-t.to};var o={barsBefore:null===s||s.pn===h?t.from-h:s.pn-h,barsAfter:null===e||e.pn===r?r-t.to:r-e.pn};return null!==s&&null!==e&&(o.from=s.rt.Ro||s.rt.Ao,o.to=e.rt.Ro||e.rt.Ao),o},i.setData=function(t){this.Gs.$r(),this.Mm.ym(this.Gs,t)},i.update=function(t){this.Gs.$r(),this.Mm.km(this.Gs,t)},i.dataByIndex=function(t,i){var n=this.Gs._s().rh(t,i);return null===n?null:ws(this.seriesType())(n)},i.setMarkers=function(t){var i=t.map((function(t){return Object.assign(Object.assign({},t),{originalTime:t.time,time:us(t.time)})}));this.Gs.Vh(i)},i.markers=function(){return this.Gs.Fh().map((function(t){var i=t.originalTime,n=(t.time,function(t,i){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&i.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(s=Object.getOwnPropertySymbols(t);e<s.length;e++)i.indexOf(s[e])<0&&Object.prototype.propertyIsEnumerable.call(t,s[e])&&(n[s[e]]=t[s[e]])}return n}(t,["originalTime","time"]));return Object.assign({time:i},n)}))},i.applyOptions=function(t){this.Gs.zr(t)},i.options=function(){return O(this.Gs.V())},i.priceScale=function(){return this.Sm.priceScale(this.Gs.Ct().il())},i.createPriceLine=function(t){var i=F(O(ys),t),n=this.Gs.zh(i);return new Ns(n)},i.removePriceLine=function(t){this.Gs.Wh(t.gm())},i.seriesType=function(){return this.Gs.$r()},t}(),_s=function(t){function i(){return t.apply(this,arguments)||this}return(0,h.Z)(i,t),i.prototype.applyOptions=function(i){gn(i),t.prototype.applyOptions.call(this,i)},i}(Cs),Ss={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!0,scaleMargins:{bottom:.1,top:.2}},Ts={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:V,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"},Fs={width:0,height:0,layout:{background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:11,fontFamily:V},crosshair:{vertLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},horzLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},mode:1},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},overlayPriceScales:Object.assign({},Ss),leftPriceScale:Object.assign(Object.assign({},Ss),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},Ss),{visible:!0}),timeScale:{rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,ticksVisible:!0},watermark:Ts,localization:{locale:xn?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:!0,mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}},xs={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},ks={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},Es={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Is={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Os={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Ls={color:"#26a69a",base:0},Rs={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},Vs=function(){function t(t,i){this.xm=t,this.Cm=i}var i=t.prototype;return i.applyOptions=function(t){this.xm.jt().Nu(this.Cm,t)},i.options=function(){return this.fi().V()},i.width=function(){return ht(this.Cm)?this.xm.zv(this.Cm):0},i.fi=function(){return p(this.xm.jt().Ru(this.Cm)).Ct},t}(),Ps=function(){function t(t,i){this.Tm=new T,this.r_=new T,this.nv=new T,this.gi=t,this.Ia=t.gt(),this.Ov=i,this.Ia.j_().l(this.Dm.bind(this)),this.Ia.H_().l(this.Pm.bind(this)),this.Ov.uv().l(this.Om.bind(this))}var i=t.prototype;return i.M=function(){this.Ia.j_().v(this),this.Ia.H_().v(this),this.Ov.uv().v(this),this.Tm.M(),this.r_.M(),this.nv.M()},i.scrollPosition=function(){return this.Ia.N_()},i.scrollToPosition=function(t,i){i?this.Ia.W_(t,1e3):this.gi.xs(t)},i.scrollToRealTime=function(){this.Ia.z_()},i.getVisibleRange=function(){var t,i,n=this.Ia.b_();return null===n?null:{from:null!==(t=n.from.Ro)&&void 0!==t?t:n.from.Ao,to:null!==(i=n.to.Ro)&&void 0!==i?i:n.to.Ao}},i.setVisibleRange=function(t){var i={from:us(t.from),to:us(t.to)},n=this.Ia.y_(i);this.gi.tc(n)},i.getVisibleLogicalRange=function(){var t=this.Ia.w_();return null===t?null:{from:t.Hs(),to:t.Us()}},i.setVisibleLogicalRange=function(t){v(t.from<=t.to,"The from index cannot be after the to index."),this.gi.tc(t)},i.resetTimeScale=function(){this.gi.ys()},i.fitContent=function(){this.gi.Y_()},i.logicalToCoordinate=function(t){var i=this.gi.gt();return i.vi()?null:i.Ot(t)},i.coordinateToLogical=function(t){return this.Ia.vi()?null:this.Ia.T_(t)},i.timeToCoordinate=function(t){var i=us(t),n=this.Ia.nl(i,!1);return null===n?null:this.Ia.Ot(n)},i.coordinateToTime=function(t){var i,n=this.gi.gt(),s=n.T_(t),e=n.Hi(s);return null===e?null:null!==(i=e.Ro)&&void 0!==i?i:e.Ao},i.width=function(){return this.Ov.Fp().Et},i.height=function(){return this.Ov.Fp().It},i.subscribeVisibleTimeRangeChange=function(t){this.Tm.l(t)},i.unsubscribeVisibleTimeRangeChange=function(t){this.Tm.p(t)},i.subscribeVisibleLogicalRangeChange=function(t){this.r_.l(t)},i.unsubscribeVisibleLogicalRangeChange=function(t){this.r_.p(t)},i.subscribeSizeChange=function(t){this.nv.l(t)},i.unsubscribeSizeChange=function(t){this.nv.p(t)},i.applyOptions=function(t){this.Ia.zr(t)},i.options=function(){return O(this.Ia.V())},i.Dm=function(){this.Tm.g()&&this.Tm.m(this.getVisibleRange())},i.Pm=function(){this.r_.g()&&this.r_.m(this.getVisibleLogicalRange())},i.Om=function(t){this.nv.m(t.Et,t.It)},t}();function Gs(t){if(void 0!==t&&"custom"!==t.type){var i=t;void 0!==i.minMove&&void 0===i.precision&&(i.precision=function(t){if(t>=1)return 0;for(var i=0;i<8;i++){var n=Math.round(t);if(Math.abs(n-t)<1e-8)return i;t*=10}return i}(i.minMove))}}function js(t){return function(t){if(I(t.handleScale)){var i=t.handleScale;t.handleScale={axisDoubleClickReset:i,axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(void 0!==t.handleScale&&I(t.handleScale.axisPressedMouseMove)){var n=t.handleScale.axisPressedMouseMove;t.handleScale.axisPressedMouseMove={time:n,price:n}}var s=t.handleScroll;I(s)&&(t.handleScroll={horzTouchDrag:s,vertTouchDrag:s,mouseWheel:s,pressedMouseMove:s})}(t),t}var Zs=function(){function t(t,i){var n=this;this.Nm=new ps,this.Rm=new Map,this.Am=new Map,this.Em=new T,this.Im=new T;var s=void 0===i?O(Fs):F(O(Fs),js(i));this.xm=new Wn(t,s),this.xm.Ep().l((function(t){n.Em.g()&&n.Em.m(n.Lm(t()))}),this),this.xm.Lu().l((function(t){n.Im.g()&&n.Im.m(n.Lm(t()))}),this);var e=this.xm.jt();this.Bm=new Ps(e,this.xm.Iv())}var i=t.prototype;return i.remove=function(){this.xm.Ep().v(this),this.xm.Lu().v(this),this.Bm.M(),this.xm.M(),this.Rm.clear(),this.Am.clear(),this.Em.M(),this.Im.M(),this.Nm.M()},i.resize=function(t,i,n){this.xm.Nv(t,i,n)},i.addAreaSeries=function(t){void 0===t&&(t={}),Gs(t.priceFormat);var i=F(O(Rs),Is,t),n=this.xm.jt().Gu("Area",i),s=new Cs(n,this,this);return this.Rm.set(s,n),this.Am.set(n,s),s},i.addBaselineSeries=function(t){void 0===t&&(t={}),Gs(t.priceFormat);var i=F(O(Rs),O(Os),t),n=this.xm.jt().Gu("Baseline",i),s=new Cs(n,this,this);return this.Rm.set(s,n),this.Am.set(n,s),s},i.addBarSeries=function(t){void 0===t&&(t={}),Gs(t.priceFormat);var i=F(O(Rs),ks,t),n=this.xm.jt().Gu("Bar",i),s=new Cs(n,this,this);return this.Rm.set(s,n),this.Am.set(n,s),s},i.addCandlestickSeries=function(t){void 0===t&&(t={}),gn(t),Gs(t.priceFormat);var i=F(O(Rs),xs,t),n=this.xm.jt().Gu("Candlestick",i),s=new _s(n,this,this);return this.Rm.set(s,n),this.Am.set(n,s),s},i.addHistogramSeries=function(t){void 0===t&&(t={}),Gs(t.priceFormat);var i=F(O(Rs),Ls,t),n=this.xm.jt().Gu("Histogram",i),s=new Cs(n,this,this);return this.Rm.set(s,n),this.Am.set(n,s),s},i.addLineSeries=function(t){void 0===t&&(t={}),Gs(t.priceFormat);var i=F(O(Rs),Es,t),n=this.xm.jt().Gu("Line",i),s=new Cs(n,this,this);return this.Rm.set(s,n),this.Am.set(n,s),s},i.removeSeries=function(t){var i=d(this.Rm.get(t)),n=this.Nm.Qu(i);this.xm.jt().Qu(i),this.Vm(n),this.Rm.delete(t),this.Am.delete(i)},i.ym=function(t,i){this.Vm(this.Nm.hm(t,i))},i.km=function(t,i){this.Vm(this.Nm.um(t,i))},i.subscribeClick=function(t){this.Em.l(t)},i.unsubscribeClick=function(t){this.Em.p(t)},i.subscribeCrosshairMove=function(t){this.Im.l(t)},i.unsubscribeCrosshairMove=function(t){this.Im.p(t)},i.priceScale=function(t){return new Vs(this.xm,t)},i.timeScale=function(){return this.Bm},i.applyOptions=function(t){this.xm.zr(js(t))},i.options=function(){return this.xm.V()},i.takeScreenshot=function(){return this.xm.Bv()},i.Vm=function(t){var i=this.xm.jt();i.Ku(t.gt.C_,t.gt.wm,t.gt.bm),t.pm.forEach((function(t,i){return i.Z(t.ye,t.vm)})),i.P_()},i.Fm=function(t){return d(this.Am.get(t))},i.Lm=function(t){var i=this,n=new Map;t.Kv.forEach((function(t,s){var e=ws(s.$r())(t);v(function(t){return void 0!==t.open||void 0!==t.value}(e)),n.set(i.Fm(s),e)}));var s=void 0===t.Xv?void 0:this.Fm(t.Xv);return{time:t.rt,logical:t.pn,point:t.Yv,hoveredSeries:s,hoveredMarkerId:t.Zv,seriesData:n}},t}();function As(t,i){var n;if(E(t)){var s=document.getElementById(t);v(null!==s,"Cannot find element in DOM with id="+t),n=s}else n=t;return new Zs(n,i)}function Ds(){return"4.0.0-dev+202203171710"}}}]);